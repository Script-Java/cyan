{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/atrin/Desktop/PRODUCTS/cyan/prd/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\r\n  ({ className, type, ...props }, ref) => {\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n          className,\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    );\r\n  },\r\n);\r\nInput.displayName = \"Input\";\r\n\r\nexport { Input };\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,2KAAgB,MAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,6LAAC;QACC,MAAM;QACN,WAAW,IAAA,qHAAE,EACX,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/atrin/Desktop/PRODUCTS/cyan/prd/components/ui/label.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst labelVariants = cva(\r\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\",\r\n);\r\n\r\nconst Label = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\r\n    VariantProps<typeof labelVariants>\r\n>(({ className, ...props }, ref) => (\r\n  <LabelPrimitive.Root\r\n    ref={ref}\r\n    className={cn(labelVariants(), className)}\r\n    {...props}\r\n  />\r\n));\r\nLabel.displayName = LabelPrimitive.Root.displayName;\r\n\r\nexport { Label };\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB;AAGF,MAAM,sBAAQ,2KAAgB,MAI5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,4KAAmB;QAClB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iBAAiB;QAC9B,GAAG,KAAK;;;;;;;AAGb,MAAM,WAAW,GAAG,4KAAmB,CAAC,WAAW"}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/atrin/Desktop/PRODUCTS/cyan/prd/components/ui/select.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\";\r\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Select = SelectPrimitive.Root;\r\n\r\nconst SelectGroup = SelectPrimitive.Group;\r\n\r\nconst SelectValue = SelectPrimitive.Value;\r\n\r\nconst SelectTrigger = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <SelectPrimitive.Icon asChild>\r\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\r\n    </SelectPrimitive.Icon>\r\n  </SelectPrimitive.Trigger>\r\n));\r\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName;\r\n\r\nconst SelectScrollUpButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollUpButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronUp className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollUpButton>\r\n));\r\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName;\r\n\r\nconst SelectScrollDownButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollDownButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronDown className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollDownButton>\r\n));\r\nSelectScrollDownButton.displayName =\r\n  SelectPrimitive.ScrollDownButton.displayName;\r\n\r\nconst SelectContent = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\r\n>(({ className, children, position = \"popper\", ...props }, ref) => (\r\n  <SelectPrimitive.Portal>\r\n    <SelectPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\r\n        position === \"popper\" &&\r\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n        className,\r\n      )}\r\n      position={position}\r\n      {...props}\r\n    >\r\n      <SelectScrollUpButton />\r\n      <SelectPrimitive.Viewport\r\n        className={cn(\r\n          \"p-1\",\r\n          position === \"popper\" &&\r\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\",\r\n        )}\r\n      >\r\n        {children}\r\n      </SelectPrimitive.Viewport>\r\n      <SelectScrollDownButton />\r\n    </SelectPrimitive.Content>\r\n  </SelectPrimitive.Portal>\r\n));\r\nSelectContent.displayName = SelectPrimitive.Content.displayName;\r\n\r\nconst SelectLabel = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\r\n    {...props}\r\n  />\r\n));\r\nSelectLabel.displayName = SelectPrimitive.Label.displayName;\r\n\r\nconst SelectItem = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <SelectPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </SelectPrimitive.ItemIndicator>\r\n    </span>\r\n\r\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n  </SelectPrimitive.Item>\r\n));\r\nSelectItem.displayName = SelectPrimitive.Item.displayName;\r\n\r\nconst SelectSeparator = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n));\r\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName;\r\n\r\nexport {\r\n  Select,\r\n  SelectGroup,\r\n  SelectValue,\r\n  SelectTrigger,\r\n  SelectContent,\r\n  SelectLabel,\r\n  SelectItem,\r\n  SelectSeparator,\r\n  SelectScrollUpButton,\r\n  SelectScrollDownButton,\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAAA;AAAA;AAEA;;;;;;AAEA,MAAM,SAAS,6KAAoB;AAEnC,MAAM,cAAc,8KAAqB;AAEzC,MAAM,cAAc,8KAAqB;AAEzC,MAAM,8BAAgB,2KAAgB,MAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC,gLAAuB;QACtB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,mTACA;QAED,GAAG,KAAK;;YAER;0BACD,6LAAC,6KAAoB;gBAAC,OAAO;0BAC3B,cAAA,6LAAC,sOAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;;AAI7B,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,qCAAuB,2KAAgB,CAG3C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,uLAA8B;QAC7B,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,gOAAS;YAAC,WAAU;;;;;;;;;;;MAZnB;AAeN,qBAAqB,WAAW,GAAG,uLAA8B,CAAC,WAAW;AAE7E,MAAM,uCAAyB,2KAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,yLAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,sOAAW;YAAC,WAAU;;;;;;;;;;;MAZrB;AAeN,uBAAuB,WAAW,GAChC,yLAAgC,CAAC,WAAW;AAE9C,MAAM,8BAAgB,2KAAgB,OAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzD,6LAAC,+KAAsB;kBACrB,cAAA,6LAAC,gLAAuB;YACtB,KAAK;YACL,WAAW,IAAA,qHAAE,EACX,ucACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,6LAAC;;;;;8BACD,6LAAC,iLAAwB;oBACvB,WAAW,IAAA,qHAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,6LAAC;;;;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,8KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,0CAA0C;QACvD,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW;AAE3D,MAAM,2BAAa,2KAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC,6KAAoB;QACnB,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,6NACA;QAED,GAAG,KAAK;;0BAET,6LAAC;gBAAK,WAAU;0BACd,cAAA,6LAAC,sLAA6B;8BAC5B,cAAA,6LAAC,gNAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAIrB,6LAAC,iLAAwB;0BAAE;;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,6KAAoB,CAAC,WAAW;AAEzD,MAAM,gCAAkB,2KAAgB,QAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,kLAAyB;QACxB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG,kLAAyB,CAAC,WAAW"}},
    {"offset": {"line": 298, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/atrin/Desktop/PRODUCTS/cyan/prd/components/CheckoutForm.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\n\r\ninterface CheckoutFormProps {\r\n  customerInfo: {\r\n    email: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    phone: string;\r\n    street: string;\r\n    street2: string;\r\n    city: string;\r\n    state: string;\r\n    postalCode: string;\r\n    country: string;\r\n  };\r\n  billingInfo: {\r\n    sameAsShipping: boolean;\r\n    firstName: string;\r\n    lastName: string;\r\n    street: string;\r\n    street2: string;\r\n    city: string;\r\n    state: string;\r\n    postalCode: string;\r\n    country: string;\r\n  };\r\n  onCustomerChange: (field: string, value: string) => void;\r\n  onBillingChange: (field: string, value: string | boolean) => void;\r\n}\r\n\r\nconst COUNTRIES = [\r\n  { code: \"US\", name: \"United States\" },\r\n  { code: \"CA\", name: \"Canada\" },\r\n  { code: \"GB\", name: \"United Kingdom\" },\r\n  { code: \"AU\", name: \"Australia\" },\r\n];\r\n\r\nconst US_STATES = [\r\n  \"AL\",\r\n  \"AK\",\r\n  \"AZ\",\r\n  \"AR\",\r\n  \"CA\",\r\n  \"CO\",\r\n  \"CT\",\r\n  \"DE\",\r\n  \"FL\",\r\n  \"GA\",\r\n  \"HI\",\r\n  \"ID\",\r\n  \"IL\",\r\n  \"IN\",\r\n  \"IA\",\r\n  \"KS\",\r\n  \"KY\",\r\n  \"LA\",\r\n  \"ME\",\r\n  \"MD\",\r\n  \"MA\",\r\n  \"MI\",\r\n  \"MN\",\r\n  \"MS\",\r\n  \"MO\",\r\n  \"MT\",\r\n  \"NE\",\r\n  \"NV\",\r\n  \"NH\",\r\n  \"NJ\",\r\n  \"NM\",\r\n  \"NY\",\r\n  \"NC\",\r\n  \"ND\",\r\n  \"OH\",\r\n  \"OK\",\r\n  \"OR\",\r\n  \"PA\",\r\n  \"RI\",\r\n  \"SC\",\r\n  \"SD\",\r\n  \"TN\",\r\n  \"TX\",\r\n  \"UT\",\r\n  \"VT\",\r\n  \"VA\",\r\n  \"WA\",\r\n  \"WV\",\r\n  \"WI\",\r\n  \"WY\",\r\n];\r\n\r\ninterface SavedAddress {\r\n  id: number;\r\n  first_name: string;\r\n  last_name: string;\r\n  street_1: string;\r\n  street_2?: string;\r\n  city: string;\r\n  state_or_province: string;\r\n  postal_code: string;\r\n  country_code: string;\r\n}\r\n\r\nexport default function CheckoutForm({\r\n  customerInfo,\r\n  billingInfo,\r\n  onCustomerChange,\r\n  onBillingChange,\r\n}: CheckoutFormProps) {\r\n  const [savedAddresses, setSavedAddresses] = useState<SavedAddress[]>([]);\r\n  const [isLoadingAddresses, setIsLoadingAddresses] = useState(false);\r\n  const [selectedSavedAddressId, setSelectedSavedAddressId] = useState<\r\n    number | null\r\n  >(null);\r\n\r\n  useEffect(() => {\r\n    const loadSavedAddresses = async () => {\r\n      const token = localStorage.getItem(\"authToken\");\r\n      if (!token) return;\r\n\r\n      try {\r\n        setIsLoadingAddresses(true);\r\n        const response = await fetch(\"/api/customers/me/addresses\", {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setSavedAddresses(data.addresses || []);\r\n\r\n          // Auto-select first address\r\n          if (data.addresses && data.addresses.length > 0) {\r\n            const firstAddress = data.addresses[0];\r\n            setSelectedSavedAddressId(firstAddress.id);\r\n            onCustomerChange(\"firstName\", firstAddress.first_name);\r\n            onCustomerChange(\"lastName\", firstAddress.last_name);\r\n            onCustomerChange(\"street\", firstAddress.street_1);\r\n            onCustomerChange(\"street2\", firstAddress.street_2 || \"\");\r\n            onCustomerChange(\"city\", firstAddress.city);\r\n            onCustomerChange(\"state\", firstAddress.state_or_province);\r\n            onCustomerChange(\"postalCode\", firstAddress.postal_code);\r\n\r\n            // Validate country code against allowed values\r\n            const validCountryCode = COUNTRIES.some(c => c.code === firstAddress.country_code)\r\n              ? firstAddress.country_code\r\n              : \"US\";\r\n            onCustomerChange(\"country\", validCountryCode);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error loading saved addresses:\", error);\r\n      } finally {\r\n        setIsLoadingAddresses(false);\r\n      }\r\n    };\r\n\r\n    loadSavedAddresses();\r\n  }, []);\r\n\r\n  const handleSelectAddress = (addressId: number) => {\r\n    const address = savedAddresses.find((a) => a.id === addressId);\r\n    if (!address) return;\r\n\r\n    setSelectedSavedAddressId(addressId);\r\n    onCustomerChange(\"firstName\", address.first_name);\r\n    onCustomerChange(\"lastName\", address.last_name);\r\n    onCustomerChange(\"street\", address.street_1);\r\n    onCustomerChange(\"street2\", address.street_2 || \"\");\r\n    onCustomerChange(\"city\", address.city);\r\n    onCustomerChange(\"state\", address.state_or_province);\r\n    onCustomerChange(\"postalCode\", address.postal_code);\r\n\r\n    // Validate country code against allowed values\r\n    const validCountryCode = COUNTRIES.some(c => c.code === address.country_code)\r\n      ? address.country_code\r\n      : \"US\";\r\n    onCustomerChange(\"country\", validCountryCode);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Saved Addresses */}\r\n      {savedAddresses.length > 0 && (\r\n        <div className=\"backdrop-blur-xl bg-white border border-gray-200 rounded-2xl p-6\">\r\n          <h3 className=\"text-xl font-bold mb-6\">Saved Addresses</h3>\r\n          <div className=\"space-y-2 mb-4\">\r\n            {savedAddresses.map((address) => (\r\n              <button\r\n                key={address.id}\r\n                onClick={() => handleSelectAddress(address.id)}\r\n                className={`w-full text-left p-4 rounded-lg border-2 transition-colors ${\r\n                  selectedSavedAddressId === address.id\r\n                    ? \"border-blue-600 bg-blue-50\"\r\n                    : \"border-gray-200 hover:border-gray-300 bg-gray-50\"\r\n                }`}\r\n              >\r\n                <p className=\"font-semibold text-gray-900\">\r\n                  {address.first_name} {address.last_name}\r\n                </p>\r\n                <p className=\"text-gray-700 text-sm\">{address.street_1}</p>\r\n                {address.street_2 && (\r\n                  <p className=\"text-gray-700 text-sm\">{address.street_2}</p>\r\n                )}\r\n                <p className=\"text-gray-700 text-sm\">\r\n                  {address.city}, {address.state_or_province}{\" \"}\r\n                  {address.postal_code}\r\n                </p>\r\n              </button>\r\n            ))}\r\n          </div>\r\n          <p className=\"text-gray-600 text-sm mb-6\">\r\n            Or enter a different address below:\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Shipping Information */}\r\n      <div className=\"backdrop-blur-xl bg-white border border-gray-200 rounded-2xl p-4 sm:p-6\">\r\n        <h3 className=\"text-lg sm:text-xl font-bold mb-4 sm:mb-6\">Shipping Address</h3>\r\n\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-3 sm:mb-4\">\r\n          <div>\r\n            <Label htmlFor=\"shipping-first-name\" className=\"text-gray-700\">\r\n              First Name <span aria-label=\"required\">*</span>\r\n            </Label>\r\n            <Input\r\n              id=\"shipping-first-name\"\r\n              value={customerInfo.firstName}\r\n              onChange={(e) => onCustomerChange(\"firstName\", e.target.value)}\r\n              className=\"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 mt-2\"\r\n              required\r\n              aria-required=\"true\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <Label htmlFor=\"shipping-last-name\" className=\"text-gray-700\">\r\n              Last Name <span aria-label=\"required\">*</span>\r\n            </Label>\r\n            <Input\r\n              id=\"shipping-last-name\"\r\n              value={customerInfo.lastName}\r\n              onChange={(e) => onCustomerChange(\"lastName\", e.target.value)}\r\n              className=\"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 mt-2\"\r\n              required\r\n              aria-required=\"true\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mb-3 sm:mb-4\">\r\n          <Label htmlFor=\"shipping-email\" className=\"text-sm sm:text-gray-700\">\r\n            Email Address <span aria-label=\"required\">*</span>\r\n          </Label>\r\n          <Input\r\n            id=\"shipping-email\"\r\n            type=\"email\"\r\n            value={customerInfo.email}\r\n            onChange={(e) => onCustomerChange(\"email\", e.target.value)}\r\n            className=\"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 mt-1 sm:mt-2\"\r\n            required\r\n            aria-required=\"true\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-3 sm:mb-4\">\r\n          <Label htmlFor=\"shipping-phone\" className=\"text-sm sm:text-gray-700\">\r\n            Phone Number <span aria-label=\"required\">*</span>\r\n          </Label>\r\n          <Input\r\n            id=\"shipping-phone\"\r\n            type=\"tel\"\r\n            value={customerInfo.phone}\r\n            onChange={(e) => onCustomerChange(\"phone\", e.target.value)}\r\n            className=\"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 mt-1 sm:mt-2\"\r\n            required\r\n            aria-required=\"true\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-3 sm:mb-4\">\r\n          <Label htmlFor=\"shipping-street\" className=\"text-sm sm:text-gray-700\">\r\n            Street Address <span aria-label=\"required\">*</span>\r\n          </Label>\r\n          <Input\r\n            id=\"shipping-street\"\r\n            value={customerInfo.street}\r\n            onChange={(e) => onCustomerChange(\"street\", e.target.value)}\r\n            placeholder=\"123 Main St\"\r\n            className=\"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 mt-1 sm:mt-2\"\r\n            required\r\n            aria-required=\"true\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-3 sm:mb-4\">\r\n          <Label htmlFor=\"shipping-street2\" className=\"text-sm sm:text-gray-700\">\r\n            Apt, Suite, etc. (optional)\r\n          </Label>\r\n          <Input\r\n            id=\"shipping-street2\"\r\n            value={customerInfo.street2}\r\n            onChange={(e) => onCustomerChange(\"street2\", e.target.value)}\r\n            placeholder=\"Apt 4B\"\r\n            className=\"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 mt-1 sm:mt-2\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-3 sm:mb-4\">\r\n          <div>\r\n            <Label className=\"text-sm sm:text-gray-700\">City *</Label>\r\n            <Input\r\n              value={customerInfo.city}\r\n              onChange={(e) => onCustomerChange(\"city\", e.target.value)}\r\n              className=\"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 mt-1 sm:mt-2\"\r\n              required\r\n            />\r\n          </div>\r\n          <div>\r\n            <Label className=\"text-sm sm:text-gray-700\">Postal Code *</Label>\r\n            <Input\r\n              value={customerInfo.postalCode}\r\n              onChange={(e) => onCustomerChange(\"postalCode\", e.target.value)}\r\n              className=\"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 mt-1 sm:mt-2\"\r\n              required\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4\">\r\n          <div>\r\n            <Label className=\"text-sm sm:text-gray-700\">Country *</Label>\r\n            <Select\r\n              value={customerInfo.country}\r\n              onValueChange={(value) => onCustomerChange(\"country\", value)}\r\n            >\r\n              <SelectTrigger className=\"bg-gray-50 border-gray-200 text-gray-900 mt-1 sm:mt-2\">\r\n                <SelectValue />\r\n              </SelectTrigger>\r\n              <SelectContent className=\"bg-white border-gray-200\">\r\n                {COUNTRIES.map((country) => (\r\n                  <SelectItem\r\n                    key={country.code}\r\n                    value={country.code}\r\n                    className=\"text-gray-900 hover:bg-gray-100\"\r\n                  >\r\n                    {country.name}\r\n                  </SelectItem>\r\n                ))}\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n          <div>\r\n            <Label className=\"text-sm sm:text-gray-700\">State/Province *</Label>\r\n            {customerInfo.country === \"US\" ? (\r\n              <Select\r\n                value={customerInfo.state}\r\n                onValueChange={(value) => onCustomerChange(\"state\", value)}\r\n              >\r\n                <SelectTrigger className=\"bg-gray-50 border-gray-200 text-gray-900 mt-1 sm:mt-2\">\r\n                  <SelectValue />\r\n                </SelectTrigger>\r\n                <SelectContent className=\"bg-white border-gray-200 max-h-60\">\r\n                  {US_STATES.map((state) => (\r\n                    <SelectItem\r\n                      key={state}\r\n                      value={state}\r\n                      className=\"text-gray-900 hover:bg-gray-100\"\r\n                    >\r\n                      {state}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n            ) : (\r\n              <Input\r\n                value={customerInfo.state}\r\n                onChange={(e) => onCustomerChange(\"state\", e.target.value)}\r\n                placeholder=\"State/Province\"\r\n                className=\"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 mt-1 sm:mt-2\"\r\n                required\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Billing Information */}\r\n      <div className=\"backdrop-blur-xl bg-white border border-gray-200 rounded-2xl p-4 sm:p-6\">\r\n        <h3 className=\"text-lg sm:text-xl font-bold mb-4 sm:mb-6\">Billing Address</h3>\r\n\r\n        <div className=\"flex items-center gap-3 mb-4 sm:mb-6\">\r\n          <input\r\n            type=\"checkbox\"\r\n            id=\"sameAsShipping\"\r\n            checked={billingInfo.sameAsShipping}\r\n            onChange={(e) =>\r\n              onBillingChange(\"sameAsShipping\", e.target.checked)\r\n            }\r\n            className=\"w-5 h-5 rounded bg-gray-50 border-gray-200\"\r\n          />\r\n          <Label\r\n            htmlFor=\"sameAsShipping\"\r\n            className=\"text-sm sm:text-gray-700 cursor-pointer font-normal\"\r\n          >\r\n            Same as shipping address\r\n          </Label>\r\n        </div>\r\n\r\n        {!billingInfo.sameAsShipping && (\r\n          <>\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-3 sm:mb-4\">\r\n              <div>\r\n                <Label className=\"text-sm sm:text-gray-700\">First Name *</Label>\r\n                <Input\r\n                  value={billingInfo.firstName}\r\n                  onChange={(e) => onBillingChange(\"firstName\", e.target.value)}\r\n                  className=\"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 mt-1 sm:mt-2\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label className=\"text-sm sm:text-gray-700\">Last Name *</Label>\r\n                <Input\r\n                  value={billingInfo.lastName}\r\n                  onChange={(e) => onBillingChange(\"lastName\", e.target.value)}\r\n                  className=\"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 mt-1 sm:mt-2\"\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mb-3 sm:mb-4\">\r\n              <Label className=\"text-sm sm:text-gray-700\">Street Address *</Label>\r\n              <Input\r\n                value={billingInfo.street}\r\n                onChange={(e) => onBillingChange(\"street\", e.target.value)}\r\n                placeholder=\"123 Main St\"\r\n                className=\"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 mt-1 sm:mt-2\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div className=\"mb-3 sm:mb-4\">\r\n              <Label className=\"text-sm sm:text-gray-700\">\r\n                Apt, Suite, etc. (optional)\r\n              </Label>\r\n              <Input\r\n                value={billingInfo.street2}\r\n                onChange={(e) => onBillingChange(\"street2\", e.target.value)}\r\n                placeholder=\"Apt 4B\"\r\n                className=\"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 mt-1 sm:mt-2\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-3 sm:mb-4\">\r\n              <div>\r\n                <Label className=\"text-sm sm:text-gray-700\">City *</Label>\r\n                <Input\r\n                  value={billingInfo.city}\r\n                  onChange={(e) => onBillingChange(\"city\", e.target.value)}\r\n                  className=\"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 mt-1 sm:mt-2\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div>\r\n                <Label className=\"text-sm sm:text-gray-700\">Postal Code *</Label>\r\n                <Input\r\n                  value={billingInfo.postalCode}\r\n                  onChange={(e) =>\r\n                    onBillingChange(\"postalCode\", e.target.value)\r\n                  }\r\n                  className=\"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 mt-1 sm:mt-2\"\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4\">\r\n              <div>\r\n                <Label className=\"text-sm sm:text-gray-700\">Country *</Label>\r\n                <Select\r\n                  value={billingInfo.country}\r\n                  onValueChange={(value) => onBillingChange(\"country\", value)}\r\n                >\r\n                  <SelectTrigger className=\"bg-gray-50 border-gray-200 text-gray-900 mt-1 sm:mt-2\">\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent className=\"bg-white border-gray-200\">\r\n                    {COUNTRIES.map((country) => (\r\n                      <SelectItem\r\n                        key={country.code}\r\n                        value={country.code}\r\n                        className=\"text-gray-900 hover:bg-gray-100\"\r\n                      >\r\n                        {country.name}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n              <div>\r\n                <Label className=\"text-sm sm:text-gray-700\">State/Province *</Label>\r\n                {billingInfo.country === \"US\" ? (\r\n                  <Select\r\n                    value={billingInfo.state}\r\n                    onValueChange={(value) => onBillingChange(\"state\", value)}\r\n                  >\r\n                    <SelectTrigger className=\"bg-gray-50 border-gray-200 text-gray-900 mt-1 sm:mt-2\">\r\n                      <SelectValue />\r\n                    </SelectTrigger>\r\n                    <SelectContent className=\"bg-white border-gray-200 max-h-60\">\r\n                      {US_STATES.map((state) => (\r\n                        <SelectItem\r\n                          key={state}\r\n                          value={state}\r\n                          className=\"text-gray-900 hover:bg-gray-100\"\r\n                        >\r\n                          {state}\r\n                        </SelectItem>\r\n                      ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n                ) : (\r\n                  <Input\r\n                    value={billingInfo.state}\r\n                    onChange={(e) => onBillingChange(\"state\", e.target.value)}\r\n                    placeholder=\"State/Province\"\r\n                    className=\"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400 mt-1 sm:mt-2\"\r\n                    required\r\n                  />\r\n                )}\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1350, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/atrin/Desktop/PRODUCTS/cyan/prd/components/ShippingOptionsSelector.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { Truck, AlertCircle, ChevronDown } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\n\r\ninterface ShippingOption {\r\n  id: number;\r\n  name: string;\r\n  description?: string;\r\n  cost: number;\r\n  processing_time_days: number;\r\n  estimated_delivery_days_min: number;\r\n  estimated_delivery_days_max: number;\r\n  is_active: boolean;\r\n}\r\n\r\ninterface ShippingOptionsSelectorProps {\r\n  selectedOptionId: number | null;\r\n  onSelectionChange: (\r\n    optionId: number,\r\n    cost: number,\r\n    estimatedDeliveryDate: string,\r\n    shippingOptionName: string,\r\n  ) => void;\r\n}\r\n\r\nexport default function ShippingOptionsSelector({\r\n  selectedOptionId,\r\n  onSelectionChange,\r\n}: ShippingOptionsSelectorProps) {\r\n  const [shippingOptions, setShippingOptions] = useState<ShippingOption[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [expandedOptionId, setExpandedOptionId] = useState<number | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchShippingOptions = async () => {\r\n      const maxRetries = 3;\r\n      let lastError: Error | null = null;\r\n\r\n      for (let attempt = 1; attempt <= maxRetries; attempt++) {\r\n        try {\r\n          const apiUrl = `/api/shipping-options`;\r\n          console.log(\r\n            `Attempting to fetch shipping options (attempt ${attempt}/${maxRetries}) from:`,\r\n            apiUrl,\r\n          );\r\n\r\n          const controller = new AbortController();\r\n          // Increase timeout to 30 seconds for production deployments\r\n          const timeoutId = setTimeout(() => controller.abort(), 30000);\r\n\r\n          try {\r\n            console.log(\"Starting fetch request for shipping options...\");\r\n            const response = await fetch(apiUrl, {\r\n              method: \"GET\",\r\n              headers: {\r\n                \"Content-Type\": \"application/json\",\r\n              },\r\n              signal: controller.signal,\r\n            }).catch((err) => {\r\n              // Network error - provide more details\r\n              console.error(\"Network/CORS error details:\", {\r\n                message: err.message,\r\n                type: err.constructor.name,\r\n                stack: err.stack,\r\n              });\r\n              throw err;\r\n            });\r\n\r\n            clearTimeout(timeoutId);\r\n            console.log(\"Shipping options response status:\", response.status);\r\n\r\n            if (!response.ok) {\r\n              const errorData = await response.json().catch(() => ({}));\r\n              const errorMsg = errorData.error || `HTTP ${response.status}`;\r\n              throw new Error(`Failed to fetch shipping options: ${errorMsg}`);\r\n            }\r\n\r\n            const data = await response.json();\r\n            const options = data.data || [];\r\n\r\n            console.log(\r\n              \"Shipping options loaded successfully:\",\r\n              options.length,\r\n            );\r\n            setShippingOptions(options);\r\n            setError(null);\r\n            setIsLoading(false);\r\n\r\n            if (options.length > 0 && !selectedOptionId) {\r\n              const defaultOption = options[0];\r\n              const estimatedDate =\r\n                calculateEstimatedDeliveryDate(defaultOption);\r\n              onSelectionChange(\r\n                defaultOption.id,\r\n                defaultOption.cost,\r\n                estimatedDate,\r\n                defaultOption.name,\r\n              );\r\n            }\r\n\r\n            // Success - exit retry loop\r\n            return;\r\n          } catch (fetchErr) {\r\n            clearTimeout(timeoutId);\r\n            if (fetchErr instanceof Error && fetchErr.name === \"AbortError\") {\r\n              lastError = new Error(\r\n                \"Request timeout: Shipping options are taking too long to load\",\r\n              );\r\n            } else {\r\n              lastError =\r\n                fetchErr instanceof Error\r\n                  ? fetchErr\r\n                  : new Error(String(fetchErr));\r\n            }\r\n\r\n            console.warn(`Attempt ${attempt} failed:`, lastError.message);\r\n\r\n            // Wait before retrying (exponential backoff)\r\n            if (attempt < maxRetries) {\r\n              const delayMs = Math.min(1000 * Math.pow(2, attempt - 1), 5000);\r\n              console.log(`Retrying in ${delayMs}ms...`);\r\n              await new Promise((resolve) => setTimeout(resolve, delayMs));\r\n            }\r\n\r\n            throw lastError;\r\n          }\r\n        } catch (err) {\r\n          lastError = err instanceof Error ? err : new Error(String(err));\r\n\r\n          if (attempt === maxRetries) {\r\n            // Final attempt failed - show error to user\r\n            console.error(\"All fetch attempts failed:\", lastError);\r\n            const errorMsg =\r\n              lastError.message || \"Failed to load shipping options\";\r\n            console.error(\"Full error details:\", {\r\n              error: err,\r\n              message: errorMsg,\r\n              type: lastError.constructor.name,\r\n              stack: lastError.stack,\r\n            });\r\n\r\n            // Provide user-friendly error message based on error type\r\n            let displayError = errorMsg;\r\n            if (\r\n              errorMsg.includes(\"Failed to fetch\") ||\r\n              errorMsg.includes(\"NetworkError\")\r\n            ) {\r\n              displayError =\r\n                \"Network error: Unable to reach the server. Please check your connection and try again.\";\r\n            }\r\n\r\n            setError(displayError);\r\n            setIsLoading(false);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchShippingOptions();\r\n  }, []);\r\n\r\n  const calculateEstimatedDeliveryDate = (option: ShippingOption): string => {\r\n    // Use MAX delivery days for conservative estimate (worst-case scenario)\r\n    const totalDays =\r\n      option.processing_time_days + option.estimated_delivery_days_max;\r\n    const deliveryDate = new Date();\r\n    deliveryDate.setDate(deliveryDate.getDate() + totalDays);\r\n    return deliveryDate.toISOString().split(\"T\")[0];\r\n  };\r\n\r\n  const calculateDeliveryDateRange = (\r\n    option: ShippingOption,\r\n  ): { min: string; max: string } => {\r\n    const minTotalDays =\r\n      option.processing_time_days + option.estimated_delivery_days_min;\r\n    const maxTotalDays =\r\n      option.processing_time_days + option.estimated_delivery_days_max;\r\n\r\n    const minDate = new Date();\r\n    minDate.setDate(minDate.getDate() + minTotalDays);\r\n\r\n    const maxDate = new Date();\r\n    maxDate.setDate(maxDate.getDate() + maxTotalDays);\r\n\r\n    return {\r\n      min: minDate.toISOString().split(\"T\")[0],\r\n      max: maxDate.toISOString().split(\"T\")[0],\r\n    };\r\n  };\r\n\r\n  const handleSelectOption = (option: ShippingOption) => {\r\n    const estimatedDate = calculateEstimatedDeliveryDate(option);\r\n    onSelectionChange(option.id, option.cost, estimatedDate, option.name);\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"backdrop-blur-xl bg-white border border-gray-200 rounded-lg p-4\">\r\n        <h4 className=\"text-gray-900 font-bold mb-2 text-sm flex items-center gap-2\">\r\n          <Truck className=\"w-4 h-4\" />\r\n          Shipping\r\n        </h4>\r\n        <div className=\"flex items-center justify-center py-4\">\r\n          <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600\" />\r\n          <span className=\"ml-2 text-gray-600 text-xs\">Loading...</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"backdrop-blur-xl bg-white border border-gray-200 rounded-lg p-4\">\r\n        <h4 className=\"text-gray-900 font-bold mb-2 text-sm flex items-center gap-2\">\r\n          <Truck className=\"w-4 h-4\" />\r\n          Shipping\r\n        </h4>\r\n        <div className=\"flex items-start gap-2 bg-red-500/20 border border-red-500/50 rounded p-3\">\r\n          <AlertCircle className=\"w-4 h-4 text-red-400 flex-shrink-0 mt-0.5\" />\r\n          <div className=\"flex-1\">\r\n            <p className=\"text-red-400 text-xs font-medium mb-1\">{error}</p>\r\n            <p className=\"text-red-400/70 text-xs\">\r\n              Shipping costs will be calculated during checkout. You can\r\n              continue without selecting an option.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (shippingOptions.length === 0) {\r\n    return (\r\n      <div className=\"backdrop-blur-xl bg-white border border-gray-200 rounded-lg p-4\">\r\n        <h4 className=\"text-gray-900 font-bold mb-2 text-sm flex items-center gap-2\">\r\n          <Truck className=\"w-4 h-4\" />\r\n          Shipping\r\n        </h4>\r\n        <p className=\"text-gray-600 text-xs\">\r\n          No options available. Costs will be calculated at checkout.\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"backdrop-blur-xl bg-white border border-gray-200 rounded-lg p-4\">\r\n      <h4 className=\"text-gray-900 font-bold mb-2 text-sm flex items-center gap-2\">\r\n        <Truck className=\"w-4 h-4\" />\r\n        Shipping\r\n      </h4>\r\n\r\n      <div className=\"space-y-2\">\r\n        {shippingOptions.map((option) => {\r\n          const { min: minDate, max: maxDate } =\r\n            calculateDeliveryDateRange(option);\r\n\r\n          const minDateObj = new Date(minDate);\r\n          const maxDateObj = new Date(maxDate);\r\n\r\n          const formattedMinDate = minDateObj.toLocaleDateString(\"en-US\", {\r\n            month: \"short\",\r\n            day: \"numeric\",\r\n          });\r\n\r\n          const formattedMaxDate = maxDateObj.toLocaleDateString(\"en-US\", {\r\n            weekday: \"short\",\r\n            month: \"short\",\r\n            day: \"numeric\",\r\n          });\r\n\r\n          const isExpanded = expandedOptionId === option.id;\r\n          const isSelected = selectedOptionId === option.id;\r\n\r\n          return (\r\n            <div\r\n              key={option.id}\r\n              className=\"overflow-hidden rounded-lg border border-gray-200\"\r\n            >\r\n              <button\r\n                onClick={() => {\r\n                  setExpandedOptionId(isExpanded ? null : option.id);\r\n                  if (!isSelected) {\r\n                    handleSelectOption(option);\r\n                  }\r\n                }}\r\n                className={`w-full flex items-center gap-2 p-3 transition-all text-sm ${\r\n                  isSelected\r\n                    ? \"bg-blue-50 border-blue-600/50\"\r\n                    : \"bg-white/5 hover:bg-gray-50\"\r\n                }`}\r\n              >\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"shipping-option\"\r\n                  value={option.id}\r\n                  checked={isSelected}\r\n                  onChange={() => handleSelectOption(option)}\r\n                  className=\"w-4 h-4 cursor-pointer flex-shrink-0\"\r\n                />\r\n\r\n                <div className=\"flex-1 text-left min-w-0\">\r\n                  <div className=\"flex items-baseline justify-between gap-2\">\r\n                    <p className=\"text-gray-900 font-semibold truncate\">\r\n                      {option.name}\r\n                    </p>\r\n                    <span className=\"text-gray-900 font-bold flex-shrink-0 whitespace-nowrap\">\r\n                      ${option.cost.toFixed(2)}\r\n                    </span>\r\n                  </div>\r\n                  <p className=\"text-xs text-gray-600 line-clamp-1\">\r\n                    {option.processing_time_days}d +{\" \"}\r\n                    {option.estimated_delivery_days_min}-\r\n                    {option.estimated_delivery_days_max}d = {formattedMinDate}{\" \"}\r\n                    to {formattedMaxDate}\r\n                  </p>\r\n                </div>\r\n\r\n                <ChevronDown\r\n                  className={`w-4 h-4 text-gray-900/40 flex-shrink-0 transition-transform ${\r\n                    isExpanded ? \"rotate-180\" : \"\"\r\n                  }`}\r\n                />\r\n              </button>\r\n\r\n              {isExpanded && (\r\n                <div className=\"border-t border-gray-200 bg-white/5 p-3 space-y-3 text-xs text-gray-900/70\">\r\n                  <div className=\"space-y-2\">\r\n                    <h5 className=\"font-semibold text-gray-900 text-sm\">\r\n                      Timing Breakdown\r\n                    </h5>\r\n                    <div className=\"space-y-1\">\r\n                      <div className=\"flex justify-between\">\r\n                        <span>Processing</span>\r\n                        <span className=\"text-gray-900 font-medium\">\r\n                          {option.processing_time_days} day\r\n                          {option.processing_time_days !== 1 ? \"s\" : \"\"}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"flex justify-between\">\r\n                        <span>Shipping</span>\r\n                        <span className=\"text-gray-900 font-medium\">\r\n                          {option.estimated_delivery_days_min}-\r\n                          {option.estimated_delivery_days_max} days\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"border-t border-gray-200 pt-1 flex justify-between\">\r\n                        <span>Total</span>\r\n                        <span className=\"text-gray-900 font-medium\">\r\n                          {option.processing_time_days +\r\n                            option.estimated_delivery_days_min}\r\n                          -\r\n                          {option.processing_time_days +\r\n                            option.estimated_delivery_days_max}{\" \"}\r\n                          days\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"space-y-1 border-t border-gray-200 pt-2\">\r\n                    <h5 className=\"font-semibold text-gray-900 text-sm\">\r\n                      Estimated Delivery\r\n                    </h5>\r\n                    <div className=\"flex justify-between\">\r\n                      <span>Earliest</span>\r\n                      <span className=\"text-green-400 font-medium\">\r\n                        {formattedMinDate}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span>Latest</span>\r\n                      <span className=\"text-green-400 font-medium\">\r\n                        {formattedMaxDate}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {option.description && (\r\n                    <div className=\"border-t border-gray-200 pt-2\">\r\n                      <h5 className=\"font-semibold text-gray-900 text-sm mb-1\">\r\n                        Details\r\n                      </h5>\r\n                      <p className=\"text-gray-600\">{option.description}</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AAAA;;;;;AAwBe,SAAS,wBAAwB,EAC9C,gBAAgB,EAChB,iBAAiB,EACY;;IAC7B,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAmB,EAAE;IAC3E,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAgB;IAClD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAAgB;IAExE,IAAA,0KAAS;6CAAC;YACR,MAAM;0EAAuB;oBAC3B,MAAM,aAAa;oBACnB,IAAI,YAA0B;oBAE9B,IAAK,IAAI,UAAU,GAAG,WAAW,YAAY,UAAW;wBACtD,IAAI;4BACF,MAAM,SAAS,CAAC,qBAAqB,CAAC;4BACtC,QAAQ,GAAG,CACT,CAAC,8CAA8C,EAAE,QAAQ,CAAC,EAAE,WAAW,OAAO,CAAC,EAC/E;4BAGF,MAAM,aAAa,IAAI;4BACvB,4DAA4D;4BAC5D,MAAM,YAAY;oGAAW,IAAM,WAAW,KAAK;mGAAI;4BAEvD,IAAI;gCACF,QAAQ,GAAG,CAAC;gCACZ,MAAM,WAAW,MAAM,MAAM,QAAQ;oCACnC,QAAQ;oCACR,SAAS;wCACP,gBAAgB;oCAClB;oCACA,QAAQ,WAAW,MAAM;gCAC3B,GAAG,KAAK;8FAAC,CAAC;wCACR,uCAAuC;wCACvC,QAAQ,KAAK,CAAC,+BAA+B;4CAC3C,SAAS,IAAI,OAAO;4CACpB,MAAM,IAAI,WAAW,CAAC,IAAI;4CAC1B,OAAO,IAAI,KAAK;wCAClB;wCACA,MAAM;oCACR;;gCAEA,aAAa;gCACb,QAAQ,GAAG,CAAC,qCAAqC,SAAS,MAAM;gCAEhE,IAAI,CAAC,SAAS,EAAE,EAAE;oCAChB,MAAM,YAAY,MAAM,SAAS,IAAI,GAAG,KAAK;kGAAC,IAAM,CAAC,CAAC,CAAC;;oCACvD,MAAM,WAAW,UAAU,KAAK,IAAI,CAAC,KAAK,EAAE,SAAS,MAAM,EAAE;oCAC7D,MAAM,IAAI,MAAM,CAAC,kCAAkC,EAAE,UAAU;gCACjE;gCAEA,MAAM,OAAO,MAAM,SAAS,IAAI;gCAChC,MAAM,UAAU,KAAK,IAAI,IAAI,EAAE;gCAE/B,QAAQ,GAAG,CACT,yCACA,QAAQ,MAAM;gCAEhB,mBAAmB;gCACnB,SAAS;gCACT,aAAa;gCAEb,IAAI,QAAQ,MAAM,GAAG,KAAK,CAAC,kBAAkB;oCAC3C,MAAM,gBAAgB,OAAO,CAAC,EAAE;oCAChC,MAAM,gBACJ,+BAA+B;oCACjC,kBACE,cAAc,EAAE,EAChB,cAAc,IAAI,EAClB,eACA,cAAc,IAAI;gCAEtB;gCAEA,4BAA4B;gCAC5B;4BACF,EAAE,OAAO,UAAU;gCACjB,aAAa;gCACb,IAAI,oBAAoB,SAAS,SAAS,IAAI,KAAK,cAAc;oCAC/D,YAAY,IAAI,MACd;gCAEJ,OAAO;oCACL,YACE,oBAAoB,QAChB,WACA,IAAI,MAAM,OAAO;gCACzB;gCAEA,QAAQ,IAAI,CAAC,CAAC,QAAQ,EAAE,QAAQ,QAAQ,CAAC,EAAE,UAAU,OAAO;gCAE5D,6CAA6C;gCAC7C,IAAI,UAAU,YAAY;oCACxB,MAAM,UAAU,KAAK,GAAG,CAAC,OAAO,KAAK,GAAG,CAAC,GAAG,UAAU,IAAI;oCAC1D,QAAQ,GAAG,CAAC,CAAC,YAAY,EAAE,QAAQ,KAAK,CAAC;oCACzC,MAAM,IAAI;kGAAQ,CAAC,UAAY,WAAW,SAAS;;gCACrD;gCAEA,MAAM;4BACR;wBACF,EAAE,OAAO,KAAK;4BACZ,YAAY,eAAe,QAAQ,MAAM,IAAI,MAAM,OAAO;4BAE1D,IAAI,YAAY,YAAY;gCAC1B,4CAA4C;gCAC5C,QAAQ,KAAK,CAAC,8BAA8B;gCAC5C,MAAM,WACJ,UAAU,OAAO,IAAI;gCACvB,QAAQ,KAAK,CAAC,uBAAuB;oCACnC,OAAO;oCACP,SAAS;oCACT,MAAM,UAAU,WAAW,CAAC,IAAI;oCAChC,OAAO,UAAU,KAAK;gCACxB;gCAEA,0DAA0D;gCAC1D,IAAI,eAAe;gCACnB,IACE,SAAS,QAAQ,CAAC,sBAClB,SAAS,QAAQ,CAAC,iBAClB;oCACA,eACE;gCACJ;gCAEA,SAAS;gCACT,aAAa;gCACb;4BACF;wBACF;oBACF;gBACF;;YAEA;QACF;4CAAG,EAAE;IAEL,MAAM,iCAAiC,CAAC;QACtC,wEAAwE;QACxE,MAAM,YACJ,OAAO,oBAAoB,GAAG,OAAO,2BAA2B;QAClE,MAAM,eAAe,IAAI;QACzB,aAAa,OAAO,CAAC,aAAa,OAAO,KAAK;QAC9C,OAAO,aAAa,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;IACjD;IAEA,MAAM,6BAA6B,CACjC;QAEA,MAAM,eACJ,OAAO,oBAAoB,GAAG,OAAO,2BAA2B;QAClE,MAAM,eACJ,OAAO,oBAAoB,GAAG,OAAO,2BAA2B;QAElE,MAAM,UAAU,IAAI;QACpB,QAAQ,OAAO,CAAC,QAAQ,OAAO,KAAK;QAEpC,MAAM,UAAU,IAAI;QACpB,QAAQ,OAAO,CAAC,QAAQ,OAAO,KAAK;QAEpC,OAAO;YACL,KAAK,QAAQ,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;YACxC,KAAK,QAAQ,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;QAC1C;IACF;IAEA,MAAM,qBAAqB,CAAC;QAC1B,MAAM,gBAAgB,+BAA+B;QACrD,kBAAkB,OAAO,EAAE,EAAE,OAAO,IAAI,EAAE,eAAe,OAAO,IAAI;IACtE;IAEA,IAAI,WAAW;QACb,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;;sCACZ,6LAAC,gNAAK;4BAAC,WAAU;;;;;;wBAAY;;;;;;;8BAG/B,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;;;;;sCACf,6LAAC;4BAAK,WAAU;sCAA6B;;;;;;;;;;;;;;;;;;IAIrD;IAEA,IAAI,OAAO;QACT,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;;sCACZ,6LAAC,gNAAK;4BAAC,WAAU;;;;;;wBAAY;;;;;;;8BAG/B,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,sOAAW;4BAAC,WAAU;;;;;;sCACvB,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAE,WAAU;8CAAyC;;;;;;8CACtD,6LAAC;oCAAE,WAAU;8CAA0B;;;;;;;;;;;;;;;;;;;;;;;;IAQjD;IAEA,IAAI,gBAAgB,MAAM,KAAK,GAAG;QAChC,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;;sCACZ,6LAAC,gNAAK;4BAAC,WAAU;;;;;;wBAAY;;;;;;;8BAG/B,6LAAC;oBAAE,WAAU;8BAAwB;;;;;;;;;;;;IAK3C;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;;kCACZ,6LAAC,gNAAK;wBAAC,WAAU;;;;;;oBAAY;;;;;;;0BAI/B,6LAAC;gBAAI,WAAU;0BACZ,gBAAgB,GAAG,CAAC,CAAC;oBACpB,MAAM,EAAE,KAAK,OAAO,EAAE,KAAK,OAAO,EAAE,GAClC,2BAA2B;oBAE7B,MAAM,aAAa,IAAI,KAAK;oBAC5B,MAAM,aAAa,IAAI,KAAK;oBAE5B,MAAM,mBAAmB,WAAW,kBAAkB,CAAC,SAAS;wBAC9D,OAAO;wBACP,KAAK;oBACP;oBAEA,MAAM,mBAAmB,WAAW,kBAAkB,CAAC,SAAS;wBAC9D,SAAS;wBACT,OAAO;wBACP,KAAK;oBACP;oBAEA,MAAM,aAAa,qBAAqB,OAAO,EAAE;oBACjD,MAAM,aAAa,qBAAqB,OAAO,EAAE;oBAEjD,qBACE,6LAAC;wBAEC,WAAU;;0CAEV,6LAAC;gCACC,SAAS;oCACP,oBAAoB,aAAa,OAAO,OAAO,EAAE;oCACjD,IAAI,CAAC,YAAY;wCACf,mBAAmB;oCACrB;gCACF;gCACA,WAAW,CAAC,0DAA0D,EACpE,aACI,kCACA,+BACJ;;kDAEF,6LAAC;wCACC,MAAK;wCACL,MAAK;wCACL,OAAO,OAAO,EAAE;wCAChB,SAAS;wCACT,UAAU,IAAM,mBAAmB;wCACnC,WAAU;;;;;;kDAGZ,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAE,WAAU;kEACV,OAAO,IAAI;;;;;;kEAEd,6LAAC;wDAAK,WAAU;;4DAA0D;4DACtE,OAAO,IAAI,CAAC,OAAO,CAAC;;;;;;;;;;;;;0DAG1B,6LAAC;gDAAE,WAAU;;oDACV,OAAO,oBAAoB;oDAAC;oDAAI;oDAChC,OAAO,2BAA2B;oDAAC;oDACnC,OAAO,2BAA2B;oDAAC;oDAAK;oDAAkB;oDAAI;oDAC3D;;;;;;;;;;;;;kDAIR,6LAAC,sOAAW;wCACV,WAAW,CAAC,4DAA4D,EACtE,aAAa,eAAe,IAC5B;;;;;;;;;;;;4BAIL,4BACC,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAG,WAAU;0DAAsC;;;;;;0DAGpD,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;0EAAK;;;;;;0EACN,6LAAC;gEAAK,WAAU;;oEACb,OAAO,oBAAoB;oEAAC;oEAC5B,OAAO,oBAAoB,KAAK,IAAI,MAAM;;;;;;;;;;;;;kEAG/C,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;0EAAK;;;;;;0EACN,6LAAC;gEAAK,WAAU;;oEACb,OAAO,2BAA2B;oEAAC;oEACnC,OAAO,2BAA2B;oEAAC;;;;;;;;;;;;;kEAGxC,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;0EAAK;;;;;;0EACN,6LAAC;gEAAK,WAAU;;oEACb,OAAO,oBAAoB,GAC1B,OAAO,2BAA2B;oEAAC;oEAEpC,OAAO,oBAAoB,GAC1B,OAAO,2BAA2B;oEAAE;oEAAI;;;;;;;;;;;;;;;;;;;;;;;;;kDAOlD,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAG,WAAU;0DAAsC;;;;;;0DAGpD,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;kEAAK;;;;;;kEACN,6LAAC;wDAAK,WAAU;kEACb;;;;;;;;;;;;0DAGL,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;kEAAK;;;;;;kEACN,6LAAC;wDAAK,WAAU;kEACb;;;;;;;;;;;;;;;;;;oCAKN,OAAO,WAAW,kBACjB,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAG,WAAU;0DAA2C;;;;;;0DAGzD,6LAAC;gDAAE,WAAU;0DAAiB,OAAO,WAAW;;;;;;;;;;;;;;;;;;;uBA3GnD,OAAO,EAAE;;;;;gBAkHpB;;;;;;;;;;;;AAIR;GAnXwB;KAAA"}},
    {"offset": {"line": 2024, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/atrin/Desktop/PRODUCTS/cyan/prd/components/SquarePaymentForm.tsx"],"sourcesContent":["import { useEffect, useRef } from \"react\";\r\n\r\ninterface SquarePaymentFormProps {\r\n  amount: number;\r\n  orderId: number;\r\n  customerEmail: string;\r\n  customerName: string;\r\n  onPaymentSuccess: (token: string) => void;\r\n  isLoading?: boolean;\r\n  applicationId?: string;\r\n}\r\n\r\nexport default function SquarePaymentForm({\r\n  amount,\r\n  orderId,\r\n  customerEmail,\r\n  customerName,\r\n  onPaymentSuccess,\r\n  isLoading = false,\r\n  applicationId,\r\n}: SquarePaymentFormProps) {\r\n  const initializeRef = useRef(false);\r\n\r\n  useEffect(() => {\r\n    if (initializeRef.current) return;\r\n\r\n    const initializePayments = async () => {\r\n      try {\r\n        // Wait for Square SDK to be loaded\r\n        let attempts = 0;\r\n        while (!(window as any).Square && attempts < 100) {\r\n          await new Promise((resolve) => setTimeout(resolve, 100));\r\n          attempts++;\r\n        }\r\n\r\n        if (!(window as any).Square) {\r\n          console.error(\r\n            \"Square SDK not loaded after timeout - check CSP headers and network\",\r\n          );\r\n          const statusContainer = document.getElementById(\r\n            \"payment-status-container\",\r\n          );\r\n          if (statusContainer) {\r\n            statusContainer.innerHTML = `<div class=\"text-red-600\">Square SDK failed to load. Check browser console for details.</div>`;\r\n          }\r\n          return;\r\n        }\r\n\r\n        console.log(\r\n          \"Square SDK loaded successfully after\",\r\n          attempts,\r\n          \"attempts\",\r\n        );\r\n        initializeRef.current = true;\r\n\r\n        const appId = import.meta.env.VITE_SQUARE_APP_ID;\n        const locationId = import.meta.env.VITE_SQUARE_LOCATION_ID;\n\n        if (!appId || !locationId) {\n          console.error(\"Square credentials not configured\");\n          const statusContainer = document.getElementById(\n            \"payment-status-container\",\n          );\n          if (statusContainer) {\n            statusContainer.innerHTML = '<div class=\"text-red-600\">Payment system not configured. Please contact support.</div>';\n          }\n          return;\n        }\n\r\n        const payments = (window as any).Square.payments(appId, locationId);\r\n\r\n        console.log(\"Square payments object created with appId:\", appId);\r\n\r\n        const card = await payments.card();\r\n        console.log(\"Card object created\");\r\n\r\n        const cardContainer = document.getElementById(\"card-container\");\r\n        if (!cardContainer) {\r\n          throw new Error(\r\n            \"Card container element (#card-container) not found in DOM\",\r\n          );\r\n        }\r\n\r\n        await card.attach(\"#card-container\");\r\n        console.log(\"Card attached to container successfully\");\r\n\r\n        const cardButton = document.getElementById(\"card-button\");\r\n        if (cardButton) {\r\n          cardButton.addEventListener(\"click\", async () => {\r\n            const statusContainer = document.getElementById(\r\n              \"payment-status-container\",\r\n            );\r\n\r\n            try {\r\n              if (statusContainer) {\r\n                statusContainer.innerHTML =\r\n                  '<div class=\"text-gray-900\">Processing payment...</div>';\r\n              }\r\n\r\n              const result = await card.tokenize();\r\n              if (result.status === \"OK\") {\r\n                console.log(`Payment token is ${result.token}`);\r\n\r\n                if (statusContainer) {\r\n                  statusContainer.innerHTML =\r\n                    '<div class=\"text-gray-900\">Sending payment to Square...</div>';\r\n                }\r\n\r\n                // Send token to backend to create payment using Square's Payments API (POST /v2/payments)\r\n                const response = await fetch(\"/api/square/create-payment\", {\r\n                  method: \"POST\",\r\n                  headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                  },\r\n                  body: JSON.stringify({\r\n                    sourceId: result.token,\r\n                    amount: amount,\r\n                    currency: \"USD\",\r\n                    orderId: orderId,\r\n                    customerEmail: customerEmail,\r\n                    customerId: customerName,\r\n                  }),\r\n                });\r\n\r\n                console.log(\"Payment response status:\", response.status);\r\n\r\n                let paymentResult;\r\n                try {\r\n                  paymentResult = await response.json();\r\n                } catch (parseError) {\r\n                  console.error(\"Error parsing payment response:\", parseError);\r\n                  throw new Error(\r\n                    \"Failed to parse payment response from server\",\r\n                  );\r\n                }\r\n\r\n                console.log(\"Payment response data:\", paymentResult);\r\n\r\n                if (response.ok && paymentResult.success) {\r\n                  console.log(\r\n                    \"Payment created successfully:\",\r\n                    paymentResult.payment,\r\n                  );\r\n\r\n                  if (statusContainer) {\r\n                    statusContainer.innerHTML = `\r\n                      <div class=\"bg-green-50 border border-green-200 rounded-lg p-3 space-y-2\">\r\n                        <div class=\"text-green-700 font-bold\"> Payment completed successfully!</div>\r\n                        <div class=\"text-sm text-green-600\">Payment ID: ${paymentResult.payment.id}</div>\r\n                        <div class=\"text-sm text-green-600\">Amount: $${paymentResult.payment.amount.toFixed(2)}</div>\r\n                      </div>\r\n                    `;\r\n                  }\r\n\r\n                  // Redirect after a brief delay\r\n                  setTimeout(() => {\r\n                    onPaymentSuccess(result.token);\r\n                  }, 2000);\r\n                } else {\r\n                  let errorMessage = `Payment creation failed: ${paymentResult.error || \"Unknown error\"}`;\r\n                  if (paymentResult.details) {\r\n                    errorMessage += ` - ${paymentResult.details}`;\r\n                  }\r\n                  throw new Error(errorMessage);\r\n                }\r\n              } else {\r\n                let errorMessage = `Tokenization failed with status: ${result.status}`;\r\n                if (result.errors) {\r\n                  errorMessage += ` - ${JSON.stringify(result.errors)}`;\r\n                }\r\n                throw new Error(errorMessage);\r\n              }\r\n            } catch (e) {\r\n              console.error(\"Payment error:\", e);\r\n              if (statusContainer) {\r\n                const errorMsg =\r\n                  e instanceof Error ? e.message : \"Payment failed\";\r\n                statusContainer.innerHTML = `\r\n                  <div class=\"bg-red-50 border border-red-200 rounded-lg p-3\">\r\n                    <div class=\"text-red-700 font-bold\"> Payment Failed</div>\r\n                    <div class=\"text-sm text-red-600 mt-1\">${errorMsg}</div>\r\n                  </div>\r\n                `;\r\n              }\r\n            }\r\n          });\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Failed to initialize Square payments:\", error);\r\n      }\r\n    };\r\n\r\n    initializePayments();\r\n  }, [amount, orderId, customerEmail, customerName, onPaymentSuccess]);\r\n\r\n  return (\r\n    <div id=\"payment-form\" className=\"space-y-4\">\r\n      <div className=\"bg-white border border-gray-200 rounded-lg p-6\">\r\n        <div className=\"mb-6\">\r\n          <h3 className=\"text-lg font-bold text-gray-900 mb-2\">Payment Details</h3>\r\n          <p className=\"text-gray-600 text-sm\">Amount: ${amount.toFixed(2)}</p>\r\n        </div>\r\n\r\n        <div\r\n          id=\"payment-status-container\"\r\n          className=\"mb-4 text-sm font-medium text-gray-900\"\r\n        />\r\n\r\n        <div\r\n          id=\"card-container\"\r\n          className=\"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200 min-h-14\"\r\n        />\r\n\r\n        <button\r\n          id=\"card-button\"\r\n          type=\"button\"\r\n          disabled={isLoading}\r\n          className=\"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-all disabled:opacity-50\"\r\n        >\r\n          Pay ${amount.toFixed(2)}\r\n        </button>\r\n\r\n        <p className=\"text-xs text-gray-500 text-center mt-4\">\r\n          Secure payment powered by Square\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2279, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/atrin/Desktop/PRODUCTS/cyan/prd/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\r\n        outline:\r\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-4 py-2\",\r\n        sm: \"h-9 rounded-md px-3\",\r\n        lg: \"h-11 rounded-md px-8\",\r\n        icon: \"h-10 w-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  },\r\n);\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean;\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\";\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    );\r\n  },\r\n);\r\nButton.displayName = \"Button\";\r\n\r\nexport { Button, buttonVariants };\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,2KAAgB,MAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAC9B,qBACE,6LAAC;QACC,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 2346, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/atrin/Desktop/PRODUCTS/cyan/prd/lib/orderFormatting.ts"],"sourcesContent":["/**\r\n * Order formatting utilities for consistent order number formatting across the app\r\n * Must match server-side formatting in server/utils/order.ts\r\n */\r\n\r\n/**\r\n * Format an order ID to the display format: SY-5XXXXX\r\n * Formula: SY-5 + (4001 + orderId)\r\n * Example: orderId 10  SY-54011\r\n */\r\nexport function formatOrderNumber(orderId: number | string): string {\r\n  const id = typeof orderId === \"string\" ? parseInt(orderId, 10) : orderId;\r\n  if (isNaN(id) || id <= 0) {\r\n    throw new Error(\"Invalid order ID\");\r\n  }\r\n  const displayNumber = 4001 + id;\r\n  return `SY-5${displayNumber}`;\r\n}\r\n\r\n/**\r\n * Parse a formatted order number (SY-XXXXX) back to the numeric ID\r\n * Handles both SY-XXXXX format and plain numeric format for backward compatibility\r\n * Example: \"SY-54011\"  10 or \"10\"  10\r\n */\r\nexport function parseOrderNumber(orderNumber: string): number {\r\n  const trimmed = orderNumber.trim();\r\n\r\n  if (trimmed.toUpperCase().startsWith(\"SY-5\")) {\r\n    // Format: SY-54011 where 54011 = 4001 + id, so id = 54011 - 54001\r\n    // Extract everything after \"SY-\" (position 3 onwards)\r\n    const displayNumber = parseInt(trimmed.substring(3), 10);\r\n    if (isNaN(displayNumber)) {\r\n      throw new Error(\"Invalid order number format\");\r\n    }\r\n    const id = displayNumber - 54001;\r\n    if (id <= 0) {\r\n      throw new Error(\"Invalid order number format\");\r\n    }\r\n    return id;\r\n  } else {\r\n    // Plain numeric format\r\n    const id = parseInt(trimmed, 10);\r\n    if (isNaN(id)) {\r\n      throw new Error(\"Invalid order number format\");\r\n    }\r\n    return id;\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA;;;CAGC,GAED;;;;CAIC;;;;;;AACM,SAAS,kBAAkB,OAAwB;IACxD,MAAM,KAAK,OAAO,YAAY,WAAW,SAAS,SAAS,MAAM;IACjE,IAAI,MAAM,OAAO,MAAM,GAAG;QACxB,MAAM,IAAI,MAAM;IAClB;IACA,MAAM,gBAAgB,OAAO;IAC7B,OAAO,CAAC,IAAI,EAAE,eAAe;AAC/B;AAOO,SAAS,iBAAiB,WAAmB;IAClD,MAAM,UAAU,YAAY,IAAI;IAEhC,IAAI,QAAQ,WAAW,GAAG,UAAU,CAAC,SAAS;QAC5C,kEAAkE;QAClE,sDAAsD;QACtD,MAAM,gBAAgB,SAAS,QAAQ,SAAS,CAAC,IAAI;QACrD,IAAI,MAAM,gBAAgB;YACxB,MAAM,IAAI,MAAM;QAClB;QACA,MAAM,KAAK,gBAAgB;QAC3B,IAAI,MAAM,GAAG;YACX,MAAM,IAAI,MAAM;QAClB;QACA,OAAO;IACT,OAAO;QACL,uBAAuB;QACvB,MAAM,KAAK,SAAS,SAAS;QAC7B,IAAI,MAAM,KAAK;YACb,MAAM,IAAI,MAAM;QAClB;QACA,OAAO;IACT;AACF"}},
    {"offset": {"line": 2397, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/atrin/Desktop/PRODUCTS/cyan/prd/client/pages/CheckoutNew.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\nimport CheckoutForm from \"@/components/CheckoutForm\";\nimport ShippingOptionsSelector from \"@/components/ShippingOptionsSelector\";\r\nimport SquarePaymentForm from \"@/components/SquarePaymentForm\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n  Loader2,\r\n  Trash2,\r\n  Share2,\r\n  ChevronDown,\r\n  AlertCircle,\r\n} from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { useStoreCredit } from \"@/hooks/useStoreCredit\";\r\nimport { formatOrderNumber } from \"@/lib/orderFormatting\";\r\n\r\ninterface CartItem {\r\n  product_id: number;\r\n  product_name?: string;\r\n  quantity: number;\r\n  price?: number;\r\n  image?: string;\r\n  basePrice?: number;\r\n  savePercentage?: number;\r\n  design_file_url?: string;\r\n  selectedOptions?: Record<string, string>;\r\n  options?: Array<{\r\n    id: string;\r\n    name: string;\r\n    values: Array<{ id: string; name: string }>;\r\n  }>;\r\n  product_options?: Array<\r\n    { option_id?: number; option_value?: string } | string\r\n  >;\r\n}\r\n\r\ninterface OrderData {\r\n  subtotal: number;\r\n  tax: number;\r\n  shipping: number;\r\n  discount: number;\r\n  blindShipmentFee: number;\r\n  additionalPayment: number;\r\n  total: number;\r\n  storeCredit: number;\r\n  appliedStoreCredit: number;\r\n}\r\n\r\nexport default function CheckoutNew() {\r\n  const navigate = useNavigate();\r\n  const [searchParams] = useSearchParams();\r\n  const cartId = searchParams.get(\"cartId\");\r\n\r\n  const [cartItems, setCartItems] = useState<CartItem[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [expandedOptions, setExpandedOptions] = useState(false);\r\n  const [blindShipmentEnabled, setBlindShipmentEnabled] = useState(false);\r\n  const [additionalPaymentPercent, setAdditionalPaymentPercent] = useState(0);\r\n  const [discountCode, setDiscountCode] = useState(\"\");\r\n  const [appliedDiscount, setAppliedDiscount] = useState(0);\r\n  const [appliedStoreCredit, setAppliedStoreCredit] = useState(0);\r\n  const { storeCredit: availableStoreCredit, fetchStoreCredit } =\r\n    useStoreCredit();\r\n\r\n  const [selectedShippingOptionId, setSelectedShippingOptionId] = useState<\r\n    number | null\r\n  >(null);\r\n  const [shippingCost, setShippingCost] = useState(0);\r\n  const [estimatedDeliveryDate, setEstimatedDeliveryDate] = useState<\r\n    string | null\r\n  >(null);\r\n  const [shippingOptionName, setShippingOptionName] = useState<string>(\"\");\r\n\r\n  const [orderData, setOrderData] = useState<OrderData>({\r\n    subtotal: 0,\r\n    tax: 0,\r\n    shipping: 0,\r\n    discount: 0,\r\n    blindShipmentFee: 0,\r\n    additionalPayment: 0,\r\n    total: 0,\r\n    storeCredit: 0,\r\n    appliedStoreCredit: 0,\r\n  });\r\n\r\n  const [customerInfo, setCustomerInfo] = useState({\r\n    email: \"\",\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    phone: \"\",\r\n    street: \"\",\r\n    street2: \"\",\r\n    city: \"\",\r\n    state: \"CA\",\r\n    postalCode: \"\",\r\n    country: \"US\",\r\n  });\r\n\r\n  const [billingInfo, setBillingInfo] = useState({\r\n    sameAsShipping: true,\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    street: \"\",\r\n    street2: \"\",\r\n    city: \"\",\r\n    state: \"CA\",\r\n    postalCode: \"\",\r\n    country: \"US\",\r\n  });\r\n\r\n  const [showPaymentForm, setShowPaymentForm] = useState(false);\r\n  const [createdOrderId, setCreatedOrderId] = useState<number | null>(null);\r\n  const [agreedToPolicy, setAgreedToPolicy] = useState(false);\r\n  const [showPolicyDropdown, setShowPolicyDropdown] = useState(false);\r\n  const [policy, setPolicy] = useState<any>(null);\r\n  const [agreedToPrivacy, setAgreedToPrivacy] = useState(false);\r\n  const [agreedToGDPR, setAgreedToGDPR] = useState(true); // Handled on separate legal page\r\n  const [agreedToCCPA, setAgreedToCCPA] = useState(true); // Handled on separate legal page\r\n  const [agreedToTerms, setAgreedToTerms] = useState(false);\r\n  const [agreedToShippingPolicy, setAgreedToShippingPolicy] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const loadCustomerInfo = async () => {\r\n      try {\r\n        const token = localStorage.getItem(\"authToken\");\r\n        if (!token) {\r\n          return;\r\n        }\r\n\r\n        const response = await fetch(\"/api/customers/me\", {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          if (data.customer) {\r\n            const customer = data.customer;\r\n            const primaryAddress = customer.addresses?.[0];\r\n\r\n            console.log(\"Loaded customer info:\", {\r\n              email: customer.email,\r\n              firstName: customer.firstName,\r\n              lastName: customer.lastName,\r\n              phone: customer.phone,\r\n              addresses: customer.addresses?.length || 0,\r\n            });\r\n\r\n            // Validate country code against allowed values\r\n            const validCountries = [\"US\", \"CA\", \"GB\", \"AU\"];\r\n            const countryCode = primaryAddress?.country_code || \"US\";\r\n            const validCountryCode = validCountries.includes(countryCode)\r\n              ? countryCode\r\n              : \"US\";\r\n\r\n            setCustomerInfo({\r\n              email: customer.email || \"\",\r\n              firstName: customer.firstName || \"\",\r\n              lastName: customer.lastName || \"\",\r\n              phone: customer.phone || \"\",\r\n              street: primaryAddress?.street_1 || \"\",\r\n              street2: primaryAddress?.street_2 || \"\",\r\n              city: primaryAddress?.city || \"\",\r\n              state: primaryAddress?.state_or_province || \"CA\",\r\n              postalCode: primaryAddress?.postal_code || \"\",\r\n              country: validCountryCode,\r\n            });\r\n          }\r\n        } else {\r\n          console.warn(\r\n            \"Failed to load customer info, status:\",\r\n            response.status,\r\n          );\r\n        }\r\n      } catch (err) {\r\n        console.warn(\"Failed to load customer info:\", err);\r\n      }\r\n    };\r\n\r\n    const loadCart = async () => {\r\n      try {\r\n        const id = cartId || localStorage.getItem(\"cart_id\");\r\n        const localStorageCart = localStorage.getItem(\"cart\");\r\n\r\n        if (localStorageCart) {\r\n          const customItems = JSON.parse(localStorageCart);\r\n          const items = [];\r\n          for (const item of customItems) {\r\n            try {\r\n              // Construct the correct API endpoint based on productId format\r\n              let productUrl = `/api/public/products/${item.productId}`;\r\n              if (item.productId.startsWith(\"admin_\")) {\r\n                const adminId = item.productId.split(\"_\")[1];\r\n                productUrl = `/api/public/products/admin/${adminId}`;\r\n              } else if (item.productId.startsWith(\"imported_\")) {\r\n                const importedId = item.productId.split(\"_\")[1];\r\n                productUrl = `/api/public/products/imported/${importedId}`;\r\n              }\r\n\r\n              const response = await fetch(productUrl);\r\n              if (!response.ok) {\r\n                console.warn(\r\n                  `Failed to fetch product ${item.productId}: HTTP ${response.status}`,\r\n                );\r\n                continue;\r\n              }\r\n              const productData = await response.json();\r\n              // API returns product data directly for admin/imported products\r\n              const product = productData.product || productData;\r\n\r\n              items.push({\r\n                product_id: item.productId,\r\n                product_name: product.name,\r\n                quantity: item.quantity,\r\n                price: item.pricePerUnit || product.base_price || 0,\r\n                image: product.images?.[0]?.url,\r\n                basePrice: item.basePrice,\r\n                savePercentage: item.savePercentage,\r\n                design_file_url: item.design_file_url,\r\n                selectedOptions: item.selectedOptions,\r\n                options: product.options,\r\n              });\r\n            } catch (err) {\r\n              console.warn(\r\n                `Failed to load product ${item.productId}:`,\r\n                err instanceof Error ? err.message : err,\r\n              );\r\n            }\r\n          }\r\n          setCartItems(items);\r\n          const subtotal = items.reduce(\r\n            (sum: number, item: any) => sum + (item.price || 0) * item.quantity,\r\n            0,\r\n          );\r\n          calculateOrderData(subtotal, 0);\r\n          setIsLoading(false);\r\n          return;\r\n        }\r\n\r\n        if (!id) {\r\n          console.log(\"No cart ID found, skipping cart load\");\r\n          setIsLoading(false);\r\n          return;\r\n        }\r\n\r\n        console.log(\"Loading cart with ID:\", id);\r\n\r\n        let response;\r\n        try {\r\n          response = await fetch(`/api/cart/${id}`);\r\n        } catch (fetchError) {\r\n          console.warn(\"Network error loading cart:\", fetchError);\r\n          setIsLoading(false);\r\n          return;\r\n        }\r\n\r\n        if (!response.ok) {\r\n          console.error(\"Failed to load cart - HTTP error:\", {\r\n            status: response.status,\r\n            statusText: response.statusText,\r\n          });\r\n\r\n          try {\r\n            const errorData = await response.json();\r\n            console.error(\"Error response data:\", errorData);\r\n          } catch (e) {\r\n            console.error(\"Could not parse error response\");\r\n          }\r\n\r\n          if (response.status === 404) {\r\n            console.warn(\"Cart not found, continuing with empty cart\");\r\n            setIsLoading(false);\r\n            return;\r\n          }\r\n\r\n          throw new Error(\r\n            `Failed to load cart: ${response.status} ${response.statusText}`,\r\n          );\r\n        }\r\n\r\n        try {\r\n          const data = await response.json();\r\n          let items = data.data?.line_items || [];\r\n          console.log(\"Cart loaded successfully:\", {\r\n            itemCount: items.length,\r\n            subtotal: data.data?.subtotal,\r\n          });\r\n\r\n          // Enrich cart items with product options for proper display\r\n          const enrichedItems = [];\r\n          for (const item of items) {\r\n            try {\r\n              const response = await fetch(\r\n                `/api/public/products/${item.product_id}`,\r\n              );\r\n              if (response.ok) {\r\n                const productData = await response.json();\r\n                const product = productData.product;\r\n                enrichedItems.push({\r\n                  ...item,\r\n                  options: product.options,\r\n                });\r\n              } else {\r\n                // If product fetch fails, just use the item as-is\r\n                enrichedItems.push(item);\r\n              }\r\n            } catch (err) {\r\n              console.warn(\r\n                `Failed to fetch product ${item.product_id}:`,\r\n                err instanceof Error ? err.message : err,\r\n              );\r\n              // Use item without enriched options\r\n              enrichedItems.push(item);\r\n            }\r\n          }\r\n\r\n          setCartItems(enrichedItems);\r\n\r\n          const subtotal = enrichedItems.reduce(\r\n            (sum: number, item: CartItem) => {\r\n              return sum + (item.price || 0.25) * item.quantity;\r\n            },\r\n            0,\r\n          );\r\n\r\n          calculateOrderData(subtotal, 0);\r\n        } catch (parseError) {\r\n          console.error(\"Error parsing cart response:\", parseError);\r\n          throw new Error(\"Failed to parse cart response\");\r\n        }\r\n      } catch (err) {\r\n        const errorMsg = err instanceof Error ? err.message : String(err);\r\n        console.error(\"Failed to load cart:\", {\r\n          message: errorMsg,\r\n          error: err,\r\n        });\r\n        toast.error(`Cart loading error: ${errorMsg}`);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    loadCustomerInfo();\r\n    loadCart();\r\n    fetchStoreCredit();\r\n\r\n    const handleVisibilityChange = () => {\r\n      if (!document.hidden) {\r\n        fetchStoreCredit();\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"visibilitychange\", handleVisibilityChange);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\r\n    };\r\n  }, [cartId, fetchStoreCredit]);\r\n\r\n  useEffect(() => {\r\n    const fetchPolicy = async () => {\r\n      try {\r\n        const response = await fetch(\"/api/return-refund-policy\");\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setPolicy(data.policy);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch policy:\", err);\r\n      }\r\n    };\r\n\r\n    fetchPolicy();\r\n  }, []);\r\n\r\n  const calculateOrderData = (\r\n    subtotal: number,\r\n    discount: number,\r\n    creditAmount: number = appliedStoreCredit,\r\n    shipping: number = shippingCost,\r\n  ) => {\r\n    const tax = 0; // Tax disabled\r\n    const blindShipmentFee = blindShipmentEnabled ? 5 : 0;\r\n    const additionalPayment =\r\n      (subtotal + tax + shipping + blindShipmentFee - discount) *\r\n      (additionalPaymentPercent / 100);\r\n    const subtotalBeforeCredit =\r\n      subtotal +\r\n      tax +\r\n      shipping +\r\n      blindShipmentFee +\r\n      additionalPayment -\r\n      discount;\r\n    const total = Math.max(0, subtotalBeforeCredit - creditAmount);\r\n    const storeCredit = total * 0.05;\r\n\r\n    setOrderData({\r\n      subtotal,\r\n      tax,\r\n      shipping,\r\n      discount,\r\n      blindShipmentFee,\r\n      additionalPayment,\r\n      total,\r\n      storeCredit,\r\n      appliedStoreCredit: creditAmount,\r\n    });\r\n  };\r\n\r\n  const handleRemoveItem = (index: number) => {\r\n    const updatedItems = cartItems.filter((_, i) => i !== index);\r\n    setCartItems(updatedItems);\r\n\r\n    // Update localStorage\r\n    const localStorageCart = localStorage.getItem(\"cart\");\r\n    if (localStorageCart) {\r\n      const customItems = JSON.parse(localStorageCart);\r\n      const updatedCart = customItems.filter(\r\n        (_: any, i: number) => i !== index,\r\n      );\r\n      localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\r\n\r\n      // Calculate total remaining items\r\n      const totalItems = updatedCart.reduce(\r\n        (sum: number, item: any) => sum + item.quantity,\r\n        0,\r\n      );\r\n\r\n      // Dispatch storage event to update header cart badge\r\n      window.dispatchEvent(\r\n        new StorageEvent(\"storage\", {\r\n          key: \"cart\",\r\n          newValue: JSON.stringify(updatedCart),\r\n          oldValue: JSON.stringify(customItems),\r\n          storageArea: localStorage,\r\n        }),\r\n      );\r\n\r\n      // Show toast with updated count\r\n      toast.success(\r\n        totalItems === 0\r\n          ? \"Item removed from cart\"\r\n          : totalItems === 1\r\n            ? \"1 item removed - 1 item remaining\"\r\n            : `Item removed - ${totalItems} items remaining in cart`,\r\n      );\r\n    } else {\r\n      toast.success(\"Item removed from cart\");\r\n    }\r\n\r\n    const newSubtotal = updatedItems.reduce((sum, item) => {\r\n      return sum + (item.price || 0.25) * item.quantity;\r\n    }, 0);\r\n\r\n    calculateOrderData(newSubtotal, appliedDiscount, appliedStoreCredit);\r\n  };\r\n\r\n  const handleApplyStoreCredit = (amount: number) => {\r\n    const validAmount = Math.max(0, Math.min(amount, availableStoreCredit));\r\n    setAppliedStoreCredit(validAmount);\r\n    calculateOrderData(orderData.subtotal, appliedDiscount, validAmount);\r\n    fetchStoreCredit();\r\n  };\r\n\r\n  const handleApplyDiscount = async () => {\r\n    if (!discountCode) {\r\n      toast.error(\"Please enter a discount code\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(\"/api/discounts/validate\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          code: discountCode,\r\n          orderTotal: orderData.subtotal,\r\n        }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        toast.error(data.error || \"Invalid discount code\");\r\n        return;\r\n      }\r\n\r\n      if (data.success && data.discount) {\r\n        const discountAmount = data.discount.amount;\r\n        setAppliedDiscount(discountAmount);\r\n        calculateOrderData(\r\n          orderData.subtotal,\r\n          discountAmount,\r\n          appliedStoreCredit,\r\n        );\r\n        toast.success(\r\n          `Discount applied! You save $${discountAmount.toFixed(2)}`,\r\n        );\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error applying discount code:\", error);\r\n      toast.error(\"Failed to apply discount code\");\r\n    }\r\n  };\r\n\r\n  const handleAdditionalPayment = (percent: number) => {\r\n    setAdditionalPaymentPercent(percent);\r\n    calculateOrderData(orderData.subtotal, appliedDiscount, appliedStoreCredit);\r\n  };\r\n\r\n  const handleRemoveStoreCredit = () => {\r\n    setAppliedStoreCredit(0);\r\n    calculateOrderData(orderData.subtotal, appliedDiscount, 0);\r\n  };\r\n\r\n  const validateForm = (): boolean => {\r\n    if (\r\n      !customerInfo.firstName ||\r\n      !customerInfo.lastName ||\r\n      !customerInfo.email ||\r\n      !customerInfo.phone ||\r\n      !customerInfo.street ||\r\n      !customerInfo.city ||\r\n      !customerInfo.state ||\r\n      !customerInfo.postalCode ||\r\n      !customerInfo.country\r\n    ) {\r\n      toast.error(\"Please fill in all required shipping fields\");\r\n      return false;\r\n    }\r\n\r\n    if (!billingInfo.sameAsShipping) {\r\n      if (\r\n        !billingInfo.firstName ||\r\n        !billingInfo.lastName ||\r\n        !billingInfo.street ||\r\n        !billingInfo.city ||\r\n        !billingInfo.state ||\r\n        !billingInfo.postalCode ||\r\n        !billingInfo.country\r\n      ) {\r\n        toast.error(\"Please fill in all required billing fields\");\r\n        return false;\r\n      }\r\n    }\r\n\r\n    if (cartItems.length === 0) {\r\n      toast.error(\"Your cart is empty\");\r\n      return false;\r\n    }\r\n\r\n    if (!agreedToPolicy) {\r\n      toast.error(\"Please agree to the Return & Refund Policy to proceed\");\r\n      return false;\r\n    }\r\n\r\n    if (!agreedToPrivacy) {\r\n      toast.error(\"Please agree to the Privacy Policy to proceed\");\r\n      return false;\r\n    }\r\n\r\n    if (!agreedToTerms) {\r\n      toast.error(\"Please agree to the Terms of Service to proceed\");\r\n      return false;\r\n    }\r\n\r\n    if (!agreedToShippingPolicy) {\r\n      toast.error(\"Please agree to the Shipping Policy to proceed\");\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  // Helper function to get option display values for an item\r\n  const getOptionsForPayload = (item: CartItem) => {\r\n    // Handle both selectedOptions (from localStorage) and product_options (from API)\r\n    if (item.selectedOptions && Object.keys(item.selectedOptions).length > 0) {\r\n      return Object.entries(item.selectedOptions).map(([optionId, valueId]) => {\r\n        // Look up the human-readable value name and price modifier\r\n        const option = item.options?.find((opt: any) => opt.id === optionId);\r\n        const optionValue = option?.values?.find(\r\n          (val: any) => val.id === valueId,\r\n        );\r\n        const displayValue = optionValue?.name || valueId;\r\n        const priceModifier = optionValue?.priceModifier || 0;\r\n\r\n        return {\r\n          option_id: optionId,\r\n          option_name: option?.name,\r\n          option_value: displayValue,\r\n          modifier_price: priceModifier,\r\n        };\r\n      });\r\n    }\r\n\r\n    // Handle product_options from API carts\r\n    if (item.product_options && item.product_options.length > 0) {\r\n      return item.product_options.map(\r\n        (\r\n          opt:\r\n            | {\r\n              option_id?: number;\r\n              option_value?: string;\r\n              modifier_price?: number;\r\n            }\r\n            | string,\r\n        ) => {\r\n          if (typeof opt === \"string\") {\r\n            return {\r\n              option_id: \"custom\",\r\n              option_value: opt,\r\n              modifier_price: 0,\r\n            };\r\n          }\r\n\r\n          // Look up the modifier_price from the product options definition\r\n          let modifierPrice = (opt as any).modifier_price || 0;\r\n          if (!modifierPrice && item.options && opt.option_id) {\r\n            const optionDef = item.options.find(\r\n              (o: any) => o.id === opt.option_id,\r\n            );\r\n            if (optionDef && optionDef.values) {\r\n              const valueDef = optionDef.values.find(\r\n                (v: any) =>\r\n                  v.id === opt.option_value || v.name === opt.option_value,\r\n              );\r\n              modifierPrice = valueDef?.priceModifier || 0;\r\n            }\r\n          }\r\n\r\n          return {\r\n            option_id: opt.option_id || \"custom\",\r\n            option_name: (() => {\r\n              const optDef = item.options?.find(\r\n                (o: any) => o.id === opt.option_id,\r\n              );\r\n              return optDef?.name || undefined;\r\n            })(),\r\n            option_value: opt.option_value || \"\",\r\n            modifier_price: modifierPrice,\r\n          };\r\n        },\r\n      );\r\n    }\r\n\r\n    return [];\r\n  };\r\n\r\n  const handleCheckout = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      const customerId = localStorage.getItem(\"customerId\");\r\n\r\n      const checkoutPayload = {\r\n        amount: orderData.total,\r\n        currency: \"USD\",\r\n        items: cartItems.map((item) => ({\r\n          product_id: item.product_id,\r\n          product_name: item.product_name,\r\n          quantity: item.quantity,\r\n          price: item.price,\r\n          design_file_url: item.design_file_url,\r\n          options: getOptionsForPayload(item),\r\n        })),\r\n        phone: customerInfo.phone,\r\n        shippingAddress: {\r\n          firstName: customerInfo.firstName,\r\n          lastName: customerInfo.lastName,\r\n          street: customerInfo.street,\r\n          street2: customerInfo.street2,\r\n          city: customerInfo.city,\r\n          state: customerInfo.state,\r\n          postalCode: customerInfo.postalCode,\r\n          country: customerInfo.country,\r\n        },\r\n        billingAddress: billingInfo.sameAsShipping\r\n          ? {\r\n            firstName: customerInfo.firstName,\r\n            lastName: customerInfo.lastName,\r\n            street: customerInfo.street,\r\n            street2: customerInfo.street2,\r\n            city: customerInfo.city,\r\n            state: customerInfo.state,\r\n            postalCode: customerInfo.postalCode,\r\n            country: customerInfo.country,\r\n          }\r\n          : {\r\n            firstName: billingInfo.firstName,\r\n            lastName: billingInfo.lastName,\r\n            street: billingInfo.street,\r\n            street2: billingInfo.street2,\r\n            city: billingInfo.city,\r\n            state: billingInfo.state,\r\n            postalCode: billingInfo.postalCode,\r\n            country: billingInfo.country,\r\n          },\r\n        subtotal: orderData.subtotal,\r\n        tax: orderData.tax,\r\n        shipping: orderData.shipping,\r\n        discount: appliedDiscount,\r\n        discountCode: discountCode || undefined,\r\n        total: orderData.total,\r\n        appliedStoreCredit: appliedStoreCredit,\r\n        customerId: customerId ? parseInt(customerId) : undefined,\r\n        customerEmail: customerInfo.email,\r\n        customerName: `${customerInfo.firstName} ${customerInfo.lastName}`,\r\n        ...(selectedShippingOptionId && {\r\n          shipping_option_id: selectedShippingOptionId,\r\n        }),\r\n        shipping_option_name: shippingOptionName,\r\n        estimated_delivery_date: estimatedDeliveryDate,\r\n        policies: {\r\n          returnAndRefund: agreedToPolicy,\r\n          privacy: agreedToPrivacy,\r\n          gdpr: agreedToGDPR,\r\n          ccpa: agreedToCCPA,\r\n          terms: agreedToTerms,\r\n          shipping: agreedToShippingPolicy,\r\n        },\r\n      };\r\n\r\n      console.log(\"Checkout payload being sent:\", {\r\n        amount: checkoutPayload.amount,\r\n        items: checkoutPayload.items?.length,\r\n        customerEmail: checkoutPayload.customerEmail,\r\n        total: checkoutPayload.total,\r\n        payloadSize: JSON.stringify(checkoutPayload).length,\r\n      });\r\n\r\n      // Create abort controller for timeout\r\n      const controller = new AbortController();\r\n      const timeoutId = setTimeout(() => controller.abort(), 30000); // 30 second timeout\r\n\r\n      let response;\r\n      let result;\r\n\r\n      try {\r\n        response = await fetch(\"/api/square/checkout\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify(checkoutPayload),\r\n          signal: controller.signal,\r\n        });\r\n\r\n        clearTimeout(timeoutId);\r\n        console.log(\"Checkout response status:\", response.status);\r\n\r\n        // Try to parse response\r\n        try {\r\n          result = await response.json();\r\n        } catch (parseError) {\r\n          console.error(\"Failed to parse checkout response:\", parseError);\r\n          throw new Error(\r\n            `Server error (${response.status}): Could not parse response`,\r\n          );\r\n        }\r\n\r\n        console.log(\"Checkout response data:\", result);\r\n\r\n        if (!response.ok) {\r\n          const errorMsg =\r\n            result?.error ||\r\n            result?.message ||\r\n            `HTTP ${response.status}: Checkout failed`;\r\n          throw new Error(errorMsg);\r\n        }\r\n      } catch (fetchErr) {\r\n        clearTimeout(timeoutId);\r\n        if (fetchErr instanceof Error && fetchErr.name === \"AbortError\") {\r\n          throw new Error(\r\n            \"Request timeout: Checkout is taking too long. Please try again.\",\r\n          );\r\n        }\r\n        // Network errors\r\n        if (fetchErr instanceof TypeError) {\r\n          console.error(\"Network error details:\", {\r\n            message: fetchErr.message,\r\n            stack: fetchErr.stack,\r\n          });\r\n          throw new Error(\r\n            `Network error: ${fetchErr.message}. Please check your connection and try again.`,\r\n          );\r\n        }\r\n        throw fetchErr;\r\n      }\r\n\r\n      // Store the order ID\r\n      if (result.order?.id) {\r\n        setCreatedOrderId(result.order.id);\r\n\r\n        // If there's a checkout URL (Square Payment Link), redirect to it\r\n        if (result.checkoutUrl) {\r\n          toast.success(\"Order created! Redirecting to payment...\");\r\n          setTimeout(() => {\r\n            window.location.href = result.checkoutUrl;\r\n          }, 1000);\r\n        } else {\r\n          // Otherwise show the payment form\r\n          setShowPaymentForm(true);\r\n          toast.success(\"Order created! Please complete payment below.\");\r\n        }\r\n      } else {\r\n        throw new Error(\"No order ID returned from checkout\");\r\n      }\r\n    } catch (err) {\r\n      const errorMessage =\r\n        err instanceof Error ? err.message : \"Checkout failed\";\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handlePaymentSuccess = (token: string) => {\r\n    // Store credit fetch disabled temporarily\r\n    // fetchStoreCredit();\r\n\r\n    // Clear cart before redirecting\r\n    localStorage.removeItem(\"cart\");\r\n    localStorage.removeItem(\"cart_id\");\r\n\r\n    // Redirect to order confirmation page with formatted order number\r\n    if (createdOrderId) {\r\n      setTimeout(() => {\r\n        const formattedOrderId = formatOrderNumber(createdOrderId);\r\n        navigate(`/order-confirmation/${formattedOrderId}`);\r\n      }, 1000);\r\n    }\r\n  };\r\n\r\n  const handleCustomerInfoChange = (field: string, value: string) => {\r\n    setCustomerInfo((prev) => ({\r\n      ...prev,\r\n      [field]: value,\r\n    }));\r\n  };\r\n\r\n  const handleBillingInfoChange = (field: string, value: string | boolean) => {\r\n    if (field === \"sameAsShipping\") {\r\n      setBillingInfo((prev) => ({\r\n        ...prev,\r\n        sameAsShipping: value as boolean,\r\n      }));\r\n      if (value) {\r\n        setBillingInfo((prev) => ({\r\n          ...prev,\r\n          firstName: customerInfo.firstName,\r\n          lastName: customerInfo.lastName,\r\n          street: customerInfo.street,\r\n          street2: customerInfo.street2,\r\n          city: customerInfo.city,\r\n          state: customerInfo.state,\r\n          postalCode: customerInfo.postalCode,\r\n          country: customerInfo.country,\r\n        }));\r\n      }\r\n    } else {\r\n      setBillingInfo((prev) => ({\r\n        ...prev,\r\n        [field]: value,\r\n      }));\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <>\n        <main className=\"pt-20 min-h-screen bg-[#fafafa] flex items-center justify-center\">\n          <Loader2 className=\"w-8 h-8 animate-spin text-blue-600\" />\n        </main>\n      </>\n    );\n  }\n\n  return (\n    <>\n      {/* Skip to Main Content Link - Accessibility */}\n      <a\n        href=\"#checkout-form\"\n        className=\"sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 focus:z-50 bg-blue-600 text-white px-4 py-2\"\n      >\n        Skip to checkout form\n      </a>\r\n\r\n      <main\r\n        className=\"pt-20 min-h-screen bg-[#fafafa] text-gray-900 px-4 sm:px-6 md:px-10 py-6 sm:py-8 md:py-12\"\r\n        id=\"checkout-main\"\r\n        role=\"main\"\r\n        aria-label=\"Checkout page\"\r\n      >\r\n        <div className=\"max-w-7xl mx-auto pt-[15px]\">\r\n          <h1 className=\"text-2xl sm:text-3xl md:text-4xl font-bold mb-4 sm:mb-6 md:mb-8\">\r\n            Your Cart\r\n          </h1>\r\n\r\n          <form onSubmit={handleCheckout}>\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n              {/* Cart Items & Form */}\r\n              <div className=\"lg:col-span-2 space-y-6\">\r\n                {cartItems.map((item, index) => (\r\n                  <div\r\n                    key={index}\r\n                    className=\"backdrop-blur-xl bg-white border border-gray-200 rounded-2xl p-4 sm:p-6\"\r\n                  >\r\n                    <div className=\"flex gap-3 sm:gap-6 flex-col sm:flex-row\">\r\n                      <div className=\"flex flex-col gap-3 sm:gap-4 flex-shrink-0\">\r\n                        <div className=\"w-24 h-24 sm:w-40 md:w-48 sm:h-40 md:h-48 bg-gradient-to-br from-gray-100 to-gray-200 rounded-xl flex items-center justify-center\">\r\n                          {item.image ? (\r\n                            <img\r\n                              src={item.image}\r\n                              alt={item.product_name}\r\n                              className=\"w-full h-full object-cover rounded-xl\"\r\n                            />\r\n                          ) : (\r\n                            <div className=\"text-gray-500 text-center\">\r\n                              <p className=\"text-sm\">No image</p>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                        {item.design_file_url && (\r\n                          <div className=\"w-24 sm:w-40 md:w-48 bg-white border border-gray-200 rounded-xl flex items-center justify-center p-2\">\r\n                            {item.design_file_url.match(\r\n                              /\\.(jpg|jpeg|png|gif|webp)$/i,\r\n                            ) ||\r\n                              item.design_file_url.startsWith(\"data:image\") ? (\r\n                              <img\r\n                                src={item.design_file_url}\r\n                                alt=\"Design thumbnail\"\r\n                                className=\"w-full h-auto object-contain rounded-lg\"\r\n                              />\r\n                            ) : (\r\n                              <div className=\"p-4 text-center\">\r\n                                <p className=\"text-xs text-gray-600\">\r\n                                  Design file uploaded\r\n                                </p>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex justify-between items-start mb-3 sm:mb-4 gap-3\">\r\n                          <div>\r\n                            <h3 className=\"text-lg sm:text-xl font-bold\">\r\n                              {item.product_name ||\r\n                                `Product #${item.product_id}`}\r\n                            </h3>\r\n                            <div className=\"text-sm space-y-1\">\r\n                              {item.savePercentage &&\r\n                                item.savePercentage > 0 ? (\r\n                                <>\r\n                                  {(() => {\r\n                                    const basePrice =\r\n                                      item.basePrice ||\r\n                                      item.price /\r\n                                      (1 - item.savePercentage / 100);\r\n                                    const regularTotal =\r\n                                      basePrice * item.quantity;\r\n                                    const amountSaved =\r\n                                      ((basePrice * item.savePercentage) /\r\n                                        100) *\r\n                                      item.quantity;\r\n                                    const total =\r\n                                      (item.price || 0.25) * item.quantity;\r\n                                    return (\r\n                                      <>\r\n                                        {basePrice > 0 && (\r\n                                          <p className=\"text-gray-600\">\r\n                                            Regular: ${regularTotal.toFixed(2)}\r\n                                          </p>\r\n                                        )}\r\n                                        <p className=\"text-gray-600\">\r\n                                          Quantity: {item.quantity}\r\n                                        </p>\r\n                                        <p className=\"text-green-600 font-semibold\">\r\n                                          Save {item.savePercentage}%\r\n                                        </p>\r\n                                        <p className=\"text-green-600\">\r\n                                          Amount Saved: $\r\n                                          {amountSaved.toFixed(2)}\r\n                                        </p>\r\n                                        <p className=\"text-gray-900 font-bold border-t border-gray-200 pt-1\">\r\n                                          Total: ${total.toFixed(2)}\r\n                                        </p>\r\n                                      </>\r\n                                    );\r\n                                  })()}\r\n                                </>\r\n                              ) : (\r\n                                <p className=\"text-gray-600\">\r\n                                  $\r\n                                  {(\r\n                                    (item.price || 0.25) * item.quantity\r\n                                  ).toFixed(2)}\r\n                                </p>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => handleRemoveItem(index)}\r\n                            className=\"text-red-500 hover:text-red-400 transition\"\r\n                          >\r\n                            <Trash2 className=\"w-5 h-5\" />\r\n                          </button>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-3 bg-gray-50 rounded-lg p-4 mb-4\">\r\n                          <h4 className=\"text-blue-600 text-sm font-bold uppercase tracking-wider\">\r\n                            Product Specifications\r\n                          </h4>\r\n                          <div className=\"space-y-2 text-sm\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                              <span className=\"text-gray-600\">\r\n                                Price per sticker\r\n                              </span>\r\n                              <span className=\"font-medium\">\r\n                                ${(item.price || 0.25).toFixed(2)}\r\n                              </span>\r\n                            </div>\r\n                            <div className=\"flex items-center justify-between\">\r\n                              <span className=\"text-gray-600\">Quantity</span>\r\n                              <span className=\"font-medium\">\r\n                                {item.quantity}\r\n                              </span>\r\n                            </div>\r\n                            {/* Handle both selectedOptions (from localStorage) and product_options (from API) */}\r\n                            {item.selectedOptions &&\r\n                              Object.keys(item.selectedOptions).length > 0 && (\r\n                                <>\r\n                                  {Object.entries(item.selectedOptions).map(\r\n                                    ([optionId, valueId]) => {\r\n                                      // Find the option and its value name\r\n                                      const option = item.options?.find(\r\n                                        (opt: any) => opt.id === optionId,\r\n                                      );\r\n                                      const optionValue = option?.values?.find(\r\n                                        (val: any) => val.id === valueId,\r\n                                      );\r\n                                      const displayValue =\r\n                                        optionValue?.name || valueId;\r\n\r\n                                      return (\r\n                                        <div\r\n                                          key={optionId}\r\n                                          className=\"flex items-center justify-between\"\r\n                                        >\r\n                                          <span className=\"text-gray-600\">\r\n                                            {option?.name || \"Option\"}\r\n                                          </span>\r\n                                          <span className=\"font-medium\">\r\n                                            {displayValue}\r\n                                          </span>\r\n                                        </div>\r\n                                      );\r\n                                    },\r\n                                  )}\r\n                                </>\r\n                              )}\r\n                            {/* Handle product_options from API carts */}\r\n                            {!item.selectedOptions &&\r\n                              item.product_options &&\r\n                              item.product_options.length > 0 && (\r\n                                <>\r\n                                  {item.product_options.map(\r\n                                    (\r\n                                      opt:\r\n                                        | {\r\n                                          option_id?: number;\r\n                                          option_value?: string;\r\n                                        }\r\n                                        | string,\r\n                                      idx: number,\r\n                                    ) => {\r\n                                      // Handle both simple string options and structured options\r\n                                      const optionValue =\r\n                                        typeof opt === \"string\"\r\n                                          ? opt\r\n                                          : opt.option_value || \"\";\r\n\r\n                                      // Try to find the option name from the options array\r\n                                      const optionName =\r\n                                        typeof opt !== \"string\" &&\r\n                                          opt.option_id &&\r\n                                          item.options\r\n                                          ? item.options.find(\r\n                                            (o: any) =>\r\n                                              o.id === opt.option_id,\r\n                                          )?.name\r\n                                          : null;\r\n\r\n                                      return (\r\n                                        <div\r\n                                          key={idx}\r\n                                          className=\"flex items-center justify-between\"\r\n                                        >\r\n                                          <span className=\"text-gray-600\">\r\n                                            {optionName || \"Option\"}\r\n                                          </span>\r\n                                          <span className=\"font-medium\">\r\n                                            {optionValue}\r\n                                          </span>\r\n                                        </div>\r\n                                      );\r\n                                    },\r\n                                  )}\r\n                                </>\r\n                              )}\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                          <label className=\"text-blue-600 text-sm font-bold uppercase tracking-wider\">\r\n                            Additional Notes\r\n                          </label>\r\n                          <textarea\r\n                            placeholder=\"Any special instructions or requests...\"\r\n                            rows={3}\r\n                            className=\"w-full bg-white border border-gray-200 rounded-lg px-4 py-2 text-gray-900 placeholder-gray-400 text-sm\"\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n\r\n                <div className=\"backdrop-blur-xl bg-white border border-gray-200 rounded-2xl p-6\">\r\n                  <fieldset>\r\n                    <legend className=\"sr-only\">Discount Code Section</legend>\r\n                    {appliedDiscount > 0 ? (\r\n                      <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\r\n                        <div className=\"flex justify-between items-center mb-3\">\r\n                          <div>\r\n                            <p className=\"text-sm text-gray-600\">\r\n                              Discount Applied\r\n                            </p>\r\n                            <p className=\"text-xl font-bold text-green-600\">\r\n                              -${appliedDiscount.toFixed(2)}\r\n                            </p>\r\n                            <p className=\"text-xs text-gray-500 mt-1\">\r\n                              Code:{\" \"}\r\n                              <code className=\"font-mono\">{discountCode}</code>\r\n                            </p>\r\n                          </div>\r\n                          <Button\r\n                            type=\"button\"\r\n                            onClick={() => {\r\n                              setDiscountCode(\"\");\r\n                              setAppliedDiscount(0);\r\n                              calculateOrderData(\r\n                                orderData.subtotal,\r\n                                0,\r\n                                appliedStoreCredit,\r\n                              );\r\n                              toast.info(\"Discount code removed\");\r\n                            }}\r\n                            variant=\"outline\"\r\n                            className=\"text-red-600 hover:text-red-700 hover:bg-red-50\"\r\n                          >\r\n                            Remove\r\n                          </Button>\r\n                        </div>\r\n                      </div>\r\n                    ) : (\r\n                      <div className=\"flex gap-2\">\r\n                        <div className=\"flex-1 relative\">\r\n                          <label htmlFor=\"discount-code\" className=\"sr-only\">\r\n                            Discount code\r\n                          </label>\r\n                          <Input\r\n                            id=\"discount-code\"\r\n                            placeholder=\"Discount code\"\r\n                            value={discountCode}\r\n                            onChange={(e) => setDiscountCode(e.target.value)}\r\n                            onKeyDown={(e) => {\r\n                              if (e.key === \"Enter\") {\r\n                                handleApplyDiscount();\r\n                              }\r\n                            }}\r\n                            className=\"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400\"\r\n                            aria-label=\"Discount code\"\r\n                            aria-describedby=\"discount-help\"\r\n                          />\r\n                          <span id=\"discount-help\" className=\"sr-only\">\r\n                            Enter your discount code to apply savings to your\r\n                            order\r\n                          </span>\r\n                        </div>\r\n                        <Button\r\n                          type=\"button\"\r\n                          onClick={handleApplyDiscount}\r\n                          disabled={!discountCode}\r\n                          className=\"bg-green-500 hover:bg-green-600 text-white px-6\"\r\n                          aria-label=\"Apply discount code\"\r\n                        >\r\n                          Apply\r\n                        </Button>\r\n                      </div>\r\n                    )}\r\n                  </fieldset>\r\n                </div>\r\n\r\n                <CheckoutForm\r\n                  customerInfo={customerInfo}\r\n                  billingInfo={billingInfo}\r\n                  onCustomerChange={handleCustomerInfoChange}\r\n                  onBillingChange={handleBillingInfoChange}\r\n                />\r\n\r\n                {/* Return & Refund Policy Agreement */}\r\n                <div className=\"backdrop-blur-xl bg-white border border-gray-200 rounded-2xl p-6\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setShowPolicyDropdown(!showPolicyDropdown)}\r\n                    className=\"w-full flex items-center justify-between mb-4 hover:opacity-80 transition\"\r\n                  >\r\n                    <h4 className=\"text-gray-900 font-bold text-lg\">\r\n                      Return & Refund Policy\r\n                    </h4>\r\n                    <ChevronDown\r\n                      className={`w-5 h-5 text-gray-600 transition-transform ${showPolicyDropdown ? \"rotate-180\" : \"\"\r\n                        }`}\r\n                    />\r\n                  </button>\r\n\r\n                  {showPolicyDropdown && (\r\n                    <div className=\"mb-4 pb-4 border-b border-gray-200\">\r\n                      <div className=\"bg-gray-50 rounded-lg p-4 mb-4 max-h-80 overflow-y-auto text-sm space-y-3\">\r\n                        {policy ? (\r\n                          <>\r\n                            <div>\r\n                              <p className=\"font-semibold text-gray-900 mb-2\">\r\n                                {policy.guarantee_days}-Day Money-Back Guarantee\r\n                              </p>\r\n                              <p className=\"text-gray-600\">\r\n                                We offer a {policy.guarantee_days}-day\r\n                                money-back guarantee on all orders. If you're\r\n                                not satisfied with your custom stickers for any\r\n                                reason, you can request a full refund within{\" \"}\r\n                                {policy.guarantee_days} days of your purchase.\r\n                              </p>\r\n                            </div>\r\n\r\n                            {policy.return_conditions &&\r\n                              policy.return_conditions.length > 0 && (\r\n                                <div>\r\n                                  <p className=\"font-semibold text-gray-900 mb-2\">\r\n                                    Return Conditions\r\n                                  </p>\r\n                                  <ul className=\"text-gray-600 space-y-1\">\r\n                                    {policy.return_conditions.map(\r\n                                      (condition: string, index: number) => (\r\n                                        <li key={index}> {condition}</li>\r\n                                      ),\r\n                                    )}\r\n                                  </ul>\r\n                                </div>\r\n                              )}\r\n\r\n                            {policy.how_to_return &&\r\n                              policy.how_to_return.length > 0 && (\r\n                                <div>\r\n                                  <p className=\"font-semibold text-gray-900 mb-2\">\r\n                                    How to Return\r\n                                  </p>\r\n                                  <ol className=\"text-gray-600 space-y-1\">\r\n                                    {policy.how_to_return.map(\r\n                                      (step: string, index: number) => (\r\n                                        <li key={index}>\r\n                                          {index + 1}. {step}\r\n                                        </li>\r\n                                      ),\r\n                                    )}\r\n                                  </ol>\r\n                                </div>\r\n                              )}\r\n\r\n                            <div>\r\n                              <p className=\"font-semibold text-gray-900 mb-2\">\r\n                                Defective or Damaged Items\r\n                              </p>\r\n                              <p className=\"text-gray-600\">\r\n                                If your stickers arrive damaged or defective,\r\n                                we'll replace them at no cost to you within{\" \"}\r\n                                {policy.defective_items_days} days of delivery.\r\n                              </p>\r\n                            </div>\r\n\r\n                            {policy.non_returnable_items &&\r\n                              policy.non_returnable_items.length > 0 && (\r\n                                <div>\r\n                                  <p className=\"font-semibold text-gray-900 mb-2\">\r\n                                    Non-Returnable Items\r\n                                  </p>\r\n                                  <ul className=\"text-gray-600 space-y-1\">\r\n                                    {policy.non_returnable_items.map(\r\n                                      (item: string, index: number) => (\r\n                                        <li key={index}> {item}</li>\r\n                                      ),\r\n                                    )}\r\n                                  </ul>\r\n                                </div>\r\n                              )}\r\n\r\n                            <div>\r\n                              <p className=\"font-semibold text-gray-900 mb-2\">\r\n                                Refund Timeline\r\n                              </p>\r\n                              <p className=\"text-gray-600\">\r\n                                {policy.refund_timeline}\r\n                              </p>\r\n                            </div>\r\n\r\n                            <div className=\"flex items-center gap-2 pt-2 border-t border-gray-200\">\r\n                              <a\r\n                                href=\"/return-refund-policy\"\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                                className=\"text-blue-600 hover:text-blue-700 font-medium text-sm\"\r\n                              >\r\n                                Read Full Policy \r\n                              </a>\r\n                            </div>\r\n                          </>\r\n                        ) : (\r\n                          <p className=\"text-gray-500 text-sm\">\r\n                            Loading policy...\r\n                          </p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      id=\"agreeToPolicy\"\r\n                      checked={agreedToPolicy}\r\n                      onChange={(e) => setAgreedToPolicy(e.target.checked)}\r\n                      className=\"w-5 h-5 rounded border-gray-300 text-green-600 focus:ring-2 focus:ring-green-500 mt-1 flex-shrink-0 cursor-pointer\"\r\n                    />\r\n                    <label\r\n                      htmlFor=\"agreeToPolicy\"\r\n                      className=\"text-gray-600 text-sm flex-1 cursor-pointer\"\r\n                    >\r\n                      I have read and agree to the{\" \"}\r\n                      <a\r\n                        href=\"/return-refund-policy\"\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"text-blue-600 hover:text-blue-700 font-medium\"\r\n                      >\r\n                        Return & Refund Policy\r\n                      </a>\r\n                    </label>\r\n                  </div>\r\n\r\n                  {!agreedToPolicy && (\r\n                    <div\r\n                      className=\"mt-3 p-3 bg-amber-50 border border-amber-200 rounded-lg flex gap-2\"\r\n                      role=\"alert\"\r\n                    >\r\n                      <AlertCircle\r\n                        className=\"w-4 h-4 text-amber-600 flex-shrink-0 mt-0.5\"\r\n                        aria-hidden=\"true\"\r\n                      />\r\n                      <p className=\"text-xs text-amber-800\">\r\n                        You must agree to the Return & Refund Policy to complete\r\n                        your purchase.\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Privacy Policy & Data Handling */}\r\n                  <div className=\"border-t border-gray-200 pt-6 mt-6\">\r\n                    <h4 className=\"text-gray-900 font-bold text-lg mb-4\">\r\n                      Privacy & Data Protection\r\n                    </h4>\r\n\r\n                    {/* Privacy Policy Agreement */}\r\n                    <div className=\"flex items-start gap-3 mb-4\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        id=\"agreeToPrivacy\"\r\n                        checked={agreedToPrivacy}\r\n                        onChange={(e) => setAgreedToPrivacy(e.target.checked)}\r\n                        className=\"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500 mt-1 flex-shrink-0 cursor-pointer\"\r\n                      />\r\n                      <label\r\n                        htmlFor=\"agreeToPrivacy\"\r\n                        className=\"text-gray-600 text-sm flex-1 cursor-pointer\"\r\n                      >\r\n                        I have read and agree to the{\" \"}\r\n                        <a\r\n                          href=\"/privacy\"\r\n                          target=\"_blank\"\r\n                          rel=\"noopener noreferrer\"\r\n                          className=\"text-blue-600 hover:text-blue-700 font-medium\"\r\n                        >\r\n                          Privacy Policy\r\n                        </a>\r\n                      </label>\r\n                    </div>\r\n\r\n                    {/* Terms of Service */}\r\n                    <div className=\"flex items-start gap-3 mb-4\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        id=\"agreeToTerms\"\r\n                        checked={agreedToTerms}\r\n                        onChange={(e) => setAgreedToTerms(e.target.checked)}\r\n                        className=\"w-5 h-5 rounded border-gray-300 text-red-600 focus:ring-2 focus:ring-red-500 mt-1 flex-shrink-0 cursor-pointer\"\r\n                      />\r\n                      <label\r\n                        htmlFor=\"agreeToTerms\"\r\n                        className=\"text-gray-600 text-sm flex-1 cursor-pointer\"\r\n                      >\r\n                        I have read and agree to the{\" \"}\r\n                        <a\r\n                          href=\"/terms\"\r\n                          target=\"_blank\"\r\n                          rel=\"noopener noreferrer\"\r\n                          className=\"text-blue-600 hover:text-blue-700 font-medium\"\r\n                        >\r\n                          Terms of Service\r\n                        </a>\r\n                      </label>\r\n                    </div>\r\n\r\n                    {/* Shipping Policy */}\r\n                    <div className=\"flex items-start gap-3 mb-4\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        id=\"agreeToShippingPolicy\"\r\n                        checked={agreedToShippingPolicy}\r\n                        onChange={(e) =>\r\n                          setAgreedToShippingPolicy(e.target.checked)\r\n                        }\r\n                        className=\"w-5 h-5 rounded border-gray-300 text-green-600 focus:ring-2 focus:ring-green-500 mt-1 flex-shrink-0 cursor-pointer\"\r\n                      />\r\n                      <label\r\n                        htmlFor=\"agreeToShippingPolicy\"\r\n                        className=\"text-gray-600 text-sm flex-1 cursor-pointer\"\r\n                      >\r\n                        I have read and agree to the{\" \"}\r\n                        <a\r\n                          href=\"/shipping\"\r\n                          target=\"_blank\"\r\n                          rel=\"noopener noreferrer\"\r\n                          className=\"text-blue-600 hover:text-blue-700 font-medium\"\r\n                        >\r\n                          Shipping Policy\r\n                        </a>\r\n                      </label>\r\n                    </div>\r\n\r\n                    {/* Data Handling Transparency */}\r\n                    <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-gray-700\">\r\n                      <p className=\"font-semibold text-gray-900 mb-2\">\r\n                        How We Handle Your Data\r\n                      </p>\r\n                      <ul className=\"space-y-2 text-xs\">\r\n                        <li>\r\n                           Your personal information is encrypted and\r\n                          transmitted securely using SSL/TLS\r\n                        </li>\r\n                        <li>\r\n                           Payment information is processed by Square and never\r\n                          stored on our servers\r\n                        </li>\r\n                        <li>\r\n                           We do not sell or share your personal data with\r\n                          third parties for marketing\r\n                        </li>\r\n                        <li>\r\n                           You can request access, correction, or deletion of\r\n                          your data at any time\r\n                        </li>\r\n                        <li>\r\n                           We retain your data only as long as necessary for\r\n                          order fulfillment and legal compliance\r\n                        </li>\r\n                      </ul>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {(!agreedToPrivacy ||\r\n                    !agreedToTerms ||\r\n                    !agreedToShippingPolicy) && (\r\n                      <div className=\"mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg flex gap-2\">\r\n                        <AlertCircle className=\"w-4 h-4 text-amber-600 flex-shrink-0 mt-0.5\" />\r\n                        <p className=\"text-xs text-amber-800\">\r\n                          You must agree to all policies and terms to complete\r\n                          your purchase.\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n\r\n                  {/* Support Contact Info */}\r\n                  <div className=\"backdrop-blur-xl bg-white border border-gray-200 rounded-2xl p-6 mt-6\">\r\n                    <h4 className=\"text-gray-900 font-bold mb-4 flex items-center gap-2\">\r\n                       Need Help?\r\n                    </h4>\r\n                    <div className=\"space-y-3\">\r\n                      <div>\r\n                        <p className=\"text-xs text-gray-600 mb-1\">\r\n                          Email Support\r\n                        </p>\r\n                        <a\r\n                          href=\"mailto:sticky@stickerland.com\"\r\n                          className=\"text-blue-600 hover:text-blue-700 font-medium text-sm break-all\"\r\n                        >\r\n                          sticky@stickerland.com\r\n                        </a>\r\n                      </div>\r\n                      <div>\r\n                        <p className=\"text-xs text-gray-600 mb-1\">\r\n                          Create a Support Ticket\r\n                        </p>\r\n                        <a\r\n                          href=\"/support\"\r\n                          className=\"text-blue-600 hover:text-blue-700 font-medium text-sm\"\r\n                        >\r\n                          Contact Support \r\n                        </a>\r\n                      </div>\r\n                      <div className=\"pt-2 border-t border-gray-200\">\r\n                        <p className=\"text-xs text-gray-500\">\r\n                          We typically respond within 24 hours\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Order Summary Sidebar */}\r\n              <div className=\"lg:col-span-1\">\r\n                <div className=\"sticky top-32 space-y-6\">\r\n                  <div className=\"backdrop-blur-xl bg-white border border-gray-200 rounded-2xl p-6\">\r\n                    <div className=\"flex justify-between items-center mb-6\">\r\n                      <h3 className=\"text-xl font-bold\">Order Summary</h3>\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"text-gray-600 hover:text-gray-900 transition\"\r\n                      >\r\n                        <Share2 className=\"w-5 h-5\" />\r\n                      </button>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-3 text-sm mb-6 pb-6 border-b border-gray-200\">\r\n                      <div className=\"flex justify-between text-gray-600\">\r\n                        <span>Subtotal ({cartItems.length} items)</span>\r\n                        <span>${orderData.subtotal.toFixed(2)}</span>\r\n                      </div>\r\n                      <div className=\"flex justify-between text-gray-600\">\r\n                        <span>You're paying</span>\r\n                        <span>\r\n                          $\r\n                          {(\r\n                            orderData.subtotal /\r\n                            (cartItems.reduce(\r\n                              (sum, i) => sum + i.quantity,\r\n                              0,\r\n                            ) || 1)\r\n                          ).toFixed(2)}{\" \"}\r\n                          per sticker\r\n                        </span>\r\n                      </div>\r\n                      {shippingCost > 0 && (\r\n                        <div className=\"flex justify-between text-blue-600\">\r\n                          <span>Shipping</span>\r\n                          <span className=\"font-bold\">\r\n                            ${shippingCost.toFixed(2)}\r\n                          </span>\r\n                        </div>\r\n                      )}\r\n                      {shippingCost === 0 && (\r\n                        <div className=\"flex justify-between text-green-600\">\r\n                          <span>Shipping</span>\r\n                          <span className=\"font-bold\">FREE</span>\r\n                        </div>\r\n                      )}\r\n                      {appliedDiscount > 0 && (\r\n                        <div className=\"flex justify-between text-green-600\">\r\n                          <span>Deal Savings</span>\r\n                          <span className=\"font-bold\">\r\n                            -${appliedDiscount.toFixed(2)}\r\n                          </span>\r\n                        </div>\r\n                      )}\r\n                      {blindShipmentEnabled && (\r\n                        <div className=\"flex justify-between text-orange-600\">\r\n                          <span>Blind Shipment Fee</span>\r\n                          <span>+${orderData.blindShipmentFee.toFixed(2)}</span>\r\n                        </div>\r\n                      )}\r\n                      {orderData.additionalPayment > 0 && (\r\n                        <div className=\"flex justify-between text-orange-600\">\r\n                          <span>Additional Payment</span>\r\n                          <span>\r\n                            +${orderData.additionalPayment.toFixed(2)}\r\n                          </span>\r\n                        </div>\r\n                      )}\r\n                      {/* Store Credit Applied display disabled temporarily */}\r\n                    </div>\r\n\r\n                    <div className=\"flex justify-between items-center mb-6 text-xl font-bold\">\r\n                      <span>Total</span>\r\n                      <span>${orderData.total.toFixed(2)}</span>\r\n                    </div>\r\n\r\n                    {/* Store credit earned display disabled temporarily */}\r\n                  </div>\r\n\r\n                  {/* Store credit section disabled temporarily */}\r\n\r\n                  <ShippingOptionsSelector\r\n                    selectedOptionId={selectedShippingOptionId}\r\n                    onSelectionChange={(\r\n                      optionId,\r\n                      cost,\r\n                      deliveryDate,\r\n                      optionName,\r\n                    ) => {\r\n                      setSelectedShippingOptionId(optionId);\r\n                      setShippingCost(cost);\r\n                      setEstimatedDeliveryDate(deliveryDate);\r\n                      setShippingOptionName(optionName);\r\n                      calculateOrderData(\r\n                        orderData.subtotal,\r\n                        appliedDiscount,\r\n                        appliedStoreCredit,\r\n                        cost,\r\n                      );\r\n                    }}\r\n                  />\r\n\r\n                  {estimatedDeliveryDate && (\r\n                    <div className=\"backdrop-blur-xl bg-white border border-gray-200 rounded-2xl p-6\">\r\n                      <h4 className=\"text-gray-900 font-bold mb-4 flex items-center gap-2\">\r\n                         Estimated Delivery\r\n                      </h4>\r\n                      <div className=\"border-t border-gray-200 pt-3 flex justify-between font-bold text-lg\">\r\n                        <span>Delivery by</span>\r\n                        <span className=\"text-green-600\">\r\n                          {new Date(estimatedDeliveryDate).toLocaleDateString(\r\n                            \"en-US\",\r\n                            {\r\n                              weekday: \"short\",\r\n                              month: \"short\",\r\n                              day: \"numeric\",\r\n                            },\r\n                          )}\r\n                        </span>\r\n                      </div>\r\n                      <p className=\"text-xs text-gray-500 mt-3\">\r\n                        * Delivery may not occur on weekends. Dates are\r\n                        automatically moved to the next business day.\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n\r\n                  {showPaymentForm && createdOrderId ? (\r\n                    <div className=\"mb-3\">\r\n                      <SquarePaymentForm\r\n                        amount={orderData.total}\r\n                        orderId={createdOrderId}\r\n                        customerEmail={customerInfo.email}\r\n                        customerName={`${customerInfo.firstName} ${customerInfo.lastName}`}\r\n                        onPaymentSuccess={handlePaymentSuccess}\r\n                        isLoading={isSubmitting}\r\n                      />\r\n\r\n                      {/* PCI DSS Compliance Badge */}\r\n                      <div className=\"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center gap-3\">\r\n                        <div className=\"flex-shrink-0\">\r\n                          <svg\r\n                            className=\"w-5 h-5 text-green-600\"\r\n                            fill=\"currentColor\"\r\n                            viewBox=\"0 0 20 20\"\r\n                          >\r\n                            <path\r\n                              fillRule=\"evenodd\"\r\n                              d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\r\n                              clipRule=\"evenodd\"\r\n                            />\r\n                          </svg>\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"text-sm font-semibold text-green-900\">\r\n                            PCI DSS Level 1 Compliant\r\n                          </p>\r\n                          <p className=\"text-xs text-green-700\">\r\n                            Your payment information is processed securely by\r\n                            Square Payment Systems, certified to PCI DSS Level 1\r\n                            standards.\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <>\r\n                      <Button\r\n                        type=\"submit\"\r\n                        disabled={\r\n                          isSubmitting ||\r\n                          !agreedToPolicy ||\r\n                          !agreedToPrivacy ||\r\n                          !agreedToTerms ||\r\n                          !agreedToShippingPolicy\r\n                        }\r\n                        className=\"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white py-6 text-lg font-bold rounded-lg mb-3 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                      >\r\n                        {isSubmitting ? (\r\n                          <>\r\n                            <Loader2 className=\"w-5 h-5 mr-2 animate-spin\" />\r\n                            Processing...\r\n                          </>\r\n                        ) : (\r\n                          <> Go to Checkout</>\r\n                        )}\r\n                      </Button>\r\n\r\n                      {/* PCI DSS Compliance Notice */}\r\n                      <div className=\"p-3 bg-blue-50 border border-blue-200 rounded-lg\">\r\n                        <p className=\"text-xs text-blue-800\">\r\n                          {\" \"}\r\n                          <span className=\"font-semibold\">\r\n                            Payment Security:\r\n                          </span>{\" \"}\r\n                          Your payment information will be processed securely by\r\n                          Square Payment Systems, which is PCI DSS Level 1\r\n                          certified. We never store your credit card information\r\n                          on our servers.\r\n                        </p>\r\n                      </div>\r\n                    </>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </main>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}