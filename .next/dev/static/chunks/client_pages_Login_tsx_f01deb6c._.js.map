{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/atrin/Desktop/PRODUCTS/cyan/prd/client/pages/Login.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { Mail, Lock, AlertCircle, Eye, EyeOff } from \"lucide-react\";\r\n\r\nexport default function Login() {\r\n  const navigate = useNavigate();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const handleLogin = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const response = await fetch(\"/api/auth/login\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ email, password }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\r\n          data.error || \"Login failed. Please check your credentials.\",\r\n        );\r\n      }\r\n\r\n      // Store auth token, customer ID, and admin status\n      localStorage.setItem(\"authToken\", data.token);\n      localStorage.setItem(\"customerId\", data.customer.id.toString());\n      localStorage.setItem(\"isAdmin\", String(data.customer.isAdmin || false));\n      \n      // Dispatch auth change event to update Header navigation\n      window.dispatchEvent(new Event(\"auth-change\"));\n      \n      // Redirect to home\n      navigate(\"/\");\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : \"Login failed\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\n      <main className=\"pt-20 min-h-screen bg-gradient-to-br from-gray-50 to-gray-100\">\n        <div className=\"max-w-md mx-auto px-4 py-12 sm:py-20\">\r\n          <div className=\"bg-[#fafafa] rounded-2xl shadow-xl p-8 sm:p-10\">\r\n            <div className=\"text-center mb-8\">\r\n              <h1 className=\"text-3xl font-bold text-[#030140] mb-2\">\r\n                Welcome Back\r\n              </h1>\r\n              <p className=\"text-gray-600\">\r\n                Log in to your Stickerland account\r\n              </p>\r\n            </div>\r\n\r\n            {error && (\r\n              <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex gap-3\">\r\n                <AlertCircle className=\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\" />\r\n                <p className=\"text-sm text-red-800\">{error}</p>\r\n              </div>\r\n            )}\r\n\r\n            <form onSubmit={handleLogin} className=\"space-y-6 mb-8\">\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-[#030140] mb-2\">\r\n                  Email Address\r\n                </label>\r\n                <div className=\"relative\">\r\n                  <Mail className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\r\n                  <input\r\n                    type=\"email\"\r\n                    required\r\n                    value={email}\r\n                    onChange={(e) => setEmail(e.target.value)}\r\n                    autoComplete=\"email\"\r\n                    className=\"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#F63049] focus:border-transparent transition-all\"\r\n                    placeholder=\"you@example.com\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-[#030140] mb-2\">\r\n                  Password\r\n                </label>\r\n                <div className=\"relative\">\r\n                  <Lock className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\r\n                  <input\r\n                    type={showPassword ? \"text\" : \"password\"}\r\n                    required\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                    autoComplete=\"current-password\"\r\n                    className=\"w-full pl-12 pr-12 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#F63049] focus:border-transparent transition-all\"\r\n                    placeholder=\"••••••••\"\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setShowPassword(!showPassword)}\r\n                    className=\"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600\"\r\n                  >\r\n                    {showPassword ? (\r\n                      <EyeOff className=\"w-5 h-5\" />\r\n                    ) : (\r\n                      <Eye className=\"w-5 h-5\" />\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex items-center justify-between\">\r\n                <label className=\"flex items-center gap-2\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    className=\"w-4 h-4 rounded border-gray-300 cursor-pointer\"\r\n                  />\r\n                  <span className=\"text-sm text-gray-600\">Remember me</span>\r\n                </label>\r\n                <Link\r\n                  to=\"/forgot-password\"\r\n                  className=\"text-sm text-[#F63049] hover:text-[#d62a3f] transition-colors font-medium\"\r\n                >\r\n                  Forgot password?\r\n                </Link>\r\n              </div>\r\n\r\n              <button\r\n                type=\"submit\"\r\n                disabled={isLoading}\r\n                className=\"w-full py-3 bg-[#F63049] text-white rounded-lg font-bold hover:bg-[#d62a3f] transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-[#F63049]/30\"\r\n              >\r\n                {isLoading ? \"Logging in...\" : \"Log In\"}\r\n              </button>\r\n            </form>\r\n\r\n            <div className=\"text-center\">\r\n              <p className=\"text-gray-600\">\r\n                Don't have an account?{\" \"}\r\n                <Link\r\n                  to=\"/signup\"\r\n                  className=\"text-[#F63049] hover:text-[#d62a3f] font-semibold transition-colors\"\r\n                >\r\n                  Sign up\r\n                </Link>\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <p className=\"text-center text-sm text-gray-600 mt-8\">\r\n            By logging in, you agree to our{\" \"}\r\n            <a\r\n              href=\"#\"\r\n              className=\"text-[#F63049] hover:text-[#d62a3f] transition-colors\"\r\n            >\r\n              Terms of Service\r\n            </a>{\" \"}\r\n            and{\" \"}\r\n            <a\r\n              href=\"#\"\r\n              className=\"text-[#F63049] hover:text-[#d62a3f] transition-colors\"\r\n            >\r\n              Privacy Policy\r\n            </a>\r\n          </p>\r\n        </div>\r\n      </main>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}