(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67881,91918,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(20783),r=Symbol.for("react.lazy"),n=s[" use ".trim().toString()];function i(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===r&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function l(e){var r;let l,d=(r=e,(l=s.forwardRef((e,t)=>{let{children:r,...l}=e;if(i(r)&&"function"==typeof n&&(r=n(r._payload)),s.isValidElement(r)){var d;let e,n,i=(d=r,(n=(e=Object.getOwnPropertyDescriptor(d.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?d.ref:(n=(e=Object.getOwnPropertyDescriptor(d,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?d.props.ref:d.props.ref||d.ref),o=function(e,t){let s={...t};for(let a in t){let r=e[a],n=t[a];/^on[A-Z]/.test(a)?r&&n?s[a]=(...e)=>{let t=n(...e);return r(...e),t}:r&&(s[a]=r):"style"===a?s[a]={...r,...n}:"className"===a&&(s[a]=[r,n].filter(Boolean).join(" "))}return{...e,...s}}(l,r.props);return r.type!==s.Fragment&&(o.ref=t?(0,a.composeRefs)(t,i):i),s.cloneElement(r,o)}return s.Children.count(r)>1?s.Children.only(null):null})).displayName=`${r}.SlotClone`,l),o=s.forwardRef((e,a)=>{let{children:r,...l}=e;i(r)&&"function"==typeof n&&(r=n(r._payload));let o=s.Children.toArray(r),m=o.find(c);if(m){let e=m.props.children,r=o.map(t=>t!==m?t:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,t.jsx)(d,{...l,ref:a,children:s.isValidElement(e)?s.cloneElement(e,void 0,r):null})}return(0,t.jsx)(d,{...l,ref:a,children:r})});return o.displayName=`${e}.Slot`,o}var d=l("Slot"),o=Symbol("radix.slottable");function c(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===o}e.s(["Slot",()=>d,"createSlot",()=>l],91918);var m=e.i(25913),x=e.i(47163);let u=(0,m.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),p=s.forwardRef(({className:e,variant:s,size:a,asChild:r=!1,...n},i)=>(0,t.jsx)(r?d:"button",{className:(0,x.cn)(u({variant:s,size:a,className:e})),ref:i,...n}));p.displayName="Button",e.s(["Button",()=>p,"buttonVariants",()=>u],67881)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],40160)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},70065,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(47163);let r=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));r.displayName="Card";let n=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...s}));n.displayName="CardHeader";let i=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("h3",{ref:r,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));i.displayName="CardTitle";let l=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("p",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",e),...s}));l.displayName="CardDescription";let d=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",e),...s}));d.displayName="CardContent",s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>d,"CardDescription",()=>l,"CardHeader",()=>n,"CardTitle",()=>i])},69074,e=>{"use strict";let t=(0,e.i(75254).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>t],69074)},8009,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(4792),r=e.i(67881),n=e.i(70065),i=e.i(31278),l=e.i(40160),d=e.i(69074),o=e.i(46696);function c(){let{token:e}=(0,a.useParams)(),c=(0,a.useNavigate)(),[m,x]=(0,s.useState)(null),[u,p]=(0,s.useState)(!0),[h,f]=(0,s.useState)(null),[j,b]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let t=async()=>{try{let t=await fetch(`/api/invoice/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.error||`Invoice not found (${t.status})`)}let s=await t.json();if(!s.data)throw Error("Invalid response format");x(s.data)}catch(t){console.error("Error fetching invoice:",t);let e=t instanceof Error?t.message:"Invoice not found or has expired";o.toast.error(e)}finally{p(!1)}};e&&t()},[e]);let y=async()=>{if(h&&m)try{b(!0);let t=new FormData;if(t.append("file",h),!(await fetch(`/api/admin/invoices/${m.id}/artwork`,{method:"POST",body:t})).ok)throw Error("Failed to upload artwork");o.toast.success("Artwork uploaded successfully"),f(null);let s=await fetch(`/api/invoice/${e}`),a=await s.json();x(a.data)}catch(e){console.error("Error uploading artwork:",e),o.toast.error("Failed to upload artwork")}finally{b(!1)}};if(u)return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-gray-50 pt-20",children:(0,t.jsx)(i.Loader2,{className:"w-8 h-8 animate-spin text-blue-600"})})});if(!m)return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-gray-50 pt-20",children:(0,t.jsx)(n.Card,{className:"max-w-md w-full",children:(0,t.jsxs)(n.CardContent,{className:"pt-6 text-center",children:[(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Invoice not found or has expired"}),(0,t.jsx)(r.Button,{onClick:()=>c("/"),className:"w-full",children:"Return Home"})]})})})});let g="Paid"===m.status,N="Canceled"===m.status,v=new Date(m.due_date)<new Date;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("main",{className:"min-h-screen bg-gray-50 pt-20",children:(0,t.jsxs)("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[(0,t.jsx)(n.Card,{className:"mb-6",children:(0,t.jsx)(n.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:m.invoice_number}),(0,t.jsxs)("p",{className:"text-gray-600 mt-1",children:["Issued: ",new Date(m.issue_date).toLocaleDateString()]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:`text-sm font-medium ${g?"text-green-600":N||v?"text-red-600":"text-yellow-600"}`,children:m.status}),(0,t.jsxs)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:["$",(Number(m.total)||0).toFixed(2)]})]})]})})}),g&&(0,t.jsx)(n.Card,{className:"mb-6 bg-green-50 border-green-200",children:(0,t.jsx)(n.CardContent,{className:"pt-6",children:(0,t.jsx)("p",{className:"text-green-800 font-medium",children:"✓ This invoice has been paid. Thank you!"})})}),N&&(0,t.jsx)(n.Card,{className:"mb-6 bg-red-50 border-red-200",children:(0,t.jsx)(n.CardContent,{className:"pt-6",children:(0,t.jsx)("p",{className:"text-red-800 font-medium",children:"This invoice has been canceled. Please contact support for more information."})})}),v&&!g&&(0,t.jsx)(n.Card,{className:"mb-6 bg-yellow-50 border-yellow-200",children:(0,t.jsx)(n.CardContent,{className:"pt-6",children:(0,t.jsx)("p",{className:"text-yellow-800 font-medium",children:"⚠ This invoice is overdue. Please pay as soon as possible."})})}),"ArtworkUpload"===m.invoice_type&&0===m.artwork.length&&!g&&(0,t.jsxs)(n.Card,{className:"mb-6 bg-blue-50 border-blue-200",children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsx)(n.CardTitle,{className:"text-lg",children:"Upload Artwork"})}),(0,t.jsxs)(n.CardContent,{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Please upload your artwork file before making payment."}),(0,t.jsxs)("div",{className:"border-2 border-dashed border-blue-300 rounded-lg p-6 text-center",children:[(0,t.jsx)(d.Upload,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),(0,t.jsx)("input",{type:"file",onChange:e=>f(e.target.files?.[0]||null),accept:"image/*,.pdf",className:"hidden",id:"artwork-input"}),(0,t.jsx)("label",{htmlFor:"artwork-input",className:"cursor-pointer text-blue-600 font-medium",children:"Click to upload or drag and drop"}),(0,t.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:"PNG, JPG, PDF up to 50MB"})]}),h&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Selected: ",h.name]}),(0,t.jsxs)(r.Button,{onClick:y,disabled:j,className:"w-full mt-2",children:[j&&(0,t.jsx)(i.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Upload Artwork"]})]})]})]}),(0,t.jsxs)(n.Card,{className:"mb-6",children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsx)(n.CardTitle,{children:"Invoice Details"})}),(0,t.jsx)(n.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 pb-4 border-b",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Bill To"}),(0,t.jsx)("p",{className:"font-semibold",children:m.customer_name}),m.company&&(0,t.jsx)("p",{className:"text-sm text-gray-600",children:m.company}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:m.customer_email})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Due Date"}),(0,t.jsx)("p",{className:"font-semibold",children:new Date(m.due_date).toLocaleDateString()})]})]}),(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("th",{className:"text-left py-2 font-semibold",children:"Description"}),(0,t.jsx)("th",{className:"text-center py-2 font-semibold w-20",children:"Qty"}),(0,t.jsx)("th",{className:"text-right py-2 font-semibold w-24",children:"Price"}),(0,t.jsx)("th",{className:"text-right py-2 font-semibold w-24",children:"Total"})]})}),(0,t.jsx)("tbody",{children:m.line_items.map((e,s)=>(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("td",{className:"py-3",children:e.item_name}),(0,t.jsx)("td",{className:"py-3 text-center",children:e.quantity}),(0,t.jsxs)("td",{className:"py-3 text-right",children:["$",(Number(e.unit_price)||0).toFixed(2)]}),(0,t.jsxs)("td",{className:"py-3 text-right font-medium",children:["$",(Number(e.line_total||e.quantity*e.unit_price)||0).toFixed(2)]})]},s))})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Subtotal:"}),(0,t.jsxs)("span",{children:["$",(Number(m.subtotal)||0).toFixed(2)]})]}),Number(m.tax_amount||0)>0&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Tax:"}),(0,t.jsxs)("span",{children:["$",(Number(m.tax_amount)||0).toFixed(2)]})]}),Number(m.shipping||0)>0&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Shipping:"}),(0,t.jsxs)("span",{children:["$",(Number(m.shipping)||0).toFixed(2)]})]}),Number(m.discount_amount||0)>0&&(0,t.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,t.jsx)("span",{children:"Discount:"}),(0,t.jsxs)("span",{children:["-$",(Number(m.discount_amount)||0).toFixed(2)]})]}),(0,t.jsxs)("div",{className:"border-t pt-2 font-bold flex justify-between",children:[(0,t.jsx)("span",{children:"Total Due:"}),(0,t.jsxs)("span",{children:["$",(Number(m.total)||0).toFixed(2)]})]})]})]})})]}),!g&&!N&&(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)(r.Button,{onClick:()=>{m&&e&&c(`/invoice/${e}/checkout`)},disabled:"ArtworkUpload"===m.invoice_type&&0===m.artwork.length,className:"flex-1 bg-blue-600 hover:bg-blue-700 py-6 text-lg",children:["Pay $",(Number(m.total)||0).toFixed(2)]}),(0,t.jsxs)(r.Button,{variant:"outline",children:[(0,t.jsx)(l.Download,{className:"w-4 h-4 mr-2"}),"Download PDF"]})]})]})})})}e.s(["default",()=>c])}]);