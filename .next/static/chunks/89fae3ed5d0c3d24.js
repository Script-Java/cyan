(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63209,e=>{"use strict";let r=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>r],63209)},67881,91918,e=>{"use strict";var r=e.i(43476),t=e.i(71645),s=e.i(20783),a=Symbol.for("react.lazy"),i=t[" use ".trim().toString()];function n(e){var r;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===a&&"_payload"in e&&"object"==typeof(r=e._payload)&&null!==r&&"then"in r}function o(e){var a;let o,l=(a=e,(o=t.forwardRef((e,r)=>{let{children:a,...o}=e;if(n(a)&&"function"==typeof i&&(a=i(a._payload)),t.isValidElement(a)){var l;let e,i,n=(l=a,(i=(e=Object.getOwnPropertyDescriptor(l.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.ref:(i=(e=Object.getOwnPropertyDescriptor(l,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.props.ref:l.props.ref||l.ref),d=function(e,r){let t={...r};for(let s in r){let a=e[s],i=r[s];/^on[A-Z]/.test(s)?a&&i?t[s]=(...e)=>{let r=i(...e);return a(...e),r}:a&&(t[s]=a):"style"===s?t[s]={...a,...i}:"className"===s&&(t[s]=[a,i].filter(Boolean).join(" "))}return{...e,...t}}(o,a.props);return a.type!==t.Fragment&&(d.ref=r?(0,s.composeRefs)(r,n):n),t.cloneElement(a,d)}return t.Children.count(a)>1?t.Children.only(null):null})).displayName=`${a}.SlotClone`,o),d=t.forwardRef((e,s)=>{let{children:a,...o}=e;n(a)&&"function"==typeof i&&(a=i(a._payload));let d=t.Children.toArray(a),u=d.find(c);if(u){let e=u.props.children,a=d.map(r=>r!==u?r:t.Children.count(e)>1?t.Children.only(null):t.isValidElement(e)?e.props.children:null);return(0,r.jsx)(l,{...o,ref:s,children:t.isValidElement(e)?t.cloneElement(e,void 0,a):null})}return(0,r.jsx)(l,{...o,ref:s,children:a})});return d.displayName=`${e}.Slot`,d}var l=o("Slot"),d=Symbol("radix.slottable");function c(e){return t.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===d}e.s(["Slot",()=>l,"createSlot",()=>o],91918);var u=e.i(25913),p=e.i(47163);let m=(0,u.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),g=t.forwardRef(({className:e,variant:t,size:s,asChild:a=!1,...i},n)=>(0,r.jsx)(a?l:"button",{className:(0,p.cn)(m({variant:t,size:s,className:e})),ref:n,...i}));g.displayName="Button",e.s(["Button",()=>g,"buttonVariants",()=>m],67881)},73708,3408,e=>{"use strict";let r=(0,e.i(75254).default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["default",()=>r],3408),e.s(["Image",()=>r],73708)},31278,e=>{"use strict";let r=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>r],31278)},71860,e=>{"use strict";function r(e){let r="string"==typeof e?parseInt(e,10):e;return isNaN(r)||r<=0?(console.warn("Invalid order ID for formatting:",e),`#${e}`):`SY-5${4001+r}`}e.s(["formatOrderNumber",()=>r])},95468,e=>{"use strict";let r=(0,e.i(75254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>r],95468)},95941,e=>{"use strict";var r=e.i(43476),t=e.i(71645),s=e.i(4792),a=e.i(95468),i=e.i(63209),n=e.i(31278),o=e.i(73708),l=e.i(67881),d=e.i(46696),c=e.i(71860);function u(){let{proofId:e}=(0,s.useParams)(),u=(0,s.useNavigate)(),[p,m]=(0,t.useState)(null),[g,h]=(0,t.useState)(!0),[f,x]=(0,t.useState)(!1),[y,b]=(0,t.useState)(""),[v,j]=(0,t.useState)(null),[N,w]=(0,t.useState)("");(0,t.useEffect)(()=>{k()},[e]);let k=async()=>{try{if(!e){b("Invalid proof ID"),h(!1);return}let r=await fetch(`/api/proofs/public/${e}`);if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to load proof")}let t=await r.json();m(t.proof)}catch(r){let e=r instanceof Error?r.message:"Failed to load proof";b(e),d.toast.error(e)}finally{h(!1)}},C=async()=>{try{if(!e)return;x(!0);let r=await fetch(`/api/proofs/public/${e}/approve`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to approve proof")}d.toast.success("Design approved! Thank you for your feedback."),j("approve"),setTimeout(()=>{u("/proofs")},2e3)}catch(r){let e=r instanceof Error?r.message:"Failed to approve proof";d.toast.error(e)}finally{x(!1)}},R=async()=>{try{if(!e)return;if(!N.trim())return void d.toast.error("Please describe the changes you'd like");x(!0);let r=await fetch(`/api/proofs/public/${e}/deny`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({revision_notes:N})});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to request revisions")}d.toast.success("Revision request sent! We'll update your design soon."),j("revise"),setTimeout(()=>{u("/proofs")},2e3)}catch(r){let e=r instanceof Error?r.message:"Failed to submit revision request";d.toast.error(e)}finally{x(!1)}};return g?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,r.jsx)(n.Loader2,{className:"w-8 h-8 animate-spin text-blue-600"})})}):y||!p?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsx)("div",{className:"max-w-2xl mx-auto px-4 py-8 sm:py-12",children:(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6 sm:p-8",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)(i.AlertCircle,{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-1"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error Loading Proof"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:y||"The proof you're looking for doesn't exist."}),(0,r.jsx)(l.Button,{onClick:()=>u("/proofs"),children:"Back to Proofs"})]})]})})})}):v?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsx)("div",{className:"max-w-2xl mx-auto px-4 py-8 sm:py-12",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 sm:p-8 text-center",children:[(0,r.jsx)(a.CheckCircle2,{className:"w-16 h-16 text-green-600 mx-auto mb-4"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"approve"===v?"Design Approved!":"Revisions Requested"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"approve"===v?"Thank you for approving your design. We'll proceed with production.":"Your feedback has been sent to our team. We'll update your design and send you a new proof soon."}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Redirecting to proofs..."})]})})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-8 sm:py-12",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[p.file_url?(0,r.jsx)("div",{className:"w-full bg-gray-100 p-4 sm:p-6",children:(0,r.jsx)("img",{src:p.file_url,alt:"Design Proof",className:"w-full h-auto max-h-96 object-contain rounded-lg"})}):(0,r.jsx)("div",{className:"w-full bg-gray-100 p-12 flex items-center justify-center min-h-96",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(o.Image,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-gray-600",children:"No design image available"})]})}),(0,r.jsxs)("div",{className:"p-6 sm:p-8 border-t",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Design Proof Ready"}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Order ",(0,c.formatOrderNumber)(p.order_id)]})]}),p.description&&(0,r.jsxs)("div",{className:`rounded-lg border p-4 mb-6 ${{pending:"bg-yellow-50 border-yellow-200",approved:"bg-green-50 border-green-200",denied:"bg-red-50 border-red-200",revisions_requested:"bg-orange-50 border-orange-200"}[p.status]}`,children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Proof Details:"}),(0,r.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:p.description})]}),(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${"approved"===p.status?"bg-green-100 text-green-800":"revisions_requested"===p.status?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"}`,children:["approved"===p.status&&"✓ Approved","revisions_requested"===p.status&&"Revisions Requested","pending"===p.status&&"⏳ Pending Review","denied"===p.status&&"❌ Denied"]})}),"pending"===p.status&&(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsx)(l.Button,{onClick:C,disabled:f,className:"bg-green-600 hover:bg-green-700 text-white py-3 sm:py-4 text-base sm:text-lg",children:f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.CheckCircle2,{className:"w-5 h-5 mr-2"}),"Approve This Design"]})}),(0,r.jsx)(l.Button,{onClick:()=>j("revise"),variant:"outline",className:"py-3 sm:py-4 text-base sm:text-lg border-gray-300",children:"Request Revisions"})]})}),"revise"===v&&"pending"===p.status&&(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"What changes would you like?"}),(0,r.jsx)("textarea",{value:N,onChange:e=>w(e.target.value),placeholder:"Describe the changes you'd like us to make to the design...",className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4",rows:5}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(l.Button,{onClick:R,disabled:f,className:"bg-orange-600 hover:bg-orange-700 text-white",children:f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):"Submit Revision Request"}),(0,r.jsx)(l.Button,{onClick:()=>{j(null),w("")},variant:"outline",children:"Cancel"})]})]}),"pending"!==p.status&&(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:[(0,r.jsxs)("p",{className:"text-gray-600 mb-4",children:["approved"===p.status&&"You have already approved this design.","revisions_requested"===p.status&&"Revisions have been requested for this design.","denied"===p.status&&"This design has been denied."]}),(0,r.jsx)(l.Button,{onClick:()=>u("/proofs"),variant:"outline",children:"Back to Proofs"})]})]})]})})})}e.s(["default",()=>u])}]);