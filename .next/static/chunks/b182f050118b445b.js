(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67881,91918,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(20783),a=Symbol.for("react.lazy"),i=s[" use ".trim().toString()];function n(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===a&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function l(e){var a;let l,d=(a=e,(l=s.forwardRef((e,t)=>{let{children:a,...l}=e;if(n(a)&&"function"==typeof i&&(a=i(a._payload)),s.isValidElement(a)){var d;let e,i,n=(d=a,(i=(e=Object.getOwnPropertyDescriptor(d.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?d.ref:(i=(e=Object.getOwnPropertyDescriptor(d,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?d.props.ref:d.props.ref||d.ref),c=function(e,t){let s={...t};for(let r in t){let a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?s[r]=(...e)=>{let t=i(...e);return a(...e),t}:a&&(s[r]=a):"style"===r?s[r]={...a,...i}:"className"===r&&(s[r]=[a,i].filter(Boolean).join(" "))}return{...e,...s}}(l,a.props);return a.type!==s.Fragment&&(c.ref=t?(0,r.composeRefs)(t,n):n),s.cloneElement(a,c)}return s.Children.count(a)>1?s.Children.only(null):null})).displayName=`${a}.SlotClone`,l),c=s.forwardRef((e,r)=>{let{children:a,...l}=e;n(a)&&"function"==typeof i&&(a=i(a._payload));let c=s.Children.toArray(a),m=c.find(o);if(m){let e=m.props.children,a=c.map(t=>t!==m?t:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,t.jsx)(d,{...l,ref:r,children:s.isValidElement(e)?s.cloneElement(e,void 0,a):null})}return(0,t.jsx)(d,{...l,ref:r,children:a})});return c.displayName=`${e}.Slot`,c}var d=l("Slot"),c=Symbol("radix.slottable");function o(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===c}e.s(["Slot",()=>d,"createSlot",()=>l],91918);var m=e.i(25913),x=e.i(47163);let p=(0,m.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=s.forwardRef(({className:e,variant:s,size:r,asChild:a=!1,...i},n)=>(0,t.jsx)(a?d:"button",{className:(0,x.cn)(p({variant:s,size:r,className:e})),ref:n,...i}));u.displayName="Button",e.s(["Button",()=>u,"buttonVariants",()=>p],67881)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},70065,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(47163);let a=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));a.displayName="Card";let i=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...s}));i.displayName="CardHeader";let n=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)("h3",{ref:a,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));n.displayName="CardTitle";let l=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)("p",{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",e),...s}));l.displayName="CardDescription";let d=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,r.cn)("p-6 pt-0",e),...s}));d.displayName="CardContent",s.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,r.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter",e.s(["Card",()=>a,"CardContent",()=>d,"CardDescription",()=>l,"CardHeader",()=>i,"CardTitle",()=>n])},70756,e=>{"use strict";let t=(0,e.i(75254).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],70756)},62924,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(4792),a=e.i(67881),i=e.i(70065),n=e.i(31278),l=e.i(70756),d=e.i(69638),c=e.i(46696);function o(){let{token:e}=(0,r.useParams)(),o=(0,r.useNavigate)(),[m,x]=(0,s.useState)(null),[p,u]=(0,s.useState)(!0),[h,f]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(!e){c.toast.error("Invalid invoice token"),o("/");return}g()},[e,o]);let g=async()=>{try{u(!0);let t=await fetch(`/api/invoice/${e}`);if(!t.ok)throw Error("Failed to fetch invoice");let s=await t.json();x(s.data||s.invoice)}catch(e){console.error("Error fetching invoice:",e),c.toast.error("Failed to load invoice"),o("/")}finally{u(!1)}},y=async()=>{if(m&&e)try{f(!0);let t=await fetch(`/api/invoice/${e}/create-payment-link`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to create payment link")}let s=await t.json();s.data?.payment_link?window.location.href=s.data.payment_link:c.toast.error("Failed to generate payment link")}catch(e){console.error("Payment error:",e),c.toast.error(e instanceof Error?e.message:"Failed to process payment")}finally{f(!1)}};if(p)return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("main",{className:"min-h-screen bg-gray-50 pt-20",children:(0,t.jsx)("div",{className:"max-w-2xl mx-auto px-4 py-8",children:(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(n.Loader2,{className:"w-6 h-6 animate-spin text-gray-400"})})})})});if(!m)return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("main",{className:"min-h-screen bg-gray-50 pt-20",children:(0,t.jsx)("div",{className:"max-w-2xl mx-auto px-4 py-8",children:(0,t.jsx)(i.Card,{children:(0,t.jsx)(i.CardContent,{className:"pt-6",children:(0,t.jsx)("p",{className:"text-center text-gray-600",children:"Invoice not found or has expired"})})})})})});let j="Paid"===m.status;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("main",{className:"min-h-screen bg-gray-50 pt-20",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-8",children:[(0,t.jsxs)(i.Card,{className:"mb-6",children:[(0,t.jsx)(i.CardHeader,{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-t-lg",children:(0,t.jsx)(i.CardTitle,{className:"text-2xl",children:"Invoice Confirmation"})}),(0,t.jsx)(i.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Invoice Number"}),(0,t.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:m.invoice_number})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Due Date"}),(0,t.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:new Date(m.due_date).toLocaleDateString()})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Bill To"}),(0,t.jsx)("p",{className:"font-semibold text-gray-900",children:m.customer_name}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:m.customer_email})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Status"}),(0,t.jsx)("p",{className:`text-lg font-semibold ${j?"text-green-600":"text-yellow-600"}`,children:m.status})]})]})})]}),m.shipping_address&&(0,t.jsxs)(i.Card,{className:"mb-6",children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsx)(i.CardTitle,{className:"text-lg",children:"Shipping Address"})}),(0,t.jsx)(i.CardContent,{children:(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:m.customer_name}),m.shipping_address.street&&(0,t.jsx)("p",{className:"text-gray-600",children:m.shipping_address.street}),m.shipping_address.city&&(0,t.jsxs)("p",{className:"text-gray-600",children:[m.shipping_address.city,m.shipping_address.state&&`, ${m.shipping_address.state}`,m.shipping_address.zip&&` ${m.shipping_address.zip}`]}),m.shipping_address.country&&(0,t.jsx)("p",{className:"text-gray-600",children:m.shipping_address.country})]})})]}),(0,t.jsxs)(i.Card,{className:"mb-6",children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsx)(i.CardTitle,{className:"text-lg",children:"Invoice Totals"})}),(0,t.jsx)(i.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Subtotal"}),(0,t.jsxs)("span",{className:"font-medium",children:["$",(Number(m.subtotal)||0).toFixed(2)]})]}),Number(m.tax_amount||0)>0&&(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Tax"}),(0,t.jsxs)("span",{className:"font-medium",children:["$",(Number(m.tax_amount)||0).toFixed(2)]})]}),Number(m.shipping||0)>0&&(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Shipping"}),(0,t.jsxs)("span",{className:"font-medium",children:["$",(Number(m.shipping)||0).toFixed(2)]})]}),Number(m.discount_amount||0)>0&&(0,t.jsxs)("div",{className:"flex justify-between text-sm text-green-600",children:[(0,t.jsx)("span",{children:"Discount"}),(0,t.jsxs)("span",{className:"font-medium",children:["-$",(Number(m.discount_amount)||0).toFixed(2)]})]}),(0,t.jsxs)("div",{className:"border-t pt-3 flex justify-between items-center",children:[(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:"Amount Due"}),(0,t.jsxs)("span",{className:"text-3xl font-bold text-blue-600",children:["$",(Number(m.total)||0).toFixed(2)]})]})]})})]}),m.notes&&(0,t.jsx)(i.Card,{className:"mb-6 bg-blue-50 border-blue-200",children:(0,t.jsxs)(i.CardContent,{className:"pt-6",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Notes"}),(0,t.jsx)("p",{className:"text-sm text-blue-800",children:m.notes})]})}),j&&(0,t.jsx)(i.Card,{className:"mb-6 bg-green-50 border-green-200",children:(0,t.jsxs)(i.CardContent,{className:"pt-6 flex items-center gap-3",children:[(0,t.jsx)(d.CheckCircle,{className:"w-5 h-5 text-green-600"}),(0,t.jsx)("p",{className:"text-green-800 font-medium",children:"This invoice has been paid. Thank you!"})]})}),!j&&(0,t.jsx)(a.Button,{onClick:y,disabled:h,className:"w-full bg-blue-600 hover:bg-blue-700 py-6 text-lg font-semibold mb-4",children:h?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Lock,{className:"w-4 h-4 mr-2"}),"Pay with Square $",(Number(m.total)||0).toFixed(2)]})}),!j&&(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Your payment is securely processed by Square"})})]})})})}e.s(["default",()=>o])}]);