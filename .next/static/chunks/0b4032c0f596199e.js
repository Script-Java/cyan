(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63209,e=>{"use strict";let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},55900,e=>{"use strict";let t=(0,e.i(75254).default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);e.s(["ChevronUp",()=>t],55900)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},70065,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(47163);let r=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));r.displayName="Card";let l=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...s}));l.displayName="CardHeader";let i=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("h3",{ref:r,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));i.displayName="CardTitle";let n=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("p",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",e),...s}));n.displayName="CardDescription";let d=s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",e),...s}));d.displayName="CardContent",s.forwardRef(({className:e,...s},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>d,"CardDescription",()=>n,"CardHeader",()=>l,"CardTitle",()=>i])},81947,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(25913),r=e.i(47163);let l=(0,a.cva)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),i=s.forwardRef(({className:e,variant:s,...a},i)=>(0,t.jsx)("div",{ref:i,role:"alert",className:(0,r.cn)(l({variant:s}),e),...a}));i.displayName="Alert",s.forwardRef(({className:e,...s},a)=>(0,t.jsx)("h5",{ref:a,className:(0,r.cn)("mb-1 font-medium leading-none tracking-tight",e),...s})).displayName="AlertTitle";let n=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,r.cn)("text-sm [&_p]:leading-relaxed",e),...s}));n.displayName="AlertDescription",e.s(["Alert",()=>i,"AlertDescription",()=>n])},86047,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(4792),r=e.i(67881),l=e.i(23750),i=e.i(10708),n=e.i(70065),d=e.i(72520),c=e.i(31278),o=e.i(63209),h=e.i(46696),m=e.i(62870),u=e.i(81947);let p=[{code:"US",name:"United States"},{code:"CA",name:"Canada"},{code:"GB",name:"United Kingdom"},{code:"AU",name:"Australia"}],x=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"];function g(){let e=(0,a.useNavigate)(),[g,j]=(0,s.useState)(!0),[v,N]=(0,s.useState)(!1),[y,C]=(0,s.useState)(null),[f,b]=(0,s.useState)(null),[S,_]=(0,s.useState)(null),[w,A]=(0,s.useState)(""),[k,F]=(0,s.useState)({firstName:"",lastName:"",email:"",phone:"",street:"",street2:"",city:"",state:"CA",postalCode:"",country:"US"}),[I,L]=(0,s.useState)({same_as_shipping:!0,firstName:"",lastName:"",street:"",street2:"",city:"",state:"CA",postalCode:"",country:"US"});(0,s.useEffect)(()=>{C(localStorage.getItem("auth_token"));let e=sessionStorage.getItem("pending_checkout");if(!e){b("No checkout data found. Please add items to your cart."),j(!1);return}try{let t=JSON.parse(e);_(t)}catch(e){b("Invalid checkout data"),j(!1);return}j(!1)},[e]);let T=(e,t)=>{let s={...k,[e]:t};F(s),I.same_as_shipping&&L(e=>({...e,firstName:s.firstName,lastName:s.lastName,street:s.street,street2:s.street2,city:s.city,state:s.state,postalCode:s.postalCode,country:s.country}))},O=(e,t)=>{"same_as_shipping"===e?(L(e=>({...e,same_as_shipping:t})),t&&L(e=>({...e,firstName:k.firstName,lastName:k.lastName,street:k.street,street2:k.street2,city:k.city,state:k.state,postalCode:k.postalCode,country:k.country}))):L(s=>({...s,[e]:t}))},R=async e=>{if(e.preventDefault(),b(null),(k.firstName&&k.lastName&&k.email&&k.phone&&k.street&&k.city&&k.state&&k.postalCode?!!I.same_as_shipping||!!I.firstName&&!!I.lastName&&!!I.street&&!!I.city&&!!I.state&&!!I.postalCode||(b("Please fill in all required billing fields"),!1):(b("Please fill in all required shipping fields"),!1))&&S){N(!0);try{let e,t={customer_id:null,customer_email:k.email,products:[{product_id:S.product_id,quantity:S.quantity,price_inc_tax:0}],billing_address:{first_name:I.firstName,last_name:I.lastName,street_1:I.street,street_2:I.street2,city:I.city,state_or_province:I.state,postal_code:I.postalCode,country_code:I.country},shipping_addresses:[{first_name:k.firstName,last_name:k.lastName,street_1:k.street,street_2:k.street2,city:k.city,state_or_province:k.state,postal_code:k.postalCode,country_code:k.country}]};S.selectedOptions&&Object.keys(S.selectedOptions).length>0&&(t.product_options=S.selectedOptions);let s={"Content-Type":"application/json"};y&&(s.Authorization=`Bearer ${y}`);let a=await fetch("/api/bigcommerce/checkout",{method:"POST",headers:s,body:JSON.stringify(t)}),r="";try{r=await a.text(),console.log("Raw response text:",r),e=r?JSON.parse(r):{}}catch(e){throw console.error("Failed to parse checkout response:",{error:e,responseText:r||"[empty response]",status:a.status,statusText:a.statusText}),Error(`Server error (${a.status}): ${r||"[empty response]"}`)}if(!a.ok){let t=e?.error||e?.message||"Failed to create BigCommerce checkout";throw Error(t)}if(e.data?.checkout_url)h.toast.success("Redirecting to BigCommerce checkout..."),sessionStorage.removeItem("pending_checkout"),setTimeout(()=>{window.location.href=e.data.checkout_url},500);else throw Error("No checkout URL returned")}catch(t){let e=t instanceof Error?t.message:"Failed to proceed to checkout";b(e),h.toast.error(e),console.error("BigCommerce checkout error:",t)}finally{N(!1)}}};return g?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("main",{className:"pt-20 min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsx)(c.Loader2,{className:"w-8 h-8 animate-spin text-blue-600"})})}):f&&!1===g&&!S?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("main",{className:"pt-20 min-h-screen bg-gray-50 py-12",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto px-4",children:[(0,t.jsxs)(u.Alert,{variant:"destructive",children:[(0,t.jsx)(o.AlertCircle,{className:"h-4 w-4"}),(0,t.jsx)(u.AlertDescription,{children:f})]}),(0,t.jsx)(r.Button,{onClick:()=>e("/products"),className:"mt-6 w-full",children:"Back to Shopping"})]})})}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("main",{className:"pt-20 min-h-screen bg-gray-50 py-12",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Shipping Information"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Please enter your shipping details to proceed to BigCommerce checkout"})]}),f&&(0,t.jsxs)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex gap-3",children:[(0,t.jsx)(o.AlertCircle,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,t.jsx)("p",{className:"text-sm text-red-800",children:f})]}),(0,t.jsx)("form",{onSubmit:R,children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)(n.Card,{children:[(0,t.jsxs)(n.CardHeader,{children:[(0,t.jsx)(n.CardTitle,{children:"Shipping Address"}),(0,t.jsx)(n.CardDescription,{children:"Where should we deliver your order?"})]}),(0,t.jsxs)(n.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"firstName",children:"First Name *"}),(0,t.jsx)(l.Input,{id:"firstName",placeholder:"John",value:k.firstName,onChange:e=>T("firstName",e.target.value),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"lastName",children:"Last Name *"}),(0,t.jsx)(l.Input,{id:"lastName",placeholder:"Doe",value:k.lastName,onChange:e=>T("lastName",e.target.value),required:!0})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"email",children:"Email *"}),(0,t.jsx)(l.Input,{id:"email",type:"email",placeholder:"john@example.com",value:k.email,onChange:e=>T("email",e.target.value),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"phone",children:"Phone *"}),(0,t.jsx)(l.Input,{id:"phone",type:"tel",placeholder:"(555) 123-4567",value:k.phone,onChange:e=>T("phone",e.target.value),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"street",children:"Street Address *"}),(0,t.jsx)(l.Input,{id:"street",placeholder:"123 Main St",value:k.street,onChange:e=>T("street",e.target.value),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"street2",children:"Apt, Suite, etc. (Optional)"}),(0,t.jsx)(l.Input,{id:"street2",placeholder:"Apt 4B",value:k.street2,onChange:e=>T("street2",e.target.value)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"city",children:"City *"}),(0,t.jsx)(l.Input,{id:"city",placeholder:"New York",value:k.city,onChange:e=>T("city",e.target.value),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"state",children:"State *"}),"US"===k.country?(0,t.jsxs)(m.Select,{value:k.state,onValueChange:e=>T("state",e),children:[(0,t.jsx)(m.SelectTrigger,{children:(0,t.jsx)(m.SelectValue,{placeholder:"Select state"})}),(0,t.jsx)(m.SelectContent,{children:x.map(e=>(0,t.jsx)(m.SelectItem,{value:e,children:e},e))})]}):(0,t.jsx)(l.Input,{placeholder:"Province/State",value:k.state,onChange:e=>T("state",e.target.value)})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"postalCode",children:"Postal Code *"}),(0,t.jsx)(l.Input,{id:"postalCode",placeholder:"10001",value:k.postalCode,onChange:e=>T("postalCode",e.target.value),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"country",children:"Country *"}),(0,t.jsxs)(m.Select,{value:k.country,onValueChange:e=>T("country",e),children:[(0,t.jsx)(m.SelectTrigger,{children:(0,t.jsx)(m.SelectValue,{placeholder:"Select country"})}),(0,t.jsx)(m.SelectContent,{children:p.map(e=>(0,t.jsx)(m.SelectItem,{value:e.code,children:e.name},e.code))})]})]})]})]})]}),(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsx)(n.CardTitle,{children:"Billing Address"})}),(0,t.jsxs)(n.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:I.same_as_shipping,onChange:e=>O("same_as_shipping",e.target.checked),className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Same as shipping address"})]}),!I.same_as_shipping&&(0,t.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"billingFirstName",children:"First Name *"}),(0,t.jsx)(l.Input,{id:"billingFirstName",placeholder:"John",value:I.firstName,onChange:e=>O("firstName",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"billingLastName",children:"Last Name *"}),(0,t.jsx)(l.Input,{id:"billingLastName",placeholder:"Doe",value:I.lastName,onChange:e=>O("lastName",e.target.value)})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"billingStreet",children:"Street Address *"}),(0,t.jsx)(l.Input,{id:"billingStreet",placeholder:"123 Main St",value:I.street,onChange:e=>O("street",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"billingStreet2",children:"Apt, Suite, etc. (Optional)"}),(0,t.jsx)(l.Input,{id:"billingStreet2",placeholder:"Apt 4B",value:I.street2,onChange:e=>O("street2",e.target.value)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"billingCity",children:"City *"}),(0,t.jsx)(l.Input,{id:"billingCity",placeholder:"New York",value:I.city,onChange:e=>O("city",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"billingState",children:"State *"}),(0,t.jsx)(l.Input,{id:"billingState",placeholder:"NY",value:I.state,onChange:e=>O("state",e.target.value)})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"billingPostalCode",children:"Postal Code *"}),(0,t.jsx)(l.Input,{id:"billingPostalCode",placeholder:"10001",value:I.postalCode,onChange:e=>O("postalCode",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"billingCountry",children:"Country *"}),(0,t.jsxs)(m.Select,{value:I.country,onValueChange:e=>O("country",e),children:[(0,t.jsx)(m.SelectTrigger,{children:(0,t.jsx)(m.SelectValue,{placeholder:"Select country"})}),(0,t.jsx)(m.SelectContent,{children:p.map(e=>(0,t.jsx)(m.SelectItem,{value:e.code,children:e.name},e.code))})]})]})]})]})]})]})]}),(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsxs)(n.Card,{className:"sticky top-24",children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsx)(n.CardTitle,{children:"Order Summary"})}),(0,t.jsx)(n.CardContent,{className:"space-y-4",children:S&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2 border-b pb-4",children:[(0,t.jsx)("div",{className:"flex justify-between text-sm",children:(0,t.jsxs)("span",{children:["Product ID: ",S.product_id]})}),(0,t.jsx)("div",{className:"flex justify-between text-sm",children:(0,t.jsxs)("span",{children:["Quantity: ",S.quantity]})})]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:(0,t.jsx)("p",{className:"mb-3",children:"You will complete payment and review order details on the BigCommerce checkout page."})}),(0,t.jsx)(r.Button,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-6 text-lg font-bold",disabled:v,children:v?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Loader2,{className:"w-5 h-5 mr-2 animate-spin"}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:["Continue to BigCommerce",(0,t.jsx)(d.ArrowRight,{className:"w-5 h-5 ml-2"})]})}),(0,t.jsx)(r.Button,{type:"button",variant:"outline",className:"w-full border-gray-300 text-gray-700 hover:bg-gray-50",onClick:()=>e("/products"),disabled:v,children:"Cancel"})]})})]})})]})})]})})})}e.s(["default",()=>g])}]);