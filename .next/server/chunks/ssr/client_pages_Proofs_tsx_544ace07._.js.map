{"version":3,"sources":["../../../../client/pages/Proofs.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport {\r\n  CheckCircle2,\r\n  XCircle,\r\n  Clock,\r\n  MessageSquare,\r\n  ArrowRight,\r\n  AlertCircle,\r\n  ChevronDown,\r\n  Send,\r\n  AlertTriangle,\r\n  Bell,\r\n  Download,\n} from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { toast } from \"sonner\";\r\nimport { formatOrderNumber } from \"@/lib/order-number\";\r\n\r\ninterface ProofComment {\r\n  id: string;\r\n  proof_id: string;\r\n  customer_id?: number;\r\n  admin_id?: string;\r\n  admin_email?: string;\r\n  message: string;\r\n  created_at: string;\r\n}\r\n\r\ninterface Proof {\r\n  id: string;\r\n  order_id: number;\r\n  customer_id: number;\r\n  description?: string;\r\n  file_url?: string;\r\n  file_name?: string;\r\n  status: \"pending\" | \"approved\" | \"denied\" | \"revisions_requested\";\r\n  revision_notes?: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n  comments?: ProofComment[];\r\n}\r\n\r\ninterface PaginationInfo {\r\n  currentPage: number;\r\n  pageSize: number;\r\n  totalItems: number;\r\n  totalPages: number;\r\n  hasMore: boolean;\r\n}\r\n\r\ninterface ProofsResponse {\r\n  success: boolean;\r\n  proofs: Proof[];\r\n  unreadNotifications: number;\r\n  pagination?: PaginationInfo;\r\n}\r\n\r\ninterface ProofDetailResponse {\r\n  success: boolean;\r\n  proof: Proof & { comments: ProofComment[] };\r\n}\r\n\r\nexport default function Proofs() {\r\n  const navigate = useNavigate();\r\n  const [proofs, setProofs] = useState<Proof[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n  const [expandedProofId, setExpandedProofId] = useState<string | null>(null);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n  const [commentText, setCommentText] = useState<Record<string, string>>({});\r\n  const [submittingComment, setSubmittingComment] = useState<\r\n    Record<string, boolean>\r\n  >({});\r\n  const [submittingAction, setSubmittingAction] = useState<\r\n    Record<string, boolean>\r\n  >({});\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pagination, setPagination] = useState<PaginationInfo | null>(null);\r\n  const [isLoadingMore, setIsLoadingMore] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"authToken\");\r\n\r\n    if (!token) {\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n\r\n    fetchProofs();\r\n  }, [navigate]);\r\n\r\n  const fetchProofs = async (page: number = 1, append: boolean = false) => {\r\n    try {\r\n      if (!append) {\r\n        setIsLoading(true);\r\n      } else {\r\n        setIsLoadingMore(true);\r\n      }\r\n      setError(\"\");\r\n\r\n      const token = localStorage.getItem(\"authToken\");\r\n      const response = await fetch(`/api/proofs?page=${page}`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || \"Failed to fetch proofs\");\r\n      }\r\n\r\n      const data: ProofsResponse = await response.json();\r\n\r\n      if (append) {\r\n        setProofs((prev) => [...prev, ...(data.proofs || [])]);\r\n      } else {\r\n        setProofs(data.proofs || []);\r\n      }\r\n\r\n      setUnreadCount(data.unreadNotifications || 0);\r\n      setPagination(data.pagination || null);\r\n      setCurrentPage(page);\r\n    } catch (err) {\r\n      const message =\r\n        err instanceof Error ? err.message : \"Failed to load proofs\";\r\n      setError(message);\r\n    } finally {\r\n      setIsLoading(false);\r\n      setIsLoadingMore(false);\r\n    }\r\n  };\r\n\r\n  const fetchProofDetail = async (proofId: string) => {\r\n    try {\r\n      const token = localStorage.getItem(\"authToken\");\r\n      const response = await fetch(`/api/proofs/${proofId}`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Failed to fetch proof details\");\r\n      }\r\n\r\n      const data: ProofDetailResponse = await response.json();\r\n      setProofs((prev) => prev.map((p) => (p.id === proofId ? data.proof : p)));\r\n    } catch (err) {\r\n      console.error(\"Error fetching proof detail:\", err);\r\n    }\r\n  };\r\n\r\n  const handleApprove = async (proofId: string) => {\r\n    try {\r\n      setSubmittingAction((prev) => ({ ...prev, [proofId]: true }));\r\n      const token = localStorage.getItem(\"authToken\");\r\n\r\n      const response = await fetch(`/api/proofs/${proofId}/approve`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || \"Failed to approve proof\");\r\n      }\r\n\r\n      toast.success(\"Proof approved! Admin has been notified.\");\r\n      fetchProofs();\r\n    } catch (err) {\r\n      const message =\r\n        err instanceof Error ? err.message : \"Failed to approve proof\";\r\n      toast.error(message);\r\n    } finally {\r\n      setSubmittingAction((prev) => ({ ...prev, [proofId]: false }));\r\n    }\r\n  };\r\n\r\n  const handleDeny = async (proofId: string) => {\r\n    try {\r\n      setSubmittingAction((prev) => ({ ...prev, [proofId]: true }));\r\n      const token = localStorage.getItem(\"authToken\");\r\n      const revisionNotes = commentText[`deny-${proofId}`] || \"\";\r\n\r\n      const response = await fetch(`/api/proofs/${proofId}/deny`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ revisionNotes }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || \"Failed to deny proof\");\r\n      }\r\n\r\n      toast.success(\"Revision requested. Admin will see your feedback.\");\r\n      setCommentText((prev) => ({ ...prev, [`deny-${proofId}`]: \"\" }));\r\n      fetchProofs();\r\n    } catch (err) {\r\n      const message =\r\n        err instanceof Error ? err.message : \"Failed to deny proof\";\r\n      toast.error(message);\r\n    } finally {\r\n      setSubmittingAction((prev) => ({ ...prev, [proofId]: false }));\r\n    }\r\n  };\r\n\r\n  const handleAddComment = async (proofId: string) => {\r\n    try {\r\n      const message = commentText[proofId]?.trim();\r\n      if (!message) {\r\n        toast.error(\"Please enter a comment\");\r\n        return;\r\n      }\r\n\r\n      setSubmittingComment((prev) => ({ ...prev, [proofId]: true }));\r\n      const token = localStorage.getItem(\"authToken\");\r\n\r\n      const response = await fetch(`/api/proofs/${proofId}/comments`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ message }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Failed to add comment\");\r\n      }\r\n\r\n      setCommentText((prev) => ({ ...prev, [proofId]: \"\" }));\r\n      toast.success(\"Comment added\");\r\n      fetchProofDetail(proofId);\r\n    } catch (err) {\r\n      const message =\r\n        err instanceof Error ? err.message : \"Failed to add comment\";\r\n      toast.error(message);\r\n    } finally {\r\n      setSubmittingComment((prev) => ({ ...prev, [proofId]: false }));\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (status: string) => {\r\n    switch (status) {\r\n      case \"approved\":\r\n        return <CheckCircle2 className=\"w-6 h-6 text-green-600\" />;\r\n      case \"denied\":\r\n      case \"revisions_requested\":\r\n        return <AlertTriangle className=\"w-6 h-6 text-orange-600\" />;\r\n      case \"pending\":\r\n      default:\r\n        return <Clock className=\"w-6 h-6 text-blue-600\" />;\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case \"approved\":\r\n        return \"text-green-600 bg-green-50\";\r\n      case \"denied\":\r\n      case \"revisions_requested\":\r\n        return \"text-orange-600 bg-orange-50\";\r\n      case \"pending\":\r\n      default:\r\n        return \"text-blue-600 bg-blue-50\";\r\n    }\r\n  };\r\n\r\n  const getStatusLabel = (status: string) => {\r\n    switch (status) {\r\n      case \"approved\":\r\n        return \"Approved\";\r\n      case \"denied\":\r\n        return \"Denied\";\r\n      case \"revisions_requested\":\r\n        return \"Revisions Requested\";\r\n      case \"pending\":\r\n      default:\r\n        return \"Pending Review\";\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleDateString(\"en-US\", {\r\n      year: \"numeric\",\r\n      month: \"short\",\r\n      day: \"numeric\",\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\",\r\n    });\r\n  };\r\n\r\n  const pendingProofs = proofs.filter((p) => p.status === \"pending\");\r\n  const reviewedProofs = proofs.filter((p) => p.status !== \"pending\");\r\n  const pendingProofsCount = pendingProofs.length;\r\n\r\n  if (isLoading) {\n    return (\n      <>\n        <main className=\"min-h-screen bg-gray-50 py-8\">\n          <div className=\"max-w-6xl mx-auto px-4\">\r\n            <div className=\"flex justify-center items-center h-64\">\r\n              <div className=\"text-gray-600 text-lg\">\r\n                Loading your proofs...\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </main>\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\n    <>\n      <main className=\"min-h-screen bg-gray-50 py-6 sm:py-8\">\n        <div className=\"max-w-6xl mx-auto px-4 sm:px-6\">\r\n          {/* Header */}\r\n          <div className=\"mb-6 sm:mb-8\">\r\n            <button\r\n              onClick={() => navigate(\"/dashboard\")}\r\n              className=\"flex items-center gap-2 text-xs sm:text-sm font-medium text-blue-600 hover:text-blue-700 mb-3 sm:mb-4\"\r\n            >\r\n              <ArrowRight className=\"w-3 h-3 sm:w-4 sm:h-4 rotate-180\" />\r\n              Back to Dashboard\r\n            </button>\r\n            <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-3 sm:gap-4\">\r\n              <div>\r\n                <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900\">\r\n                  Proofs\r\n                </h1>\r\n                <p className=\"text-xs sm:text-sm text-gray-600 mt-1 sm:mt-2\">\r\n                  Review and approve design proofs for your orders\r\n                </p>\r\n              </div>\r\n              {pendingProofsCount > 0 && (\r\n                <div className=\"flex items-center gap-2 bg-blue-50 border border-blue-200 rounded-lg px-3 sm:px-4 py-2 flex-shrink-0 text-xs sm:text-sm\">\r\n                  <Bell className=\"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 flex-shrink-0\" />\r\n                  <span className=\"font-medium text-blue-900\">\r\n                    {pendingProofsCount}{\" \"}\r\n                    {pendingProofsCount === 1 ? \"proof\" : \"proofs\"} awaiting\r\n                  </span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Error Message */}\r\n          {error && (\r\n            <div className=\"mb-6 bg-red-50 border border-red-200 rounded-lg p-3 sm:p-4 flex gap-2 sm:gap-3\">\r\n              <AlertCircle className=\"w-4 h-4 sm:w-5 sm:h-5 text-red-600 flex-shrink-0 mt-0.5\" />\r\n              <p className=\"text-xs sm:text-sm text-red-800\">{error}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Empty State */}\r\n          {proofs.length === 0 && !error && (\r\n            <div className=\"bg-white rounded-lg border border-gray-200 p-8 sm:p-12 text-center\">\r\n              <Clock className=\"w-10 h-10 sm:w-12 sm:h-12 text-gray-400 mx-auto mb-3 sm:mb-4\" />\r\n              <h2 className=\"text-lg sm:text-xl font-semibold text-gray-900 mb-2\">\r\n                No Proofs Yet\r\n              </h2>\r\n              <p className=\"text-xs sm:text-sm text-gray-600\">\r\n                Your design proofs will appear here once the admin sends them\r\n                for your review.\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Pending Proofs Section */}\r\n          {pendingProofs.length > 0 && (\r\n            <div className=\"mb-8\">\r\n              <div className=\"mb-3 sm:mb-4\">\r\n                <h2 className=\"text-base sm:text-lg font-semibold text-gray-900 flex items-center gap-2\">\r\n                  <Clock className=\"w-4 h-4 sm:w-5 sm:h-5 text-blue-600\" />\r\n                  Awaiting Your Review ({pendingProofs.length})\r\n                </h2>\r\n              </div>\r\n              <div className=\"space-y-3 sm:space-y-4\">\r\n                {pendingProofs.map((proof) => (\r\n                  <div\r\n                    key={proof.id}\r\n                    className=\"bg-white rounded-lg border border-blue-200 overflow-hidden hover:shadow-lg transition-shadow\"\r\n                  >\r\n                    {/* Proof Header */}\r\n                    <button\r\n                      onClick={() =>\r\n                        setExpandedProofId(\r\n                          expandedProofId === proof.id ? null : proof.id,\r\n                        )\r\n                      }\r\n                      className=\"w-full px-3 sm:px-6 py-3 sm:py-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4 hover:bg-blue-50 transition-colors text-left\"\r\n                    >\r\n                      <div className=\"flex items-start sm:items-center gap-2 sm:gap-4 flex-1 min-w-0\">\r\n                        <div className=\"bg-blue-100 p-2 sm:p-3 rounded-lg flex-shrink-0\">\r\n                          {getStatusIcon(proof.status)}\r\n                        </div>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-3 mb-1 sm:mb-2\">\r\n                            <h3 className=\"text-base sm:text-lg font-semibold text-gray-900\">\r\n                              Order {formatOrderNumber(proof.order_id)}\r\n                            </h3>\r\n                            <span\r\n                              className={`px-2 sm:px-3 py-1 rounded-full text-xs font-medium w-fit ${getStatusColor(proof.status)}`}\r\n                            >\r\n                              {getStatusLabel(proof.status)}\r\n                            </span>\r\n                          </div>\r\n                          <p className=\"text-xs sm:text-sm text-gray-600 truncate\">\r\n                            {proof.description ||\r\n                              \"Design proof ready for your review\"}\r\n                          </p>\r\n                          {proof.file_name && (\r\n                            <p className=\"text-xs text-blue-600 mt-1 flex items-center gap-1 truncate\">\r\n                              <FileIcon className=\"w-3 h-3 flex-shrink-0\" />\r\n                              <span className=\"truncate\">\r\n                                File: {proof.file_name}\r\n                              </span>\r\n                            </p>\r\n                          )}\r\n                          <p className=\"text-xs text-gray-500 mt-1\">\r\n                            Sent on {formatDate(proof.created_at)}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                      <ChevronDown\r\n                        className={`w-4 h-4 sm:w-5 sm:h-5 text-gray-400 flex-shrink-0 transition-transform ${\r\n                          expandedProofId === proof.id ? \"rotate-180\" : \"\"\r\n                        }`}\r\n                      />\r\n                    </button>\r\n\r\n                    {/* Proof Details - Expanded */}\r\n                    {expandedProofId === proof.id && (\r\n                      <div className=\"border-t border-gray-200 px-3 sm:px-6 py-4 sm:py-6 bg-gray-50 space-y-4 sm:space-y-6\">\r\n                        {/* File Preview Section */}\r\n                        {proof.file_url && (\r\n                          <div className=\"bg-white rounded border border-gray-200 p-3 sm:p-4\">\r\n                            <h4 className=\"text-xs sm:text-sm font-semibold text-gray-900 mb-2 sm:mb-3 flex items-center gap-2\">\r\n                              <Download className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                              Attached File\r\n                            </h4>\r\n                            {proof.file_url\r\n                              .toLowerCase()\r\n                              .match(/\\.(jpg|jpeg|png|gif|webp)$/i) ? (\r\n                              <div>\r\n                                <img\r\n                                  src={proof.file_url}\r\n                                  alt=\"Proof preview\"\r\n                                  className=\"w-full max-h-96 object-contain rounded border border-gray-200 mb-2 sm:mb-3\"\r\n                                />\r\n                                <a\r\n                                  href={proof.file_url}\r\n                                  download={proof.file_name || \"proof\"}\r\n                                  className=\"inline-flex items-center gap-2 px-3 sm:px-4 py-2 text-xs sm:text-sm bg-blue-600 text-white rounded font-medium hover:bg-blue-700 transition-colors\"\r\n                                >\r\n                                  <Download className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                                  <span className=\"hidden sm:inline\">\r\n                                    Download\r\n                                  </span>\r\n                                  <span className=\"sm:hidden\">DL</span>\r\n                                </a>\r\n                              </div>\r\n                            ) : (\r\n                              <a\r\n                                href={proof.file_url}\r\n                                download={proof.file_name || \"proof\"}\r\n                                className=\"flex items-center gap-2 sm:gap-3 p-3 sm:p-4 bg-blue-50 border border-blue-200 rounded hover:bg-blue-100 transition-colors\"\r\n                              >\r\n                                <FileIcon className=\"w-6 h-6 sm:w-8 sm:h-8 text-blue-600 flex-shrink-0\" />\r\n                                <div className=\"flex-1 min-w-0\">\r\n                                  <p className=\"text-xs sm:text-sm font-medium text-blue-900 truncate\">\r\n                                    {proof.file_name || \"Proof file\"}\r\n                                  </p>\r\n                                  <p className=\"text-xs text-blue-700\">\r\n                                    Click to download\r\n                                  </p>\r\n                                </div>\r\n                                <Download className=\"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 flex-shrink-0\" />\r\n                              </a>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n\r\n                        {/* Comments Section */}\r\n                        {proof.comments && proof.comments.length > 0 && (\r\n                          <div>\r\n                            <h4 className=\"text-xs sm:text-sm font-semibold text-gray-900 mb-2 sm:mb-4 flex items-center gap-2\">\r\n                              <MessageSquare className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                              Comments\r\n                            </h4>\r\n                            <div className=\"space-y-3 sm:space-y-4\">\r\n                              {proof.comments.map((comment) => (\r\n                                <div\r\n                                  key={comment.id}\r\n                                  className=\"bg-white rounded border border-gray-200 p-3 sm:p-4\"\r\n                                >\r\n                                  <div className=\"flex items-start justify-between mb-2\">\r\n                                    <div className=\"flex-1\">\r\n                                      <p className=\"text-xs sm:text-sm font-medium text-gray-900\">\r\n                                        {comment.admin_email ? \"Admin\" : \"You\"}\r\n                                      </p>\r\n                                      <p className=\"text-xs text-gray-500\">\r\n                                        {formatDate(comment.created_at)}\r\n                                      </p>\r\n                                    </div>\r\n                                  </div>\r\n                                  <p className=\"text-xs sm:text-sm text-gray-700 whitespace-pre-wrap\">\r\n                                    {comment.message}\r\n                                  </p>\r\n                                </div>\r\n                              ))}\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n\r\n                        {/* Add Comment Section */}\r\n                        <div className=\"bg-white rounded border border-gray-200 p-3 sm:p-4\">\r\n                          <label className=\"block text-xs sm:text-sm font-medium text-gray-900 mb-2\">\r\n                            Add a Comment\r\n                          </label>\r\n                          <textarea\r\n                            value={commentText[proof.id] || \"\"}\r\n                            onChange={(e) =>\r\n                              setCommentText((prev) => ({\r\n                                ...prev,\r\n                                [proof.id]: e.target.value,\r\n                              }))\r\n                            }\r\n                            placeholder=\"Share your thoughts on this proof...\"\r\n                            className=\"w-full px-2 sm:px-3 py-2 border border-gray-300 rounded-md text-xs sm:text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2 sm:mb-3\"\r\n                            rows={3}\r\n                          />\r\n                          <button\r\n                            onClick={() => handleAddComment(proof.id)}\r\n                            disabled={submittingComment[proof.id]}\r\n                            className=\"inline-flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 text-xs sm:text-sm bg-blue-600 text-white rounded font-medium hover:bg-blue-700 disabled:bg-blue-400 transition-colors\"\r\n                          >\r\n                            <Send className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                            <span className=\"hidden sm:inline\">\r\n                              Post Comment\r\n                            </span>\r\n                            <span className=\"sm:hidden\">Post</span>\r\n                          </button>\r\n                        </div>\r\n\r\n                        {/* Action Buttons */}\r\n                        <div className=\"bg-white rounded border border-gray-200 p-3 sm:p-4\">\r\n                          <div className=\"flex gap-2 sm:gap-3 flex-col sm:flex-row\">\r\n                            <button\r\n                              onClick={() => handleApprove(proof.id)}\r\n                              disabled={submittingAction[proof.id]}\r\n                              className=\"flex-1 flex items-center justify-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 disabled:bg-green-400 transition-colors\"\r\n                            >\r\n                              <CheckCircle2 className=\"w-4 h-4 sm:w-5 sm:h-5\" />\r\n                              <span className=\"hidden sm:inline\">Approve</span>\r\n                              <span className=\"sm:hidden\">OK</span>\r\n                            </button>\r\n                            <button\r\n                              onClick={() => {\r\n                                const denyInput =\r\n                                  commentText[`deny-${proof.id}`];\r\n                                if (!denyInput?.trim()) {\r\n                                  setCommentText((prev) => ({\r\n                                    ...prev,\r\n                                    [`deny-${proof.id}`]:\r\n                                      \"Please update this design\",\r\n                                  }));\r\n                                }\r\n                              }}\r\n                              disabled={submittingAction[proof.id]}\r\n                              className=\"flex-1 flex items-center justify-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 disabled:bg-orange-400 transition-colors\"\r\n                            >\r\n                              <AlertTriangle className=\"w-4 h-4 sm:w-5 sm:h-5\" />\r\n                              <span className=\"hidden sm:inline\">\r\n                                Request Revisions\r\n                              </span>\r\n                              <span className=\"sm:hidden\">Revise</span>\r\n                            </button>\r\n                          </div>\r\n\r\n                          {/* Revision Notes Input */}\r\n                          {commentText[`deny-${proof.id}`] && (\r\n                            <div className=\"mt-3 sm:mt-4\">\r\n                              <label className=\"block text-xs sm:text-sm font-medium text-gray-900 mb-2\">\r\n                                Revision Notes (Optional)\r\n                              </label>\r\n                              <textarea\r\n                                value={commentText[`deny-${proof.id}`] || \"\"}\r\n                                onChange={(e) =>\r\n                                  setCommentText((prev) => ({\r\n                                    ...prev,\r\n                                    [`deny-${proof.id}`]: e.target.value,\r\n                                  }))\r\n                                }\r\n                                placeholder=\"What needs to be changed?\"\r\n                                className=\"w-full px-2 sm:px-3 py-2 border border-gray-300 rounded-md text-xs sm:text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-500 mb-2 sm:mb-3\"\r\n                                rows={3}\r\n                              />\r\n                              <button\r\n                                onClick={() => handleDeny(proof.id)}\r\n                                disabled={submittingAction[proof.id]}\r\n                                className=\"w-full px-3 sm:px-4 py-2 text-xs sm:text-sm bg-orange-600 text-white rounded font-medium hover:bg-orange-700 disabled:bg-orange-400 transition-colors\"\r\n                              >\r\n                                <span className=\"hidden sm:inline\">\r\n                                  Confirm Request for Revisions\r\n                                </span>\r\n                                <span className=\"sm:hidden\">Confirm</span>\r\n                              </button>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Reviewed Proofs Section */}\r\n          {reviewedProofs.length > 0 && (\r\n            <div>\r\n              <div className=\"mb-3 sm:mb-4\">\r\n                <h2 className=\"text-base sm:text-lg font-semibold text-gray-900\">\r\n                  Reviewed Proofs ({reviewedProofs.length})\r\n                </h2>\r\n              </div>\r\n              <div className=\"space-y-3 sm:space-y-4\">\r\n                {reviewedProofs.map((proof) => (\r\n                  <div\r\n                    key={proof.id}\r\n                    className=\"bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow\"\r\n                  >\r\n                    {/* Proof Header */}\r\n                    <button\r\n                      onClick={() =>\r\n                        setExpandedProofId(\r\n                          expandedProofId === proof.id ? null : proof.id,\r\n                        )\r\n                      }\r\n                      className=\"w-full px-3 sm:px-6 py-3 sm:py-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4 hover:bg-gray-50 transition-colors text-left\"\r\n                    >\r\n                      <div className=\"flex items-start sm:items-center gap-2 sm:gap-4 flex-1 min-w-0\">\r\n                        <div className=\"bg-gray-100 p-2 sm:p-3 rounded-lg flex-shrink-0\">\r\n                          {getStatusIcon(proof.status)}\r\n                        </div>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-3 mb-1 sm:mb-2\">\r\n                            <h3 className=\"text-base sm:text-lg font-semibold text-gray-900\">\r\n                              Order {formatOrderNumber(proof.order_id)}\r\n                            </h3>\r\n                            <span\r\n                              className={`px-2 sm:px-3 py-1 rounded-full text-xs font-medium w-fit ${getStatusColor(proof.status)}`}\r\n                            >\r\n                              {getStatusLabel(proof.status)}\r\n                            </span>\r\n                          </div>\r\n                          <p className=\"text-xs sm:text-sm text-gray-600 truncate\">\r\n                            {proof.description || \"Design proof\"}\r\n                          </p>\r\n                          {proof.file_name && (\r\n                            <p className=\"text-xs text-blue-600 mt-1 flex items-center gap-1 truncate\">\r\n                              <FileIcon className=\"w-3 h-3 flex-shrink-0\" />\r\n                              <span className=\"truncate\">\r\n                                File: {proof.file_name}\r\n                              </span>\r\n                            </p>\r\n                          )}\r\n                          <p className=\"text-xs text-gray-500 mt-1\">\r\n                            Last updated on {formatDate(proof.updated_at)}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                      <ChevronDown\r\n                        className={`w-4 h-4 sm:w-5 sm:h-5 text-gray-400 flex-shrink-0 transition-transform ${\r\n                          expandedProofId === proof.id ? \"rotate-180\" : \"\"\r\n                        }`}\r\n                      />\r\n                    </button>\r\n\r\n                    {/* Proof Details - Expanded */}\r\n                    {expandedProofId === proof.id && (\r\n                      <div className=\"border-t border-gray-200 px-3 sm:px-6 py-4 sm:py-6 bg-gray-50 space-y-4 sm:space-y-6\">\r\n                        {/* File Preview Section */}\r\n                        {proof.file_url && (\r\n                          <div className=\"bg-white rounded border border-gray-200 p-3 sm:p-4\">\r\n                            <h4 className=\"text-xs sm:text-sm font-semibold text-gray-900 mb-2 sm:mb-3 flex items-center gap-2\">\r\n                              <Download className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                              Attached File\r\n                            </h4>\r\n                            {proof.file_url\r\n                              .toLowerCase()\r\n                              .match(/\\.(jpg|jpeg|png|gif|webp)$/i) ? (\r\n                              <div>\r\n                                <img\r\n                                  src={proof.file_url}\r\n                                  alt=\"Proof preview\"\r\n                                  className=\"w-full max-h-96 object-contain rounded border border-gray-200 mb-2 sm:mb-3\"\r\n                                />\r\n                                <a\r\n                                  href={proof.file_url}\r\n                                  download={proof.file_name || \"proof\"}\r\n                                  className=\"inline-flex items-center gap-2 px-3 sm:px-4 py-2 text-xs sm:text-sm bg-blue-600 text-white rounded font-medium hover:bg-blue-700 transition-colors\"\r\n                                >\r\n                                  <Download className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                                  <span className=\"hidden sm:inline\">\r\n                                    Download\r\n                                  </span>\r\n                                  <span className=\"sm:hidden\">DL</span>\r\n                                </a>\r\n                              </div>\r\n                            ) : (\r\n                              <a\r\n                                href={proof.file_url}\r\n                                download={proof.file_name || \"proof\"}\r\n                                className=\"flex items-center gap-2 sm:gap-3 p-3 sm:p-4 bg-blue-50 border border-blue-200 rounded hover:bg-blue-100 transition-colors\"\r\n                              >\r\n                                <FileIcon className=\"w-6 h-6 sm:w-8 sm:h-8 text-blue-600 flex-shrink-0\" />\r\n                                <div className=\"flex-1 min-w-0\">\r\n                                  <p className=\"text-xs sm:text-sm font-medium text-blue-900 truncate\">\r\n                                    {proof.file_name || \"Proof file\"}\r\n                                  </p>\r\n                                  <p className=\"text-xs text-blue-700\">\r\n                                    Click to download\r\n                                  </p>\r\n                                </div>\r\n                                <Download className=\"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 flex-shrink-0\" />\r\n                              </a>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n\r\n                        {/* Status Info */}\r\n                        <div className=\"p-3 sm:p-4 bg-white rounded border border-gray-200\">\r\n                          <p className=\"text-xs sm:text-sm font-medium text-gray-900 mb-2\">\r\n                            Status\r\n                          </p>\r\n                          <p className=\"text-xs sm:text-sm text-gray-600\">\r\n                            {proof.status === \"approved\"\r\n                              ? \"âœ“ You approved this proof\"\r\n                              : proof.status === \"revisions_requested\"\r\n                                ? \"Revisions have been requested\"\r\n                                : \"This proof was denied\"}\r\n                          </p>\r\n                          {proof.revision_notes && (\r\n                            <div className=\"mt-2 sm:mt-3 p-2 sm:p-3 bg-orange-50 rounded border border-orange-200\">\r\n                              <p className=\"text-xs font-medium text-orange-900 mb-1\">\r\n                                Revision Notes:\r\n                              </p>\r\n                              <p className=\"text-xs sm:text-sm text-orange-800 whitespace-pre-wrap\">\r\n                                {proof.revision_notes}\r\n                              </p>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n\r\n                        {/* Comments Section */}\r\n                        {proof.comments && proof.comments.length > 0 && (\r\n                          <div>\r\n                            <h4 className=\"text-sm font-semibold text-gray-900 mb-4 flex items-center gap-2\">\r\n                              <MessageSquare className=\"w-4 h-4\" />\r\n                              Comments\r\n                            </h4>\r\n                            <div className=\"space-y-4\">\r\n                              {proof.comments.map((comment) => (\r\n                                <div\r\n                                  key={comment.id}\r\n                                  className=\"bg-white rounded border border-gray-200 p-4\"\r\n                                >\r\n                                  <div className=\"flex items-start justify-between mb-2\">\r\n                                    <div className=\"flex-1\">\r\n                                      <p className=\"text-sm font-medium text-gray-900\">\r\n                                        {comment.admin_email ? \"Admin\" : \"You\"}\r\n                                      </p>\r\n                                      <p className=\"text-xs text-gray-500\">\r\n                                        {formatDate(comment.created_at)}\r\n                                      </p>\r\n                                    </div>\r\n                                  </div>\r\n                                  <p className=\"text-sm text-gray-700 whitespace-pre-wrap\">\r\n                                    {comment.message}\r\n                                  </p>\r\n                                </div>\r\n                              ))}\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Load More Button */}\r\n          {pagination && pagination.hasMore && (\r\n            <div className=\"mt-8 flex justify-center\">\r\n              <button\r\n                onClick={() => fetchProofs(currentPage + 1, true)}\r\n                disabled={isLoadingMore}\r\n                className=\"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:bg-gray-400 transition-colors flex items-center gap-2\"\r\n              >\r\n                {isLoadingMore ? (\r\n                  <>\r\n                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\r\n                    <span className=\"text-sm\">Loading...</span>\r\n                  </>\r\n                ) : (\r\n                  <span className=\"text-sm\">Load More Proofs</span>\r\n                )}\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </main>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}