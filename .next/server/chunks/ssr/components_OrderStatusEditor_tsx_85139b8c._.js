module.exports=[51661,56748,95694,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(34075),e=a.i(28193);let f=[{value:"pending",label:"Pending",color:"orange"},{value:"processing",label:"Processing",color:"yellow"},{value:"printing",label:"Printing",color:"purple"},{value:"cutting",label:"Cutting",color:"cyan"},{value:"preparing for shipping",label:"Preparing for Shipping",color:"blue"},{value:"in transit",label:"In Transit",color:"blue"},{value:"shipped",label:"Shipped",color:"green"},{value:"delivered",label:"Delivered",color:"cyan"},{value:"cancelled",label:"Cancelled",color:"red"}];function g({orderId:a,currentStatus:g,currentTrackingNumber:h,currentTrackingCarrier:i,currentTrackingUrl:j,onClose:k,onSuccess:l}){let[m,n]=(0,c.useState)(g),[o,p]=(0,c.useState)(h||""),[q,r]=(0,c.useState)(i||""),[s,t]=(0,c.useState)(j||""),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(!1),A=async b=>{b.preventDefault(),x(""),v(!0);try{let b=localStorage.getItem("authToken");if(!b)return void x("Authentication required");let c=await fetch(`/api/admin/orders/${a}/status`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({status:m,tracking_number:o||void 0,tracking_carrier:q||void 0,tracking_url:s||void 0})});if(!c.ok){let a=await c.json();throw Error(a.error||"Failed to update order")}z(!0),setTimeout(()=>{l(),k()},1e3)}catch(a){x(a instanceof Error?a.message:"An error occurred")}finally{v(!1)}};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-gray-900 border border-white/10 rounded-lg max-w-md w-full shadow-xl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold text-white",children:["Update Order #",a]}),(0,b.jsx)("button",{onClick:k,className:"text-white/60 hover:text-white transition-colors",children:(0,b.jsx)(d.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("form",{onSubmit:A,className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Order Status"}),(0,b.jsx)("select",{value:m,onChange:a=>n(a.target.value),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-green-500/50",children:f.map(a=>(0,b.jsx)("option",{value:a.value,className:"bg-gray-900",children:a.label},a.value))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Tracking Number"}),(0,b.jsx)("input",{type:"text",value:o,onChange:a=>p(a.target.value),placeholder:"e.g., 1Z999AA10123456784",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 text-sm focus:outline-none focus:ring-2 focus:ring-green-500/50"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Carrier"}),(0,b.jsxs)("select",{value:q,onChange:a=>r(a.target.value),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-green-500/50",children:[(0,b.jsx)("option",{value:"",children:"Select a carrier..."}),(0,b.jsx)("option",{value:"UPS",children:"UPS"}),(0,b.jsx)("option",{value:"FedEx",children:"FedEx"}),(0,b.jsx)("option",{value:"DHL",children:"DHL"}),(0,b.jsx)("option",{value:"USPS",children:"USPS"}),(0,b.jsx)("option",{value:"Canada Post",children:"Canada Post"}),(0,b.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Tracking URL"}),(0,b.jsx)("input",{type:"url",value:s,onChange:a=>t(a.target.value),placeholder:"https://tracking.example.com/...",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 text-sm focus:outline-none focus:ring-2 focus:ring-green-500/50"})]}),w&&(0,b.jsx)("div",{className:"p-3 bg-red-500/20 border border-red-500/30 rounded text-red-200 text-sm",children:w}),y&&(0,b.jsx)("div",{className:"p-3 bg-green-500/20 border border-green-500/30 rounded text-green-200 text-sm",children:"Order updated successfully!"}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)("button",{type:"button",onClick:k,className:"flex-1 px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white hover:bg-white/10 transition-colors font-medium",children:"Cancel"}),(0,b.jsxs)("button",{type:"submit",disabled:u,className:"flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 disabled:opacity-50 rounded-lg text-white font-medium transition-colors flex items-center justify-center gap-2",children:[u&&(0,b.jsx)(e.Loader,{className:"w-4 h-4 animate-spin"}),u?"Updating...":"Update Order"]})]})]})]})})}function h({orderId:a,currentAddress:f,onClose:g,onSuccess:h}){let[i,j]=(0,c.useState)(f?.first_name||""),[k,l]=(0,c.useState)(f?.last_name||""),[m,n]=(0,c.useState)(f?.street_1||""),[o,p]=(0,c.useState)(f?.street_2||""),[q,r]=(0,c.useState)(f?.city||""),[s,t]=(0,c.useState)(f?.state_or_province||""),[u,v]=(0,c.useState)(f?.postal_code||""),[w,x]=(0,c.useState)(f?.country_iso2||""),[y,z]=(0,c.useState)(f?.phone||""),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)(!1),G=async b=>{if(b.preventDefault(),D(""),!i||!k||!m||!q||!s||!u||!w)return void D("Please fill in all required fields");B(!0);try{let b=localStorage.getItem("authToken");if(!b)return void D("Authentication required");let c=await fetch(`/api/admin/orders/${a}/shipping-address`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({first_name:i,last_name:k,street_1:m,street_2:o||void 0,city:q,state_or_province:s,postal_code:u,country_iso2:w,phone:y||void 0})}),d=await c.json();if(!c.ok)throw Error(d.error||"Failed to update shipping address");F(!0),setTimeout(()=>{h(),g()},1e3)}catch(a){D(a instanceof Error?a.message:"An error occurred")}finally{B(!1)}};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-gray-900 border border-white/10 rounded-lg max-w-2xl w-full shadow-xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-white/10 sticky top-0 bg-gray-900",children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold text-white",children:["Edit Shipping Address - Order #",a]}),(0,b.jsx)("button",{onClick:g,className:"text-white/60 hover:text-white transition-colors",children:(0,b.jsx)(d.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("form",{onSubmit:G,className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"First Name *"}),(0,b.jsx)("input",{type:"text",value:i,onChange:a=>j(a.target.value),placeholder:"John",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 text-sm focus:outline-none focus:ring-2 focus:ring-green-500/50"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Last Name *"}),(0,b.jsx)("input",{type:"text",value:k,onChange:a=>l(a.target.value),placeholder:"Doe",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 text-sm focus:outline-none focus:ring-2 focus:ring-green-500/50"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Street Address *"}),(0,b.jsx)("input",{type:"text",value:m,onChange:a=>n(a.target.value),placeholder:"123 Main Street",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 text-sm focus:outline-none focus:ring-2 focus:ring-green-500/50"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Apartment, Suite, etc."}),(0,b.jsx)("input",{type:"text",value:o,onChange:a=>p(a.target.value),placeholder:"Apt 4B (Optional)",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 text-sm focus:outline-none focus:ring-2 focus:ring-green-500/50"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"City *"}),(0,b.jsx)("input",{type:"text",value:q,onChange:a=>r(a.target.value),placeholder:"New York",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 text-sm focus:outline-none focus:ring-2 focus:ring-green-500/50"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"State/Province *"}),(0,b.jsx)("input",{type:"text",value:s,onChange:a=>t(a.target.value),placeholder:"NY",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 text-sm focus:outline-none focus:ring-2 focus:ring-green-500/50"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Postal Code *"}),(0,b.jsx)("input",{type:"text",value:u,onChange:a=>v(a.target.value),placeholder:"10001",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 text-sm focus:outline-none focus:ring-2 focus:ring-green-500/50"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Country Code *"}),(0,b.jsx)("input",{type:"text",value:w,onChange:a=>x(a.target.value.toUpperCase()),placeholder:"US",maxLength:2,className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 text-sm focus:outline-none focus:ring-2 focus:ring-green-500/50 uppercase"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Phone"}),(0,b.jsx)("input",{type:"tel",value:y,onChange:a=>z(a.target.value),placeholder:"+1 (555) 123-4567",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40 text-sm focus:outline-none focus:ring-2 focus:ring-green-500/50"})]}),C&&(0,b.jsx)("div",{className:"p-3 bg-red-500/20 border border-red-500/30 rounded text-red-200 text-sm",children:C}),E&&(0,b.jsx)("div",{className:"p-3 bg-green-500/20 border border-green-500/30 rounded text-green-200 text-sm",children:"Shipping address updated successfully!"}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)("button",{type:"button",onClick:g,className:"flex-1 px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white hover:bg-white/10 transition-colors font-medium",children:"Cancel"}),(0,b.jsxs)("button",{type:"submit",disabled:A,className:"flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 disabled:opacity-50 rounded-lg text-white font-medium transition-colors flex items-center justify-center gap-2",children:[A&&(0,b.jsx)(e.Loader,{className:"w-4 h-4 animate-spin"}),A?"Saving...":"Save Address"]})]})]})]})})}a.s(["default",()=>g],51661),a.s(["default",()=>h],56748);var i=a.i(14548),j=a.i(96221);function k({itemId:a,orderId:e,productName:f,options:g,onClose:h,onSuccess:k}){let[l,m]=(0,c.useState)(g.map(a=>({...a,price:a.price||a.modifier_price||0}))),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),r=async()=>{q(null),o(!0);try{let b=localStorage.getItem("authToken");if(!b)throw Error("No authentication token found");let c={orderId:e,itemId:a,options:l.map(a=>({option_id:a.option_id,option_name:a.option_name||a.name,option_value:a.option_value||a.value,price:a.price}))};console.log("Sending option update payload:",c);let d=await fetch("/api/admin/update-order-item-options",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify(c)}),f=await d.json().catch(a=>(console.error("Failed to parse response:",a),{}));if(console.log("Response status:",d.status),console.log("Response data:",JSON.stringify(f,null,2)),!d.ok)throw console.error("Update failed:",{status:d.status,statusText:d.statusText,data:f}),Error(f.error||`Failed to update option costs (${d.status})`);console.log("Successfully updated options:",f),k(),h()}catch(b){let a=b instanceof Error?b.message:"An error occurred";console.error("Option save error:",a),q(a)}finally{o(!1)}};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"sticky top-0 flex items-center justify-between p-6 border-b border-gray-200 bg-white",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Edit Option Costs"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:f})]}),(0,b.jsx)("button",{onClick:h,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,b.jsx)(d.X,{className:"w-5 h-5 text-gray-600"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-4",children:[p&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,b.jsx)("p",{className:"text-sm text-red-700",children:p})}),l.length>0?(0,b.jsx)("div",{className:"space-y-4",children:l.map((a,c)=>{let d=a.option_name||a.name||`Option ${c+1}`,e=a.option_value||a.value||"",f=a.price||0;return(0,b.jsx)("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2",children:"Option Name"}),(0,b.jsxs)("div",{className:"bg-white p-3 rounded border border-gray-200",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:d}),e&&(0,b.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:e})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2",children:"Additional Cost ($)"}),(0,b.jsx)("input",{type:"number",step:"0.01",min:"0",value:f,onChange:a=>{let b,d;return b=parseFloat(a.target.value)||0,void((d=[...l])[c].price=b,m(d))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]})},c)})}):(0,b.jsx)("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"No options to edit"})}),l.length>0&&(0,b.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Total Additional Cost:"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["$",l.reduce((a,b)=>a+(b.price||0),0).toFixed(2)]})]})]}),(0,b.jsxs)("div",{className:"sticky bottom-0 flex gap-3 p-6 border-t border-gray-200 bg-gray-50",children:[(0,b.jsx)("button",{onClick:h,className:"flex-1 px-4 py-2 text-gray-700 font-medium rounded-lg border border-gray-300 hover:bg-gray-100 transition-colors",children:"Cancel"}),(0,b.jsx)("button",{onClick:r,disabled:n,className:"flex-1 inline-flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Loader2,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Save,{className:"w-4 h-4"}),"Save Changes"]})})]})]})})}a.s(["default",()=>k],95694)}];

//# sourceMappingURL=components_OrderStatusEditor_tsx_85139b8c._.js.map