{"version":3,"sources":["../../../../components/dashboard/Proofs.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport {\r\n    CheckCircle2,\r\n    XCircle,\r\n    Clock,\r\n    MessageSquare,\r\n    ArrowRight,\r\n    AlertCircle,\r\n    ChevronDown,\r\n    Send,\r\n    AlertTriangle,\r\n    Bell,\r\n    Download,\r\n    FileIcon,\r\n} from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { toast } from \"sonner\";\r\nimport { formatOrderNumber } from \"@/lib/order-number\";\r\n\r\ninterface ProofComment {\r\n    id: string;\r\n    proof_id: string;\r\n    customer_id?: number;\r\n    admin_id?: string;\r\n    admin_email?: string;\r\n    message: string;\r\n    created_at: string;\r\n}\r\n\r\ninterface Proof {\r\n    id: string;\r\n    order_id: number;\r\n    customer_id: number;\r\n    description?: string;\r\n    file_url?: string;\r\n    file_name?: string;\r\n    status: \"pending\" | \"approved\" | \"denied\" | \"revisions_requested\";\r\n    revision_notes?: string;\r\n    created_at: string;\r\n    updated_at: string;\r\n    comments?: ProofComment[];\r\n}\r\n\r\ninterface PaginationInfo {\r\n    currentPage: number;\r\n    pageSize: number;\r\n    totalItems: number;\r\n    totalPages: number;\r\n    hasMore: boolean;\r\n}\r\n\r\ninterface ProofsResponse {\r\n    success: boolean;\r\n    proofs: Proof[];\r\n    unreadNotifications: number;\r\n    pagination?: PaginationInfo;\r\n}\r\n\r\ninterface ProofDetailResponse {\r\n    success: boolean;\r\n    proof: Proof & { comments: ProofComment[] };\r\n}\r\n\r\nexport default function Proofs() {\r\n    const router = useRouter();\r\n    const [proofs, setProofs] = useState<Proof[]>([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [error, setError] = useState(\"\");\r\n    const [expandedProofId, setExpandedProofId] = useState<string | null>(null);\r\n    const [unreadCount, setUnreadCount] = useState(0);\r\n    const [commentText, setCommentText] = useState<Record<string, string>>({});\r\n    const [submittingComment, setSubmittingComment] = useState<\r\n        Record<string, boolean>\r\n    >({});\r\n    const [submittingAction, setSubmittingAction] = useState<\r\n        Record<string, boolean>\r\n    >({});\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [pagination, setPagination] = useState<PaginationInfo | null>(null);\r\n    const [isLoadingMore, setIsLoadingMore] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const token = localStorage.getItem(\"authToken\");\r\n\r\n        if (!token) {\r\n            router.push(\"/login\");\r\n            return;\r\n        }\r\n\r\n        fetchProofs();\r\n    }, [router]);\r\n\r\n    const fetchProofs = async (page: number = 1, append: boolean = false) => {\r\n        try {\r\n            if (!append) {\r\n                setIsLoading(true);\r\n            } else {\r\n                setIsLoadingMore(true);\r\n            }\r\n            setError(\"\");\r\n\r\n            const token = localStorage.getItem(\"authToken\");\r\n            const response = await fetch(`/api/proofs?page=${page}`, {\r\n                headers: { Authorization: `Bearer ${token}` },\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const errorData = await response.json();\r\n                throw new Error(errorData.error || \"Failed to fetch proofs\");\r\n            }\r\n\r\n            const data: ProofsResponse = await response.json();\r\n\r\n            if (append) {\r\n                setProofs((prev) => [...prev, ...(data.proofs || [])]);\r\n            } else {\r\n                setProofs(data.proofs || []);\r\n            }\r\n\r\n            setUnreadCount(data.unreadNotifications || 0);\r\n            setPagination(data.pagination || null);\r\n            setCurrentPage(page);\r\n        } catch (err) {\r\n            const message =\r\n                err instanceof Error ? err.message : \"Failed to load proofs\";\r\n            setError(message);\r\n        } finally {\r\n            setIsLoading(false);\r\n            setIsLoadingMore(false);\r\n        }\r\n    };\r\n\r\n    const fetchProofDetail = async (proofId: string) => {\r\n        try {\r\n            const token = localStorage.getItem(\"authToken\");\r\n            const response = await fetch(`/api/proofs/${proofId}`, {\r\n                headers: { Authorization: `Bearer ${token}` },\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error(\"Failed to fetch proof details\");\r\n            }\r\n\r\n            const data: ProofDetailResponse = await response.json();\r\n            setProofs((prev) => prev.map((p) => (p.id === proofId ? data.proof : p)));\r\n        } catch (err) {\r\n            console.error(\"Error fetching proof detail:\", err);\r\n        }\r\n    };\r\n\r\n    const handleApprove = async (proofId: string) => {\r\n        try {\r\n            setSubmittingAction((prev) => ({ ...prev, [proofId]: true }));\r\n            const token = localStorage.getItem(\"authToken\");\r\n\r\n            const response = await fetch(`/api/proofs/${proofId}/approve`, {\r\n                method: \"POST\",\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                    \"Content-Type\": \"application/json\",\r\n                },\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const errorData = await response.json();\r\n                throw new Error(errorData.error || \"Failed to approve proof\");\r\n            }\r\n\r\n            toast.success(\"Proof approved! Admin has been notified.\");\r\n            fetchProofs();\r\n        } catch (err) {\r\n            const message =\r\n                err instanceof Error ? err.message : \"Failed to approve proof\";\r\n            toast.error(message);\r\n        } finally {\r\n            setSubmittingAction((prev) => ({ ...prev, [proofId]: false }));\r\n        }\r\n    };\r\n\r\n    const handleDeny = async (proofId: string) => {\r\n        try {\r\n            setSubmittingAction((prev) => ({ ...prev, [proofId]: true }));\r\n            const token = localStorage.getItem(\"authToken\");\r\n            const revisionNotes = commentText[`deny-${proofId}`] || \"\";\r\n\r\n            const response = await fetch(`/api/proofs/${proofId}/deny`, {\r\n                method: \"POST\",\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                    \"Content-Type\": \"application/json\",\r\n                },\r\n                body: JSON.stringify({ revisionNotes }),\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const errorData = await response.json();\r\n                throw new Error(errorData.error || \"Failed to deny proof\");\r\n            }\r\n\r\n            toast.success(\"Revision requested. Admin will see your feedback.\");\r\n            setCommentText((prev) => ({ ...prev, [`deny-${proofId}`]: \"\" }));\r\n            fetchProofs();\r\n        } catch (err) {\r\n            const message =\r\n                err instanceof Error ? err.message : \"Failed to deny proof\";\r\n            toast.error(message);\r\n        } finally {\r\n            setSubmittingAction((prev) => ({ ...prev, [proofId]: false }));\r\n        }\r\n    };\r\n\r\n    const handleAddComment = async (proofId: string) => {\r\n        try {\r\n            const message = commentText[proofId]?.trim();\r\n            if (!message) {\r\n                toast.error(\"Please enter a comment\");\r\n                return;\r\n            }\r\n\r\n            setSubmittingComment((prev) => ({ ...prev, [proofId]: true }));\r\n            const token = localStorage.getItem(\"authToken\");\r\n\r\n            const response = await fetch(`/api/proofs/${proofId}/comments`, {\r\n                method: \"POST\",\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                    \"Content-Type\": \"application/json\",\r\n                },\r\n                body: JSON.stringify({ message }),\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error(\"Failed to add comment\");\r\n            }\r\n\r\n            setCommentText((prev) => ({ ...prev, [proofId]: \"\" }));\r\n            toast.success(\"Comment added\");\r\n            fetchProofDetail(proofId);\r\n        } catch (err) {\r\n            const message =\r\n                err instanceof Error ? err.message : \"Failed to add comment\";\r\n            toast.error(message);\r\n        } finally {\r\n            setSubmittingComment((prev) => ({ ...prev, [proofId]: false }));\r\n        }\r\n    };\r\n\r\n    const getStatusIcon = (status: string) => {\r\n        switch (status) {\r\n            case \"approved\":\r\n                return <CheckCircle2 className=\"w-6 h-6 text-green-600\" />;\r\n            case \"denied\":\r\n            case \"revisions_requested\":\r\n                return <AlertTriangle className=\"w-6 h-6 text-orange-600\" />;\r\n            case \"pending\":\r\n            default:\r\n                return <Clock className=\"w-6 h-6 text-blue-600\" />;\r\n        }\r\n    };\r\n\r\n    const getStatusColor = (status: string) => {\r\n        switch (status) {\r\n            case \"approved\":\r\n                return \"text-green-600 bg-green-50\";\r\n            case \"denied\":\r\n            case \"revisions_requested\":\r\n                return \"text-orange-600 bg-orange-50\";\r\n            case \"pending\":\r\n            default:\r\n                return \"text-blue-600 bg-blue-50\";\r\n        }\r\n    };\r\n\r\n    const getStatusLabel = (status: string) => {\r\n        switch (status) {\r\n            case \"approved\":\r\n                return \"Approved\";\r\n            case \"denied\":\r\n                return \"Denied\";\r\n            case \"revisions_requested\":\r\n                return \"Revisions Requested\";\r\n            case \"pending\":\r\n            default:\r\n                return \"Pending Review\";\r\n        }\r\n    };\r\n\r\n    const formatDate = (dateString: string) => {\r\n        return new Date(dateString).toLocaleDateString(\"en-US\", {\r\n            year: \"numeric\",\r\n            month: \"short\",\r\n            day: \"numeric\",\r\n            hour: \"2-digit\",\r\n            minute: \"2-digit\",\r\n        });\r\n    };\r\n\r\n    const pendingProofs = proofs.filter((p) => p.status === \"pending\");\r\n    const reviewedProofs = proofs.filter((p) => p.status !== \"pending\");\r\n    const pendingProofsCount = pendingProofs.length;\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"flex justify-center items-center h-64\">\r\n                <div className=\"text-gray-600 text-lg\">\r\n                    Loading your proofs...\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"bg-white rounded-lg p-4 sm:p-6 min-h-screen\">\r\n            {/* Header */}\r\n            <div className=\"mb-6 sm:mb-8\">\r\n                <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-3 sm:gap-4\">\r\n                    <div>\r\n                        <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900\">\r\n                            Proofs\r\n                        </h1>\r\n                        <p className=\"text-xs sm:text-sm text-gray-600 mt-1 sm:mt-2\">\r\n                            Review and approve design proofs for your orders\r\n                        </p>\r\n                    </div>\r\n                    {pendingProofsCount > 0 && (\r\n                        <div className=\"flex items-center gap-2 bg-blue-50 border border-blue-200 rounded-lg px-3 sm:px-4 py-2 flex-shrink-0 text-xs sm:text-sm\">\r\n                            <Bell className=\"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 flex-shrink-0\" />\r\n                            <span className=\"font-medium text-blue-900\">\r\n                                {pendingProofsCount}{\" \"}\r\n                                {pendingProofsCount === 1 ? \"proof\" : \"proofs\"} awaiting\r\n                            </span>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Error Message */}\r\n            {error && (\r\n                <div className=\"mb-6 bg-red-50 border border-red-200 rounded-lg p-3 sm:p-4 flex gap-2 sm:gap-3\">\r\n                    <AlertCircle className=\"w-4 h-4 sm:w-5 sm:h-5 text-red-600 flex-shrink-0 mt-0.5\" />\r\n                    <p className=\"text-xs sm:text-sm text-red-800\">{error}</p>\r\n                </div>\r\n            )}\r\n\r\n            {/* Empty State */}\r\n            {proofs.length === 0 && !error && (\r\n                <div className=\"bg-white rounded-lg border border-gray-200 p-8 sm:p-12 text-center\">\r\n                    <Clock className=\"w-10 h-10 sm:w-12 sm:h-12 text-gray-400 mx-auto mb-3 sm:mb-4\" />\r\n                    <h2 className=\"text-lg sm:text-xl font-semibold text-gray-900 mb-2\">\r\n                        No Proofs Yet\r\n                    </h2>\r\n                    <p className=\"text-xs sm:text-sm text-gray-600\">\r\n                        Your design proofs will appear here once the admin sends them\r\n                        for your review.\r\n                    </p>\r\n                </div>\r\n            )}\r\n\r\n            {/* Pending Proofs Section */}\r\n            {pendingProofs.length > 0 && (\r\n                <div className=\"mb-8\">\r\n                    <div className=\"mb-3 sm:mb-4\">\r\n                        <h2 className=\"text-base sm:text-lg font-semibold text-gray-900 flex items-center gap-2\">\r\n                            <Clock className=\"w-4 h-4 sm:w-5 sm:h-5 text-blue-600\" />\r\n                            Awaiting Your Review ({pendingProofs.length})\r\n                        </h2>\r\n                    </div>\r\n                    <div className=\"space-y-3 sm:space-y-4\">\r\n                        {pendingProofs.map((proof) => (\r\n                            <div\r\n                                key={proof.id}\r\n                                className=\"bg-white rounded-lg border border-blue-200 overflow-hidden hover:shadow-lg transition-shadow\"\r\n                            >\r\n                                {/* Proof Header */}\r\n                                <button\r\n                                    onClick={() =>\r\n                                        setExpandedProofId(\r\n                                            expandedProofId === proof.id ? null : proof.id,\r\n                                        )\r\n                                    }\r\n                                    className=\"w-full px-3 sm:px-6 py-3 sm:py-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4 hover:bg-blue-50 transition-colors text-left\"\r\n                                >\r\n                                    <div className=\"flex items-start sm:items-center gap-2 sm:gap-4 flex-1 min-w-0\">\r\n                                        <div className=\"bg-blue-100 p-2 sm:p-3 rounded-lg flex-shrink-0\">\r\n                                            {getStatusIcon(proof.status)}\r\n                                        </div>\r\n                                        <div className=\"flex-1 min-w-0\">\r\n                                            <div className=\"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-3 mb-1 sm:mb-2\">\r\n                                                <h3 className=\"text-base sm:text-lg font-semibold text-gray-900\">\r\n                                                    Order {formatOrderNumber(proof.order_id)}\r\n                                                </h3>\r\n                                                <span\r\n                                                    className={`px-2 sm:px-3 py-1 rounded-full text-xs font-medium w-fit ${getStatusColor(proof.status)}`}\r\n                                                >\r\n                                                    {getStatusLabel(proof.status)}\r\n                                                </span>\r\n                                            </div>\r\n                                            <p className=\"text-xs sm:text-sm text-gray-600 truncate\">\r\n                                                {proof.description ||\r\n                                                    \"Design proof ready for your review\"}\r\n                                            </p>\r\n                                            {proof.file_name && (\r\n                                                <p className=\"text-xs text-blue-600 mt-1 flex items-center gap-1 truncate\">\r\n                                                    <FileIcon className=\"w-3 h-3 flex-shrink-0\" />\r\n                                                    <span className=\"truncate\">\r\n                                                        File: {proof.file_name}\r\n                                                    </span>\r\n                                                </p>\r\n                                            )}\r\n                                            <p className=\"text-xs text-gray-500 mt-1\">\r\n                                                Sent on {formatDate(proof.created_at)}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <ChevronDown\r\n                                        className={`w-4 h-4 sm:w-5 sm:h-5 text-gray-400 flex-shrink-0 transition-transform ${expandedProofId === proof.id ? \"rotate-180\" : \"\"\r\n                                            }`}\r\n                                    />\r\n                                </button>\r\n\r\n                                {/* Proof Details - Expanded */}\r\n                                {expandedProofId === proof.id && (\r\n                                    <div className=\"border-t border-gray-200 px-3 sm:px-6 py-4 sm:py-6 bg-gray-50 space-y-4 sm:space-y-6\">\r\n                                        {/* File Preview Section */}\r\n                                        {proof.file_url && (\r\n                                            <div className=\"bg-white rounded border border-gray-200 p-3 sm:p-4\">\r\n                                                <h4 className=\"text-xs sm:text-sm font-semibold text-gray-900 mb-2 sm:mb-3 flex items-center gap-2\">\r\n                                                    <Download className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                                                    Attached File\r\n                                                </h4>\r\n                                                {proof.file_url\r\n                                                    .toLowerCase()\r\n                                                    .match(/\\.(jpg|jpeg|png|gif|webp)$/i) ? (\r\n                                                    <div>\r\n                                                        <img\r\n                                                            src={proof.file_url}\r\n                                                            alt=\"Proof preview\"\r\n                                                            className=\"w-full max-h-96 object-contain rounded border border-gray-200 mb-2 sm:mb-3\"\r\n                                                        />\r\n                                                        <a\r\n                                                            href={proof.file_url}\r\n                                                            download={proof.file_name || \"proof\"}\r\n                                                            className=\"inline-flex items-center gap-2 px-3 sm:px-4 py-2 text-xs sm:text-sm bg-blue-600 text-white rounded font-medium hover:bg-blue-700 transition-colors\"\r\n                                                        >\r\n                                                            <Download className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                                                            <span className=\"hidden sm:inline\">\r\n                                                                Download\r\n                                                            </span>\r\n                                                            <span className=\"sm:hidden\">DL</span>\r\n                                                        </a>\r\n                                                    </div>\r\n                                                ) : (\r\n                                                    <a\r\n                                                        href={proof.file_url}\r\n                                                        download={proof.file_name || \"proof\"}\r\n                                                        className=\"flex items-center gap-2 sm:gap-3 p-3 sm:p-4 bg-blue-50 border border-blue-200 rounded hover:bg-blue-100 transition-colors\"\r\n                                                    >\r\n                                                        <FileIcon className=\"w-6 h-6 sm:w-8 sm:h-8 text-blue-600 flex-shrink-0\" />\r\n                                                        <div className=\"flex-1 min-w-0\">\r\n                                                            <p className=\"text-xs sm:text-sm font-medium text-blue-900 truncate\">\r\n                                                                {proof.file_name || \"Proof file\"}\r\n                                                            </p>\r\n                                                            <p className=\"text-xs text-blue-700\">\r\n                                                                Click to download\r\n                                                            </p>\r\n                                                        </div>\r\n                                                        <Download className=\"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 flex-shrink-0\" />\r\n                                                    </a>\r\n                                                )}\r\n                                            </div>\r\n                                        )}\r\n\r\n                                        {/* Comments Section */}\r\n                                        {proof.comments && proof.comments.length > 0 && (\r\n                                            <div>\r\n                                                <h4 className=\"text-xs sm:text-sm font-semibold text-gray-900 mb-2 sm:mb-4 flex items-center gap-2\">\r\n                                                    <MessageSquare className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                                                    Comments\r\n                                                </h4>\r\n                                                <div className=\"space-y-3 sm:space-y-4\">\r\n                                                    {proof.comments.map((comment) => (\r\n                                                        <div\r\n                                                            key={comment.id}\r\n                                                            className=\"bg-white rounded border border-gray-200 p-3 sm:p-4\"\r\n                                                        >\r\n                                                            <div className=\"flex items-start justify-between mb-2\">\r\n                                                                <div className=\"flex-1\">\r\n                                                                    <p className=\"text-xs sm:text-sm font-medium text-gray-900\">\r\n                                                                        {comment.admin_email ? \"Admin\" : \"You\"}\r\n                                                                    </p>\r\n                                                                    <p className=\"text-xs text-gray-500\">\r\n                                                                        {formatDate(comment.created_at)}\r\n                                                                    </p>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <p className=\"text-xs sm:text-sm text-gray-700 whitespace-pre-wrap\">\r\n                                                                {comment.message}\r\n                                                            </p>\r\n                                                        </div>\r\n                                                    ))}\r\n                                                </div>\r\n                                            </div>\r\n                                        )}\r\n\r\n                                        {/* Add Comment Section */}\r\n                                        <div className=\"bg-white rounded border border-gray-200 p-3 sm:p-4\">\r\n                                            <label className=\"block text-xs sm:text-sm font-medium text-gray-900 mb-2\">\r\n                                                Add a Comment\r\n                                            </label>\r\n                                            <textarea\r\n                                                value={commentText[proof.id] || \"\"}\r\n                                                onChange={(e) =>\r\n                                                    setCommentText((prev) => ({\r\n                                                        ...prev,\r\n                                                        [proof.id]: e.target.value,\r\n                                                    }))\r\n                                                }\r\n                                                placeholder=\"Share your thoughts on this proof...\"\r\n                                                className=\"w-full px-2 sm:px-3 py-2 border border-gray-300 rounded-md text-xs sm:text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2 sm:mb-3\"\r\n                                                rows={3}\r\n                                            />\r\n                                            <button\r\n                                                onClick={() => handleAddComment(proof.id)}\r\n                                                disabled={submittingComment[proof.id]}\r\n                                                className=\"inline-flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 text-xs sm:text-sm bg-blue-600 text-white rounded font-medium hover:bg-blue-700 disabled:bg-blue-400 transition-colors\"\r\n                                            >\r\n                                                <Send className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                                                <span className=\"hidden sm:inline\">\r\n                                                    Post Comment\r\n                                                </span>\r\n                                                <span className=\"sm:hidden\">Post</span>\r\n                                            </button>\r\n                                        </div>\r\n\r\n                                        {/* Action Buttons */}\r\n                                        <div className=\"bg-white rounded border border-gray-200 p-3 sm:p-4\">\r\n                                            <div className=\"flex gap-2 sm:gap-3 flex-col sm:flex-row\">\r\n                                                <button\r\n                                                    onClick={() => handleApprove(proof.id)}\r\n                                                    disabled={submittingAction[proof.id]}\r\n                                                    className=\"flex-1 flex items-center justify-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 disabled:bg-green-400 transition-colors\"\r\n                                                >\r\n                                                    <CheckCircle2 className=\"w-4 h-4 sm:w-5 sm:h-5\" />\r\n                                                    <span className=\"hidden sm:inline\">Approve</span>\r\n                                                    <span className=\"sm:hidden\">OK</span>\r\n                                                </button>\r\n                                                <button\r\n                                                    onClick={() => {\r\n                                                        const denyInput =\r\n                                                            commentText[`deny-${proof.id}`];\r\n                                                        if (!denyInput?.trim()) {\r\n                                                            setCommentText((prev) => ({\r\n                                                                ...prev,\r\n                                                                [`deny-${proof.id}`]:\r\n                                                                    \"Please update this design\",\r\n                                                            }));\r\n                                                        }\r\n                                                    }}\r\n                                                    disabled={submittingAction[proof.id]}\r\n                                                    className=\"flex-1 flex items-center justify-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 disabled:bg-orange-400 transition-colors\"\r\n                                                >\r\n                                                    <AlertTriangle className=\"w-4 h-4 sm:w-5 sm:h-5\" />\r\n                                                    <span className=\"hidden sm:inline\">\r\n                                                        Request Revisions\r\n                                                    </span>\r\n                                                    <span className=\"sm:hidden\">Revise</span>\r\n                                                </button>\r\n                                            </div>\r\n\r\n                                            {/* Revision Notes Input */}\r\n                                            {commentText[`deny-${proof.id}`] && (\r\n                                                <div className=\"mt-3 sm:mt-4\">\r\n                                                    <label className=\"block text-xs sm:text-sm font-medium text-gray-900 mb-2\">\r\n                                                        Revision Notes (Optional)\r\n                                                    </label>\r\n                                                    <textarea\r\n                                                        value={commentText[`deny-${proof.id}`] || \"\"}\r\n                                                        onChange={(e) =>\r\n                                                            setCommentText((prev) => ({\r\n                                                                ...prev,\r\n                                                                [`deny-${proof.id}`]: e.target.value,\r\n                                                            }))\r\n                                                        }\r\n                                                        placeholder=\"What needs to be changed?\"\r\n                                                        className=\"w-full px-2 sm:px-3 py-2 border border-gray-300 rounded-md text-xs sm:text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-500 mb-2 sm:mb-3\"\r\n                                                        rows={3}\r\n                                                    />\r\n                                                    <button\r\n                                                        onClick={() => handleDeny(proof.id)}\r\n                                                        disabled={submittingAction[proof.id]}\r\n                                                        className=\"w-full px-3 sm:px-4 py-2 text-xs sm:text-sm bg-orange-600 text-white rounded font-medium hover:bg-orange-700 disabled:bg-orange-400 transition-colors\"\r\n                                                    >\r\n                                                        <span className=\"hidden sm:inline\">\r\n                                                            Confirm Request for Revisions\r\n                                                        </span>\r\n                                                        <span className=\"sm:hidden\">Confirm</span>\r\n                                                    </button>\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Reviewed Proofs Section */}\r\n            {reviewedProofs.length > 0 && (\r\n                <div>\r\n                    <div className=\"mb-3 sm:mb-4\">\r\n                        <h2 className=\"text-base sm:text-lg font-semibold text-gray-900\">\r\n                            Reviewed Proofs ({reviewedProofs.length})\r\n                        </h2>\r\n                    </div>\r\n                    <div className=\"space-y-3 sm:space-y-4\">\r\n                        {reviewedProofs.map((proof) => (\r\n                            <div\r\n                                key={proof.id}\r\n                                className=\"bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow\"\r\n                            >\r\n                                {/* Proof Header */}\r\n                                <button\r\n                                    onClick={() =>\r\n                                        setExpandedProofId(\r\n                                            expandedProofId === proof.id ? null : proof.id,\r\n                                        )\r\n                                    }\r\n                                    className=\"w-full px-3 sm:px-6 py-3 sm:py-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4 hover:bg-gray-50 transition-colors text-left\"\r\n                                >\r\n                                    <div className=\"flex items-start sm:items-center gap-2 sm:gap-4 flex-1 min-w-0\">\r\n                                        <div className=\"bg-gray-100 p-2 sm:p-3 rounded-lg flex-shrink-0\">\r\n                                            {getStatusIcon(proof.status)}\r\n                                        </div>\r\n                                        <div className=\"flex-1 min-w-0\">\r\n                                            <div className=\"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-3 mb-1 sm:mb-2\">\r\n                                                <h3 className=\"text-base sm:text-lg font-semibold text-gray-900\">\r\n                                                    Order {formatOrderNumber(proof.order_id)}\r\n                                                </h3>\r\n                                                <span\r\n                                                    className={`px-2 sm:px-3 py-1 rounded-full text-xs font-medium w-fit ${getStatusColor(proof.status)}`}\r\n                                                >\r\n                                                    {getStatusLabel(proof.status)}\r\n                                                </span>\r\n                                            </div>\r\n                                            <p className=\"text-xs sm:text-sm text-gray-600 truncate\">\r\n                                                {proof.description || \"Design proof\"}\r\n                                            </p>\r\n                                            {proof.file_name && (\r\n                                                <p className=\"text-xs text-blue-600 mt-1 flex items-center gap-1 truncate\">\r\n                                                    <FileIcon className=\"w-3 h-3 flex-shrink-0\" />\r\n                                                    <span className=\"truncate\">\r\n                                                        File: {proof.file_name}\r\n                                                    </span>\r\n                                                </p>\r\n                                            )}\r\n                                            <p className=\"text-xs text-gray-500 mt-1\">\r\n                                                Last updated on {formatDate(proof.updated_at)}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <ChevronDown\r\n                                        className={`w-4 h-4 sm:w-5 sm:h-5 text-gray-400 flex-shrink-0 transition-transform ${expandedProofId === proof.id ? \"rotate-180\" : \"\"\r\n                                            }`}\r\n                                    />\r\n                                </button>\r\n\r\n                                {/* Proof Details - Expanded */}\r\n                                {expandedProofId === proof.id && (\r\n                                    <div className=\"border-t border-gray-200 px-3 sm:px-6 py-4 sm:py-6 bg-gray-50 space-y-4 sm:space-y-6\">\r\n                                        {/* File Preview Section */}\r\n                                        {proof.file_url && (\r\n                                            <div className=\"bg-white rounded border border-gray-200 p-3 sm:p-4\">\r\n                                                <h4 className=\"text-xs sm:text-sm font-semibold text-gray-900 mb-2 sm:mb-3 flex items-center gap-2\">\r\n                                                    <Download className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                                                    Attached File\r\n                                                </h4>\r\n                                                {proof.file_url\r\n                                                    .toLowerCase()\r\n                                                    .match(/\\.(jpg|jpeg|png|gif|webp)$/i) ? (\r\n                                                    <div>\r\n                                                        <img\r\n                                                            src={proof.file_url}\r\n                                                            alt=\"Proof preview\"\r\n                                                            className=\"w-full max-h-96 object-contain rounded border border-gray-200 mb-2 sm:mb-3\"\r\n                                                        />\r\n                                                        <a\r\n                                                            href={proof.file_url}\r\n                                                            download={proof.file_name || \"proof\"}\r\n                                                            className=\"inline-flex items-center gap-2 px-3 sm:px-4 py-2 text-xs sm:text-sm bg-blue-600 text-white rounded font-medium hover:bg-blue-700 transition-colors\"\r\n                                                        >\r\n                                                            <Download className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                                                            <span className=\"hidden sm:inline\">\r\n                                                                Download\r\n                                                            </span>\r\n                                                            <span className=\"sm:hidden\">DL</span>\r\n                                                        </a>\r\n                                                    </div>\r\n                                                ) : (\r\n                                                    <a\r\n                                                        href={proof.file_url}\r\n                                                        download={proof.file_name || \"proof\"}\r\n                                                        className=\"flex items-center gap-2 sm:gap-3 p-3 sm:p-4 bg-blue-50 border border-blue-200 rounded hover:bg-blue-100 transition-colors\"\r\n                                                    >\r\n                                                        <FileIcon className=\"w-6 h-6 sm:w-8 sm:h-8 text-blue-600 flex-shrink-0\" />\r\n                                                        <div className=\"flex-1 min-w-0\">\r\n                                                            <p className=\"text-xs sm:text-sm font-medium text-blue-900 truncate\">\r\n                                                                {proof.file_name || \"Proof file\"}\r\n                                                            </p>\r\n                                                            <p className=\"text-xs text-blue-700\">\r\n                                                                Click to download\r\n                                                            </p>\r\n                                                        </div>\r\n                                                        <Download className=\"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 flex-shrink-0\" />\r\n                                                    </a>\r\n                                                )}\r\n                                            </div>\r\n                                        )}\r\n\r\n                                        {/* Status Info */}\r\n                                        <div className=\"p-3 sm:p-4 bg-white rounded border border-gray-200\">\r\n                                            <p className=\"text-xs sm:text-sm font-medium text-gray-900 mb-2\">\r\n                                                Status\r\n                                            </p>\r\n                                            <p className=\"text-xs sm:text-sm text-gray-600\">\r\n                                                {proof.status === \"approved\"\r\n                                                    ? \"âœ“ You approved this proof\"\r\n                                                    : proof.status === \"revisions_requested\"\r\n                                                        ? \"Revisions have been requested\"\r\n                                                        : \"This proof was denied\"}\r\n                                            </p>\r\n                                            {proof.revision_notes && (\r\n                                                <div className=\"mt-2 sm:mt-3 p-2 sm:p-3 bg-orange-50 rounded border border-orange-200\">\r\n                                                    <p className=\"text-xs font-medium text-orange-900 mb-1\">\r\n                                                        Revision Notes:\r\n                                                    </p>\r\n                                                    <p className=\"text-xs sm:text-sm text-orange-800 whitespace-pre-wrap\">\r\n                                                        {proof.revision_notes}\r\n                                                    </p>\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n\r\n                                        {/* Comments Section */}\r\n                                        {proof.comments && proof.comments.length > 0 && (\r\n                                            <div>\r\n                                                <h4 className=\"text-sm font-semibold text-gray-900 mb-4 flex items-center gap-2\">\r\n                                                    <MessageSquare className=\"w-4 h-4\" />\r\n                                                    Comments\r\n                                                </h4>\r\n                                                <div className=\"space-y-4\">\r\n                                                    {proof.comments.map((comment) => (\r\n                                                        <div\r\n                                                            key={comment.id}\r\n                                                            className=\"bg-white rounded border border-gray-200 p-4\"\r\n                                                        >\r\n                                                            <div className=\"flex items-start justify-between mb-2\">\r\n                                                                <div className=\"flex-1\">\r\n                                                                    <p className=\"text-sm font-medium text-gray-900\">\r\n                                                                        {comment.admin_email ? \"Admin\" : \"You\"}\r\n                                                                    </p>\r\n                                                                    <p className=\"text-xs text-gray-500\">\r\n                                                                        {formatDate(comment.created_at)}\r\n                                                                    </p>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <p className=\"text-sm text-gray-700 whitespace-pre-wrap\">\r\n                                                                {comment.message}\r\n                                                            </p>\r\n                                                        </div>\r\n                                                    ))}\r\n                                                </div>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"uDAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,MAAA,EAAA,EAAA,CAAA,CAAA,MAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAeA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OA8Ce,SAAS,IACpB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAU,EAAE,EAC1C,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACrC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC7B,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAwB,MAChE,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,GACzC,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAiC,CAAC,GAClE,CAAC,EAAmB,EAAqB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAExD,CAAC,GACG,CAAC,EAAkB,EAAoB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAEtD,CAAC,GACG,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,GACzC,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAgC,MAC9D,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAEnD,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAGN,AAFc,IAEV,CAAC,OAAO,CAFe,OAAO,CAAC,aAOnC,IAJI,EAAO,IAAI,CAAC,SAKpB,EAAG,CAAC,EAAO,EAEX,IAAM,EAAc,MAAO,EAAe,CAAC,CAAE,GAAkB,CAAK,IAChE,GAAI,CACK,EAGD,GAAiB,GAFjB,AADS,GACI,GAIjB,EAAS,IAET,IAAM,EAAQ,aAAa,OAAO,CAAC,aAC7B,EAAW,MAAM,MAAM,CAAC,iBAAiB,EAAE,EAAA,CAAM,CAAE,CACrD,QAAS,CAAE,cAAe,CAAC,OAAO,EAAE,EAAA,CAAO,AAAC,CAChD,GAEA,GAAI,CAAC,EAAS,EAAE,CAAE,CACd,IAAM,EAAY,MAAM,EAAS,IAAI,EACrC,OAAM,AAAI,MAAM,EAAU,KAAK,EAAI,yBACvC,CAEA,IAAM,EAAuB,MAAM,EAAS,IAAI,GAE5C,EACA,EAAU,AAAC,GAAS,CADZ,GACgB,KAAU,EAAK,MAAM,EAAI,EAAE,CAAE,EAErD,EAAU,EAAK,MAAM,EAAI,EAAE,EAG/B,EAAe,EAAK,mBAAmB,EAAI,GAC3C,EAAc,EAAK,UAAU,EAAI,MACjC,EAAe,EACnB,CAAE,MAAO,EAAK,CAGV,EADI,OACK,MADU,MAAQ,EAAI,OAAO,CAAG,wBAE7C,QAAU,CACN,GAAa,GACb,GAAiB,EACrB,CACJ,EAEM,EAAmB,MAAO,IAC5B,GAAI,CACA,IAAM,EAAQ,aAAa,OAAO,CAAC,aAC7B,EAAW,MAAM,MAAM,CAAC,YAAY,EAAE,EAAA,CAAS,CAAE,CACnD,QAAS,CAAE,cAAe,CAAC,OAAO,EAAE,EAAA,CAAO,AAAC,CAChD,GAEA,GAAI,CAAC,EAAS,EAAE,CACZ,CADc,KACR,AAAI,MAAM,iCAGpB,IAAM,EAA4B,MAAM,EAAS,IAAI,GACrD,EAAU,AAAC,GAAS,EAAK,GAAG,CAAC,AAAC,GAAO,EAAE,EAAE,GAAK,EAAU,EAAK,KAAK,CAAG,GACzE,CAAE,MAAO,EAAK,CACV,QAAQ,KAAK,CAAC,+BAAgC,EAClD,CACJ,EAEM,EAAgB,MAAO,IACzB,GAAI,CACA,EAAoB,AAAC,IAAU,CAAE,EAAH,CAAM,CAAI,CAAE,CAAC,EAAQ,EAAE,EAAK,CAAC,EAC3D,IAAM,EAAQ,aAAa,OAAO,CAAC,aAE7B,EAAW,MAAM,MAAM,CAAC,YAAY,EAAE,EAAQ,QAAQ,CAAC,CAAE,CAC3D,OAAQ,OACR,QAAS,CACL,cAAe,CAAC,OAAO,EAAE,EAAA,CAAO,CAChC,eAAgB,kBACpB,CACJ,GAEA,GAAI,CAAC,EAAS,EAAE,CAAE,CACd,IAAM,EAAY,MAAM,EAAS,IAAI,EACrC,OAAM,AAAI,MAAM,EAAU,KAAK,EAAI,0BACvC,CAEA,EAAA,KAAK,CAAC,OAAO,CAAC,4CACd,GACJ,CAAE,MAAO,EAAK,CACV,IAAM,EACF,aAAe,MAAQ,EAAI,OAAO,CAAG,0BACzC,EAAA,KAAK,CAAC,KAAK,CAAC,EAChB,QAAU,CACN,EAAoB,AAAC,IAAU,CAAE,EAAH,CAAM,CAAI,CAAE,CAAC,EAAQ,EAAE,EAAM,CAAC,CAChE,CACJ,EAEM,EAAa,MAAO,IACtB,GAAI,CACA,EAAoB,AAAC,IAAU,CAAE,EAAH,CAAM,CAAI,CAAE,CAAC,EAAQ,CAAE,GAAK,CAAC,EAC3D,IAAM,EAAQ,aAAa,OAAO,CAAC,aAC7B,EAAgB,CAAW,CAAC,CAAC,KAAK,EAAE,EAAA,CAAS,CAAC,EAAI,GAElD,EAAW,MAAM,MAAM,CAAC,YAAY,EAAE,EAAQ,KAAK,CAAC,CAAE,CACxD,OAAQ,OACR,QAAS,CACL,cAAe,CAAC,OAAO,EAAE,EAAA,CAAO,CAChC,eAAgB,kBACpB,EACA,KAAM,KAAK,SAAS,CAAC,CAAE,eAAc,EACzC,GAEA,GAAI,CAAC,EAAS,EAAE,CAAE,CACd,IAAM,EAAY,MAAM,EAAS,IAAI,EACrC,OAAM,AAAI,MAAM,EAAU,KAAK,EAAI,uBACvC,CAEA,EAAA,KAAK,CAAC,OAAO,CAAC,qDACd,EAAe,AAAC,IAAU,CAAE,EAAH,CAAM,CAAI,CAAE,CAAC,CAAC,KAAK,EAAE,EAAA,CAAS,CAAC,CAAE,GAAG,CAAC,EAC9D,GACJ,CAAE,MAAO,EAAK,CACV,IAAM,EACF,aAAe,MAAQ,EAAI,OAAO,CAAG,uBACzC,EAAA,KAAK,CAAC,KAAK,CAAC,EAChB,QAAU,CACN,EAAoB,AAAC,IAAU,CAAE,EAAH,CAAM,CAAI,CAAE,CAAC,EAAQ,EAAE,EAAM,CAAC,CAChE,CACJ,EAEM,EAAmB,MAAO,IAC5B,GAAI,CACA,IAAM,EAAU,CAAW,CAAC,EAAQ,EAAE,OACtC,GAAI,CAAC,EAAS,YACV,EAAA,KAAK,CAAC,KAAK,CAAC,0BAIhB,EAAsB,AAAD,IAAW,CAAE,EAAH,CAAM,CAAI,CAAE,CAAC,EAAQ,EAAE,CAAK,CAAC,GAC5D,IAAM,EAAQ,aAAa,OAAO,CAAC,aAWnC,GAAI,CAAC,CATY,MAAM,MAAM,CAAC,YAAY,EAAE,EAAQ,SAAS,CAAC,CAAE,CAC5D,OAAQ,OACR,QAAS,CACL,cAAe,CAAC,OAAO,EAAE,EAAA,CAAO,CAChC,eAAgB,kBACpB,EACA,KAAM,KAAK,SAAS,CAAC,SAAE,CAAQ,EACnC,EAAA,EAEc,EAAE,CACZ,CADc,KACR,AAAI,MAAM,yBAGpB,EAAe,AAAC,IAAU,CAAE,EAAH,CAAM,CAAI,CAAE,CAAC,EAAQ,CAAE,GAAG,CAAC,EACpD,EAAA,KAAK,CAAC,OAAO,CAAC,iBACd,EAAiB,EACrB,CAAE,MAAO,EAAK,CACV,IAAM,EACF,aAAe,MAAQ,EAAI,OAAO,CAAG,wBACzC,EAAA,KAAK,CAAC,KAAK,CAAC,EAChB,QAAU,CACN,EAAqB,AAAC,IAAU,CAAE,EAAH,CAAM,CAAI,CAAE,CAAC,EAAQ,EAAE,EAAM,CAAC,CACjE,CACJ,EAEM,EAAgB,AAAC,IACnB,OAAQ,GACJ,IAAK,WACD,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,0BACnC,KAAK,SACL,IAAK,sBACD,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,2BACpC,KAAK,IAED,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,yBAChC,CACJ,EAEM,EAAiB,AAAC,IACpB,OAAQ,GACJ,IAAK,WACD,MAAO,4BACX,KAAK,SACL,IAAK,sBACD,MAAO,8BACX,KAAK,IAED,MAAO,0BACf,CACJ,EAEM,EAAiB,AAAC,IACpB,OAAQ,GACJ,IAAK,WACD,MAAO,UACX,KAAK,SACD,MAAO,QACX,KAAK,sBACD,MAAO,qBACX,KAAK,IAED,MAAO,gBACf,CACJ,EAEM,EAAa,AAAC,GACT,IAAI,KAAK,GAAY,kBAAkB,CAAC,QAAS,CACpD,KAAM,UACN,MAAO,QACP,IAAK,UACL,KAAM,UACN,OAAQ,SACZ,GAGE,EAAgB,EAAO,MAAM,CAAC,AAAC,GAAM,AAAa,cAAX,MAAM,EAC7C,EAAiB,EAAO,MAAM,CAAC,AAAC,GAAmB,YAAb,EAAE,MAAM,EAC9C,EAAqB,EAAc,MAAM,QAE/C,AAAI,EAEI,CAAA,EAAA,EAAA,GAAA,CAFO,CAEN,MAAA,CAAI,UAAU,iDACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAwB,6BAQ/C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wDAEX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wBACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uFACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,wDAA+C,WAG7D,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yDAAgD,wDAIhE,EAAqB,GAClB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oIACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,sDAChB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,sCACX,EAAoB,IACG,IAAvB,EAA2B,QAAU,SAAS,uBAQlE,GACG,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2FACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,4DACvB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,2CAAmC,OAKrC,IAAlB,EAAO,MAAM,EAAU,CAAC,GACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+EACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,iEACjB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+DAAsD,kBAGpE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,4CAAmC,sFAQvD,EAAc,MAAM,CAAG,GACpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wBACX,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,qFACV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,wCAAwC,yBAClC,EAAc,MAAM,CAAC,SAGpD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kCACV,EAAc,GAAG,CAAC,AAAC,GAChB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEG,UAAU,yGAGV,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACG,QAAS,IACL,EACI,IAAoB,EAAM,EAAE,CAAG,KAAO,EAAM,EAAE,EAGtD,UAAU,sKAEV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2EACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2DACV,EAAc,EAAM,MAAM,IAE/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kFACX,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,6DAAmD,SACtD,CAAA,EAAA,EAAA,iBAAA,AAAiB,EAAC,EAAM,QAAQ,KAE3C,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACG,UAAW,CAAC,yDAAyD,EAAE,EAAe,EAAM,MAAM,EAAA,CAAG,UAEpG,EAAe,EAAM,MAAM,OAGpC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,qDACR,EAAM,WAAW,EACd,uCAEP,EAAM,SAAS,EACZ,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,wEACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,0BACpB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,qBAAW,SAChB,EAAM,SAAS,OAIlC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,uCAA6B,WAC7B,EAAW,EAAM,UAAU,WAIhD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CACR,UAAW,CAAC,uEAAuE,EAAE,IAAoB,EAAM,EAAE,CAAG,aAAe,GAAA,CAC7H,MAKb,IAAoB,EAAM,EAAE,EACzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iGAEV,EAAM,QAAQ,EACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+DACX,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,gGACV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,0BAA0B,mBAGjD,EAAM,QAAQ,CACV,WAAW,GACX,KAAK,CAAC,+BACP,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACG,IAAK,EAAM,QAAQ,CACnB,IAAI,gBACJ,UAAU,+EAEd,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CACG,KAAM,EAAM,QAAQ,CACpB,SAAU,EAAM,SAAS,EAAI,QAC7B,UAAU,+JAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,0BACpB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4BAAmB,aAGnC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qBAAY,aAIpC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CACG,KAAM,EAAM,QAAQ,CACpB,SAAU,EAAM,SAAS,EAAI,QAC7B,UAAU,sIAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,sDACpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACX,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iEACR,EAAM,SAAS,EAAI,eAExB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,yBAIzC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,4DAOnC,EAAM,QAAQ,EAAI,EAAM,QAAQ,CAAC,MAAM,CAAG,GACvC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,gGACV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,0BAA0B,cAGvD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kCACV,EAAM,QAAQ,CAAC,GAAG,CAAC,AAAC,GACjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEG,UAAU,+DAEV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iDACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACX,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wDACR,EAAQ,WAAW,CAAG,QAAU,QAErC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCACR,EAAW,EAAQ,UAAU,SAI1C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gEACR,EAAQ,OAAO,KAdf,EAAQ,EAAE,QAuBnC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+DACX,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,mEAA0D,kBAG3E,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CACG,MAAO,CAAW,CAAC,EAAM,EAAE,CAAC,EAAI,GAChC,SAAU,AAAC,GACP,EAAe,AAAC,IAAU,CACtB,EADqB,CAClB,CAAI,CACP,CAAC,EAAM,EAAE,CAAC,CAAE,EAAE,MAAM,CAAC,KAAK,CAC9B,CAAC,EAEL,YAAY,uCACZ,UAAU,sKACV,KAAM,IAEV,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACG,QAAS,IAAM,EAAiB,EAAM,EAAE,EACxC,SAAU,CAAiB,CAAC,EAAM,EAAE,CAAC,CACrC,UAAU,6LAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,0BAChB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4BAAmB,iBAGnC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qBAAY,eAKpC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+DACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qDACX,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACG,QAAS,IAAM,EAAc,EAAM,EAAE,EACrC,SAAU,CAAgB,CAAC,EAAM,EAAE,CAAC,CACpC,UAAU,0NAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,UAAU,0BACxB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4BAAmB,YACnC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qBAAY,UAEhC,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACG,QAAS,KACL,IAAM,EACF,CAAW,CAAC,CAAC,KAAK,EAAE,EAAM,EAAE,CAAA,CAAE,CAAC,AAC/B,CAAC,GAAW,QAAQ,AACpB,EAAe,AAAC,IAAU,CACtB,EADqB,CAClB,CAAI,CACP,CAAC,CAAC,KAAK,EAAE,EAAM,EAAE,CAAA,CAAE,CAAC,CAChB,4BACR,CAAC,CAET,EACA,SAAU,CAAgB,CAAC,EAAM,EAAE,CAAC,CACpC,UAAU,6NAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,0BACzB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4BAAmB,sBAGnC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qBAAY,iBAKnC,CAAW,CAAC,CAAC,KAAK,EAAE,EAAM,EAAE,CAAA,CAAE,CAAC,EAC5B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yBACX,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,mEAA0D,8BAG3E,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CACG,MAAO,CAAW,CAAC,CAAC,KAAK,EAAE,EAAM,EAAE,CAAA,CAAE,CAAC,EAAI,GAC1C,SAAU,AAAC,GACP,EAAe,AAAC,IAAU,CACtB,EADqB,CAClB,CAAI,CACP,CAAC,CAAC,KAAK,EAAE,EAAM,EAAE,CAAA,CAAE,CAAC,CAAE,EAAE,MAAM,CAAC,KAAK,CACxC,CAAC,EAEL,YAAY,4BACZ,UAAU,wKACV,KAAM,IAEV,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACG,QAAS,IAAM,EAAW,EAAM,EAAE,EAClC,SAAU,CAAgB,CAAC,EAAM,EAAE,CAAC,CACpC,UAAU,kKAEV,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4BAAmB,kCAGnC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qBAAY,0BAjO/C,EAAM,EAAE,QA+OhC,EAAe,MAAM,CAAG,GACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wBACX,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,6DAAmD,oBAC3C,EAAe,MAAM,CAAC,SAGhD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kCACV,EAAe,GAAG,CAAC,AAAC,GACjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEG,UAAU,yGAGV,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACG,QAAS,IACL,EACI,IAAoB,EAAM,EAAE,CAAG,KAAO,EAAM,EAAE,EAGtD,UAAU,sKAEV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2EACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2DACV,EAAc,EAAM,MAAM,IAE/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kFACX,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,6DAAmD,SACtD,CAAA,EAAA,EAAA,iBAAA,AAAiB,EAAC,EAAM,QAAQ,KAE3C,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACG,UAAW,CAAC,yDAAyD,EAAE,EAAe,EAAM,MAAM,EAAA,CAAG,UAEpG,EAAe,EAAM,MAAM,OAGpC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,qDACR,EAAM,WAAW,EAAI,iBAEzB,EAAM,SAAS,EACZ,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,wEACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,0BACpB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,qBAAW,SAChB,EAAM,SAAS,OAIlC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,uCAA6B,mBACrB,EAAW,EAAM,UAAU,WAIxD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CACR,UAAW,CAAC,uEAAuE,EAAE,IAAoB,EAAM,EAAE,CAAG,aAAe,GAAA,CAC7H,MAKb,IAAoB,EAAM,EAAE,EACzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iGAEV,EAAM,QAAQ,EACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+DACX,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,gGACV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,0BAA0B,mBAGjD,EAAM,QAAQ,CACV,WAAW,GACX,KAAK,CAAC,+BACP,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACG,IAAK,EAAM,QAAQ,CACnB,IAAI,gBACJ,UAAU,+EAEd,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CACG,KAAM,EAAM,QAAQ,CACpB,SAAU,EAAM,SAAS,EAAI,QAC7B,UAAU,+JAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,0BACpB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4BAAmB,aAGnC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qBAAY,aAIpC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CACG,KAAM,EAAM,QAAQ,CACpB,SAAU,EAAM,SAAS,EAAI,QAC7B,UAAU,sIAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,sDACpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACX,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iEACR,EAAM,SAAS,EAAI,eAExB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,yBAIzC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,4DAOpC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+DACX,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6DAAoD,WAGjE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,4CACS,aAAjB,EAAM,MAAM,CACP,4BACiB,wBAAjB,EAAM,MAAM,CACR,gCACA,0BAEb,EAAM,cAAc,EACjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kFACX,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oDAA2C,oBAGxD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kEACR,EAAM,cAAc,SAOpC,EAAM,QAAQ,EAAI,EAAM,QAAQ,CAAC,MAAM,CAAG,GACvC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,6EACV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,YAAY,cAGzC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACV,EAAM,QAAQ,CAAC,GAAG,CAAC,AAAC,GACjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEG,UAAU,wDAEV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iDACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACX,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6CACR,EAAQ,WAAW,CAAG,QAAU,QAErC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCACR,EAAW,EAAQ,UAAU,SAI1C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,qDACR,EAAQ,OAAO,KAdf,EAAQ,EAAE,aAvItC,EAAM,EAAE,UAqK7C"}