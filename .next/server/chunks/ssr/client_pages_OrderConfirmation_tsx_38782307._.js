module.exports=[15651,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(65967),e=a.i(48195),f=a.i(3130),g=a.i(40695),h=a.i(96221),i=a.i(16201),j=a.i(92e3),k=a.i(83497),l=a.i(10227),m=a.i(41675),n=a.i(77156),o=a.i(84505),p=a.i(65602);function q(){let{orderId:a}=(0,d.useParams)(),q=(0,d.useNavigate)(),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(!0),[v,w]=(0,c.useState)(null);if((0,c.useEffect)(()=>{(async()=>{if(!a||"preview"===a){s({id:1001,status:"paid",total:149.99,subtotal:125,tax:12.5,shipping:12.49,discount:0,created_at:new Date().toISOString(),estimated_delivery_date:new Date(Date.now()+12096e5).toISOString(),shipping_address:{firstName:"John",lastName:"Doe",street:"123 Main Street",city:"San Francisco",state:"CA",postalCode:"94102",country:"United States"},orderItems:[{id:1,product_id:1,product_name:"Custom Sticker Sheet",quantity:2,price:29.99,design_file_url:"https://images.unsplash.com/photo-1611532736597-de2d4265fba3?w=400&h=400&fit=crop"},{id:2,product_id:2,product_name:"Vinyl Decal Pack",quantity:1,price:65,design_file_url:"https://images.unsplash.com/photo-1609027291529-0cfecda156de?w=400&h=400&fit=crop"}]}),u(!1);return}try{let b;try{if(a)b=(0,e.parseOrderNumber)(a);else throw Error("Order ID is missing")}catch(c){console.error("Error parsing order ID:",c),b=a}console.log(`Fetching order details for display ID: ${a} (Raw ID: ${b})`);try{console.log(`Attempting to confirm checkout for Order #${b}...`);let a=await fetch("/api/square/confirm-checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:b})});if(a.ok){let b=await a.json();console.log("✅ Checkout confirmed successfully:",b)}else console.warn("⚠️ Checkout confirmation returned non-200 status:",a.status)}catch(a){console.error("❌ Error verifying payment:",a)}let c=await fetch(`/api/public/orders/${b}`);if(!c.ok)throw Error(`Failed to fetch order (${c.status})`);let d=await c.json();if(console.log("Order data received:",d),!d.success||!d.data)throw Error("Invalid order data");let f=d.data;if(!["paid","completed","processing","shipped","delivered","pending_payment"].includes(f.status))throw Error("Order status not recognized.");let g={id:f.id,status:f.status,total:f.total,subtotal:f.subtotal,tax:f.tax,shipping:f.shipping,discount:0,created_at:f.date_created,estimated_delivery_date:f.estimated_delivery_date,shipping_address:f.shipping_addresses?.[0],orderItems:f.products?.map(a=>({id:a.id,product_id:a.product_id,product_name:a.product_name,quantity:a.quantity,price:a.price,design_file_url:a.design_file_url}))};s(g)}catch(a){w(a instanceof Error?a.message:"Failed to load order details"),console.error("Order fetch error:",a)}finally{u(!1)}})()},[a]),t)return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("main",{className:"pt-20 min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsx)(h.Loader2,{className:"w-8 h-8 animate-spin text-[#FFD713]"})})});if(v)return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("main",{className:"pt-20 min-h-screen bg-gray-50 py-12",children:(0,b.jsx)("div",{className:"max-w-2xl mx-auto px-4",children:(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{className:"text-red-600",children:"Order Error"})}),(0,b.jsxs)(f.CardContent,{className:"space-y-4",children:[(0,b.jsxs)(p.Alert,{variant:"destructive",children:[(0,b.jsx)(j.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)(p.AlertDescription,{children:v})]}),(0,b.jsx)(g.Button,{onClick:()=>q("/"),className:"w-full bg-blue-600 hover:bg-blue-700",children:"Return to Home"})]})]})})})});if(!r)return null;let x=(0,e.formatOrderNumber)(r.id),y=new Date(r.created_at).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),z=new Date(Date.now()+2592e5),A=new Date(Date.now()+864e6),B=new Date(Date.now()+20736e5);r.estimated_delivery_date?new Date(r.estimated_delivery_date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}):B.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"});let C=z.toLocaleDateString("en-US",{month:"short",day:"numeric"}),D=A.toLocaleDateString("en-US",{month:"short",day:"numeric"}),E=B.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("main",{className:"pt-20 min-h-screen bg-gray-50 py-12",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto px-4 space-y-8",children:[(0,b.jsx)("div",{className:"flex justify-center mb-8",children:(0,b.jsx)("img",{src:"https://cdn.builder.io/api/v1/image/assets%2F1e00ee8c48924560b1c928d354e4521b%2Ff76c51c7227242dc8bd4b1757ab321af",alt:"Stickerland",className:"h-24 w-auto"})}),(0,b.jsx)(f.Card,{className:"border-green-200 bg-green-50",children:(0,b.jsxs)(f.CardHeader,{className:"text-center",children:[(0,b.jsx)("div",{className:"flex justify-center mb-4",children:(0,b.jsx)(i.CheckCircle,{className:"w-12 h-12 text-green-600"})}),(0,b.jsx)(f.CardTitle,{className:"text-2xl text-green-900",children:"Order Confirmed!"}),(0,b.jsx)(f.CardDescription,{className:"text-green-800",children:"Thank you for your purchase. Your order is now being prepared."})]})}),(0,b.jsx)(f.Card,{children:(0,b.jsx)(f.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(f.CardTitle,{className:"text-3xl font-bold text-[#030140]",children:x}),(0,b.jsxs)(f.CardDescription,{children:["Ordered on ",y]}),r.square_payment_id&&(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Transaction ID:"," ",(0,b.jsx)("span",{className:"font-mono",children:r.square_payment_id})]})]}),(()=>{switch(r.status){case"pending_payment":case"paid":case"processing":return(0,b.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:[(0,b.jsx)(k.Package,{className:"w-4 h-4"}),"Processing"]});case"shipped":return(0,b.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium",children:[(0,b.jsx)(l.Truck,{className:"w-4 h-4"}),"Shipped"]});case"delivered":return(0,b.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:[(0,b.jsx)(i.CheckCircle,{className:"w-4 h-4"}),"Delivered"]});default:return(0,b.jsx)("div",{className:"flex items-center gap-2 px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm font-medium",children:r.status})}})()]})})}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Order Items"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)("div",{className:"space-y-6",children:r.orderItems?.map(a=>(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 pb-6 border-b last:pb-0 last:border-b-0",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:a.design_file_url?(0,b.jsxs)("div",{className:"relative w-32 h-32 bg-gray-100 rounded-lg overflow-hidden border border-gray-200",children:[(0,b.jsx)("img",{src:a.design_file_url,alt:a.product_name,className:"w-full h-full object-cover"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-20 transition-all flex items-center justify-center opacity-0 hover:opacity-100",children:(0,b.jsx)(n.Eye,{className:"w-6 h-6 text-white"})})]}):(0,b.jsx)("div",{className:"w-32 h-32 bg-gray-100 rounded-lg border border-gray-300 flex items-center justify-center",children:(0,b.jsx)(k.Package,{className:"w-8 h-8 text-gray-400"})})}),(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-bold text-lg text-gray-900",children:a.product_name}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Product ID: #",a.product_id]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 bg-gray-50 rounded-lg p-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"QUANTITY"}),(0,b.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:[a.quantity," ",1===a.quantity?"item":"items"]})]}),(0,b.jsx)("div",{className:"border-l border-gray-300"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"PRICE PER ITEM"}),(0,b.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:["$",a.price.toFixed(2)]})]})]}),a.design_file_url&&(0,b.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Design Included"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("button",{className:"flex items-center gap-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm text-gray-700 font-medium",children:[(0,b.jsx)(n.Eye,{className:"w-4 h-4"}),"View Design"]}),(0,b.jsxs)("button",{className:"flex items-center gap-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm text-gray-700 font-medium",children:[(0,b.jsx)(o.Download,{className:"w-4 h-4"}),"Download"]})]})]})]})}),(0,b.jsxs)("div",{className:"flex-shrink-0 text-left md:text-right",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Subtotal"}),(0,b.jsxs)("p",{className:"font-bold text-2xl",children:[(0,b.jsx)("span",{style:{color:"rgba(20, 20, 20, 1)"},children:"$"}),(0,b.jsx)("span",{style:{color:"rgba(32, 32, 31, 1)"},children:(a.price*a.quantity).toFixed(2)})]}),(0,b.jsxs)("p",{className:"text-xs text-gray-600 mt-2",children:["$",a.price.toFixed(2)," × ",a.quantity]})]})]},a.id))})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Order Summary"})}),(0,b.jsxs)(f.CardContent,{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Subtotal"}),(0,b.jsxs)("span",{className:"font-medium",children:["$",r.subtotal.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Shipping"}),(0,b.jsxs)("span",{className:"font-medium",children:["$",r.shipping.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Tax"}),(0,b.jsxs)("span",{className:"font-medium",children:["$",r.tax.toFixed(2)]})]}),r.discount&&r.discount>0&&(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Discount"}),(0,b.jsxs)("span",{className:"font-medium text-green-600",children:["-$",r.discount.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"pt-3 border-t-2 flex justify-between items-center",children:[(0,b.jsx)("span",{className:"font-bold text-lg text-gray-900",children:"Total"}),(0,b.jsxs)("span",{className:"font-bold text-lg text-[#FFD713] bg-black rounded-xl px-4 py-2",children:["$",r.total.toFixed(2)]})]})]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Shipping & Delivery"})}),(0,b.jsxs)(f.CardContent,{className:"space-y-4",children:[r.shipping_address&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-500 mb-2",children:"Delivery Address"}),(0,b.jsxs)("p",{className:"text-gray-900",children:[r.shipping_address.firstName," ",r.shipping_address.lastName]}),(0,b.jsx)("p",{className:"text-gray-600",children:r.shipping_address.street}),r.shipping_address.street2&&(0,b.jsx)("p",{className:"text-gray-600",children:r.shipping_address.street2}),(0,b.jsxs)("p",{className:"text-gray-600",children:[r.shipping_address.city,","," ",r.shipping_address.state," ",r.shipping_address.postalCode]}),(0,b.jsx)("p",{className:"text-gray-600",children:r.shipping_address.country})]}),(0,b.jsxs)("div",{className:"pt-4 border-t",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(m.Calendar,{className:"w-4 h-4 text-blue-600"}),(0,b.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Shipping Timeline"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded-full bg-blue-600 mb-2"}),(0,b.jsx)("div",{className:"w-0.5 h-12 bg-gray-300"})]}),(0,b.jsxs)("div",{className:"pb-12",children:[(0,b.jsx)("p",{className:"font-medium text-gray-900 text-sm",children:"Processing"}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"2-3 business days"}),(0,b.jsxs)("p",{className:"text-xs text-blue-600 font-medium mt-1",children:["Ready by ",C]})]})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("div",{className:"flex flex-col items-center",children:(0,b.jsx)("div",{className:"w-3 h-3 rounded-full bg-blue-600 mb-2"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-900 text-sm",children:"Shipping"}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"7-21 business days via USPS/UPS"}),(0,b.jsxs)("p",{className:"text-xs text-blue-600 font-medium mt-1",children:["Arrives between ",D," -"," ",E]})]})]})]})]})]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"What's Next?"})}),(0,b.jsxs)(f.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-[#FFD713] flex items-center justify-center text-sm font-bold text-[#030140] flex-shrink-0",children:"1"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:"Order Confirmation"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"A confirmation email has been sent to your email address."})]})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-sm font-bold text-gray-600 flex-shrink-0",children:"2"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:"Production & Quality Check"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"We'll create your stickers and perform a quality check."})]})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-sm font-bold text-gray-600 flex-shrink-0",children:"3"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:"Shipping"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Your order will be shipped via USPS or UPS. You'll receive a tracking number."})]})]})]}),(0,b.jsx)("div",{className:"pt-4",children:(0,b.jsx)(g.Button,{onClick:()=>q("/"),className:"w-full bg-[#FFD713] hover:bg-[#e6c200] text-[#030140] font-medium",children:"Continue Shopping"})})]})]})]})})})}a.s(["default",()=>q])}];

//# sourceMappingURL=client_pages_OrderConfirmation_tsx_38782307._.js.map