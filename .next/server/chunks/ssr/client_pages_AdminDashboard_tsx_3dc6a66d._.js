module.exports=[31050,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(65967),e=a.i(14001),f=a.i(67453),g=a.i(34075);function h({onNotificationRead:a}){let[d,e]=(0,c.useState)([]),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(new Set);(0,c.useEffect)(()=>{l();let a=setInterval(l,6e4);return()=>clearInterval(a)},[]);let l=async()=>{try{i(!0);let a=localStorage.getItem("authToken");if(!a)return void e([]);let b=new AbortController,c=setTimeout(()=>b.abort(),1e4);try{let d=await fetch("/api/admin/proofs",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},signal:b.signal});if(clearTimeout(c),!d.ok){401===d.status&&e([]),console.warn("Failed to fetch notifications:",d.status);return}let f=await d.json();e(f.proofs||[])}catch(a){clearTimeout(c),a instanceof Error&&"AbortError"===a.name?console.warn("Notifications fetch timeout"):console.warn("Failed to fetch notifications"),e([])}}catch(a){console.warn("Error in fetchNotifications:",a),e([])}finally{i(!1)}},m=d.filter(a=>"customer_approved"===a.notification_type&&!j.has(a.id));return 0===m.length?null:(0,b.jsx)("div",{className:"space-y-3",children:m.map(a=>(0,b.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-start gap-4",children:[(0,b.jsx)("div",{className:"bg-green-100 p-2 rounded-full flex-shrink-0",children:(0,b.jsx)(f.CheckCircle2,{className:"w-5 h-5 text-green-600"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-green-900",children:"Proof Approved!"}),(0,b.jsx)("p",{className:"text-sm text-green-700 mt-1",children:a.message}),(0,b.jsx)("p",{className:"text-xs text-green-600 mt-2",children:new Date(a.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,b.jsx)("button",{onClick:()=>{var b;return b=a.id,void k(a=>new Set([...a,b]))},className:"flex-shrink-0 text-green-600 hover:text-green-700 transition-colors",children:(0,b.jsx)(g.X,{className:"w-4 h-4"})})]},a.id))})}var i=a.i(13749),j=a.i(50522);function k({salesData:a,selectedDate:d,onDateSelect:e}){let[f,g]=(0,c.useState)(new Date),h=b=>{if(!b)return 0;let c=`${f.getFullYear()}-${String(f.getMonth()+1).padStart(2,"0")}-${String(b).padStart(2,"0")}`;return a.find(a=>a.date===c)?.revenue??0},k=(()=>{let a=new Date(f.getFullYear(),f.getMonth()+1,0).getDate(),b=new Date(f.getFullYear(),f.getMonth(),1).getDay(),c=[];for(let a=0;a<b;a++)c.push(null);for(let b=1;b<=a;b++)c.push(b);return c})(),l=new Date().toISOString().split("T")[0],m=d?h(parseInt(d.split("-")[2])):0,n=d?(b=>{if(!b)return 0;let c=`${f.getFullYear()}-${String(f.getMonth()+1).padStart(2,"0")}-${String(b).padStart(2,"0")}`;return a.find(a=>a.date===c)?.orders??0})(parseInt(d.split("-")[2])):0;return(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 tracking-tight",children:["January","February","March","April","May","June","July","August","September","October","November","December"][f.getMonth()]}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:f.getFullYear()})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("button",{onClick:()=>{g(new Date(f.getFullYear(),f.getMonth()-1))},className:"p-2.5 hover:bg-gray-100 rounded-lg transition-colors duration-200 text-gray-600 hover:text-gray-900","aria-label":"Previous month",children:(0,b.jsx)(i.ChevronLeft,{className:"w-5 h-5"})}),(0,b.jsx)("button",{onClick:()=>{g(new Date(f.getFullYear(),f.getMonth()+1))},className:"p-2.5 hover:bg-gray-100 rounded-lg transition-colors duration-200 text-gray-600 hover:text-gray-900","aria-label":"Next month",children:(0,b.jsx)(j.ChevronRight,{className:"w-5 h-5"})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsxs)("div",{className:"lg:col-span-2",children:[(0,b.jsx)("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(a=>(0,b.jsx)("div",{className:"text-center py-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:a},a))}),(0,b.jsx)("div",{className:"grid grid-cols-7 gap-2",children:k.map((a,c)=>{let g=h(a),i=a?`${f.getFullYear()}-${String(f.getMonth()+1).padStart(2,"0")}-${String(a).padStart(2,"0")}`:null,j=d===i,k=i===l;return a?(0,b.jsxs)("button",{onClick:()=>{i&&e(i)},className:`
                    aspect-square rounded-lg p-3 flex flex-col items-start justify-between
                    text-left transition-all duration-200 group
                    ${j?"bg-blue-50 border-2 border-blue-500 shadow-sm":k?"border-2 border-blue-300 bg-white hover:bg-blue-50":"bg-white border border-gray-200 hover:bg-gray-50 hover:border-gray-300"}
                  `,children:[(0,b.jsxs)("div",{className:"flex flex-col w-full",children:[(0,b.jsx)("span",{className:`text-sm font-medium ${j||k?"text-blue-600":"text-gray-900"}`,children:a}),k&&(0,b.jsx)("span",{className:"text-xs font-semibold text-blue-600 mt-0.5",children:"Today"})]}),g>0&&(0,b.jsxs)("span",{className:`text-xs font-semibold whitespace-nowrap ${j?"text-blue-600":"text-gray-600 group-hover:text-gray-900"}`,children:["$",(g/100).toFixed(0)]})]},a):(0,b.jsx)("div",{className:"aspect-square rounded-lg"},`empty-${c}`)})}),(0,b.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider mb-4",children:"Legend"}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-600",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-5 h-5 rounded border-2 border-blue-300 bg-white"}),(0,b.jsx)("span",{children:"Today"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-5 h-5 rounded bg-blue-50 border-2 border-blue-500"}),(0,b.jsx)("span",{children:"Selected"})]})]})]})]}),(0,b.jsx)("div",{className:"lg:col-span-1",children:d?(0,b.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6 h-full flex flex-col justify-between shadow-sm",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("p",{className:"text-xs uppercase tracking-wider font-semibold text-gray-600 mb-2",children:"Selected Date"}),(0,b.jsx)("p",{className:"text-lg font-medium text-gray-900",children:new Date(d+"T00:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})]}),(0,b.jsxs)("div",{className:"space-y-6 flex-1",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs uppercase tracking-wider font-semibold text-gray-600 mb-2",children:"Total Sales"}),(0,b.jsx)("div",{className:"flex items-baseline gap-2",children:(0,b.jsxs)("span",{className:"text-4xl font-semibold text-blue-600",children:["$",m.toFixed(2)]})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs uppercase tracking-wider font-semibold text-gray-600 mb-2",children:"Orders"}),(0,b.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,b.jsx)("span",{className:"text-3xl font-semibold text-gray-900",children:n}),(0,b.jsx)("span",{className:"text-sm text-gray-500",children:1===n?"order":"orders"})]})]})]}),(0,b.jsx)("button",{className:"w-full mt-6 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors duration-200 text-sm shadow-sm hover:shadow-md",children:"View Orders for This Day"})]}):(0,b.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-6 h-full flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Select a day on the calendar to see details"})})})})]})]})}var l=a.i(83497),m=a.i(71931),n=a.i(10227),o=a.i(69520);function p({printingCount:a,printedCount:c,shippedCount:d,selectedDate:e,onRefresh:f,isRefreshing:g=!1}){let h=e?new Date(e+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Today",i=[{icon:m.Printer,label:"Printing Now",count:a,unit:"sticker",bgGradient:"from-orange-500 to-orange-600",borderColor:"border-orange-400",hoverGlow:"hover:shadow-orange-500/50",darkBg:"bg-orange-900/20"},{icon:l.Package,label:"Cutting",count:c,unit:"sticker",bgGradient:"from-cyan-500 to-cyan-600",borderColor:"border-cyan-400",hoverGlow:"hover:shadow-cyan-500/50",darkBg:"bg-cyan-900/20"},{icon:n.Truck,label:"Shipped",count:d,unit:"order",bgGradient:"from-green-500 to-green-600",borderColor:"border-green-400",hoverGlow:"hover:shadow-green-500/50",darkBg:"bg-green-900/20"}];return(0,b.jsxs)("div",{className:"bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 border border-slate-700 rounded-2xl p-8 shadow-2xl hover:shadow-2xl transition-shadow duration-300",children:[(0,b.jsxs)("div",{className:"mb-10 flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-4xl font-bold text-white tracking-tight mb-2",children:"Production Status"}),(0,b.jsx)("p",{className:"text-sm text-slate-400 uppercase tracking-widest font-semibold",children:e?`Orders for ${h}`:"Orders for today"})]}),f&&(0,b.jsx)("button",{onClick:f,disabled:g,className:"p-3 hover:bg-slate-800 rounded-lg transition-colors duration-200 text-slate-300 hover:text-white disabled:opacity-50","aria-label":"Refresh production status",title:"Refresh production status",children:(0,b.jsx)(o.RefreshCw,{className:`w-6 h-6 ${g?"animate-spin":""}`})})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:i.map((a,c)=>{let d=a.icon,e=a.count;return(0,b.jsxs)("div",{className:`
                relative overflow-hidden rounded-xl p-8
                border-2 ${a.borderColor}
                bg-gradient-to-br ${a.bgGradient}
                transition-all duration-300 ${a.hoverGlow}
                hover:shadow-2xl hover:scale-105
                group cursor-pointer
              `,children:[(0,b.jsx)("div",{className:`absolute inset-0 ${a.darkBg} blur-xl opacity-30`}),(0,b.jsxs)("div",{className:"relative z-10",children:[(0,b.jsx)("div",{className:"mb-6 inline-block p-4 bg-white/20 rounded-lg backdrop-blur-sm",children:(0,b.jsx)(d,{className:"w-8 h-8 text-white"})}),(0,b.jsx)("p",{className:"text-sm uppercase font-bold tracking-widest text-white/90 mb-3",children:a.label}),(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsx)("p",{className:"text-6xl font-black text-white leading-none",children:e})}),(0,b.jsx)("p",{className:"text-sm font-semibold text-white/80 uppercase tracking-wider",children:1===e?a.unit:`${a.unit}s`})]}),(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-500"})]},c)})}),(0,b.jsx)("div",{className:"mt-10 pt-8 border-t border-slate-700",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-slate-400 text-sm uppercase tracking-wider font-semibold mb-1",children:"Total stickers in progress"}),(0,b.jsx)("p",{className:"text-3xl font-black text-white",children:a+c})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-slate-500 text-xs uppercase tracking-wider font-semibold mb-1",children:"Status"}),(0,b.jsx)("p",{className:"text-lg font-bold text-green-400",children:"Live"})]})]})})]})}function q({proofs:a,isLoading:c}){let e=(0,d.useNavigate)();return c?(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"âœ… Approved Proofs"}),(0,b.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0].map((a,c)=>(0,b.jsx)("div",{className:"h-16 bg-gray-100 rounded-lg animate-pulse"},c))})]}):(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"âœ… Approved Proofs"}),0===a.length?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(f.CheckCircle2,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-gray-600 text-sm",children:"No approved proofs for this day"})]}):(0,b.jsx)("div",{className:"space-y-3",children:a.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[a.thumbnailUrl&&(0,b.jsx)("img",{src:a.thumbnailUrl,alt:"Proof thumbnail",className:"w-12 h-12 rounded object-cover bg-gray-200"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:a.customerName}),(0,b.jsxs)("p",{className:"text-xs text-gray-600",children:["Order #",a.orderId]}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Approved"," ",new Date(a.approvedAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]})]})]}),(0,b.jsx)("button",{onClick:()=>e(`/admin/orders/${a.orderId}`),className:"px-3 py-2 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded transition-colors",children:"View Order"})]},a.id))})]})}var r=a.i(32860);function s({orders:a,isLoading:c,selectedDate:e}){let f=(0,d.useNavigate)();if(c)return(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"ðŸ“‹ Recent Orders"}),(0,b.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0].map((a,c)=>(0,b.jsx)("div",{className:"h-20 bg-gray-100 rounded-lg animate-pulse"},c))})]});let g=e?new Date(e+"T00:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"today";return(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"ðŸ“‹ Recent Orders"}),0===a.length?(0,b.jsx)("div",{className:"text-center py-8",children:(0,b.jsxs)("p",{className:"text-gray-600 text-sm",children:["No orders for ",g]})}):(0,b.jsx)("div",{className:"space-y-3",children:a.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsxs)("span",{className:"font-semibold text-gray-900",children:["Order #",a.id]}),(0,b.jsx)("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${(a=>{switch(a?.toUpperCase()){case"NEW":case"PENDING":return"bg-blue-100 text-blue-800";case"PRINTING":return"bg-orange-100 text-orange-800";case"CUTTING":case"PRINTED":return"bg-cyan-100 text-cyan-800";case"SHIPPED":return"bg-green-100 text-green-800";case"DELIVERED":return"bg-emerald-100 text-emerald-800";default:return"bg-gray-100 text-gray-800"}})(a.status)}`,children:a.status||"NEW"})]}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.customerName}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:new Date(a.dateCreated).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"font-semibold text-gray-900",children:["$",a.total.toFixed(2)]}),(0,b.jsxs)("button",{onClick:()=>f(`/admin/orders/${a.id}`),className:"text-blue-600 hover:text-blue-700 text-sm font-medium inline-flex items-center gap-1 mt-2",children:["View ",(0,b.jsx)(r.ArrowRight,{className:"w-3 h-3"})]})]})]},a.id))})]})}function t(){let a=(0,d.useNavigate)(),[f,g]=(0,c.useState)(!1),[i,j]=(0,c.useState)(!0),[l,m]=(0,c.useState)(()=>new Date().toISOString().split("T")[0]),[n,o]=(0,c.useState)([]),[r,t]=(0,c.useState)(0),[u,v]=(0,c.useState)(0),[w,x]=(0,c.useState)(0),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)([]),[G,H]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let b=localStorage.getItem("authToken"),c="true"===localStorage.getItem("isAdmin");b&&c?(g(!0),I(),j(!1)):a("/login")},[a]),(0,c.useEffect)(()=>{f&&(K(),L())},[l,f]);let I=async()=>{try{let a=localStorage.getItem("authToken");if(!a)return;let b=await fetch("/api/admin/analytics",{headers:{Authorization:`Bearer ${a}`}});if(b.ok){let a=await b.json();o(a.revenueByDay||[])}else console.error("Failed to fetch analytics:",b.statusText),o([])}catch(a){console.error("Error fetching analytics data:",a),o([])}},J=async()=>{D(!0),await K(),D(!1)},K=async()=>{try{C||B(!0);let a=localStorage.getItem("authToken");if(!a)return;let b=await fetch(`/api/admin/all-orders?date=${l}&limit=10&page=1`,{headers:{Authorization:`Bearer ${a}`}});if(b.ok){let a=(await b.json()).orders||[],c=a.filter(a=>a.status?.toUpperCase()==="PRINTING").reduce((a,b)=>{let c=(b.orderItems||[]).reduce((a,b)=>a+(b.quantity||0),0);return a+c},0),d=a.filter(a=>a.status?.toUpperCase()==="CUTTING").reduce((a,b)=>{let c=(b.orderItems||[]).reduce((a,b)=>a+(b.quantity||0),0);return a+c},0),e=a.filter(a=>a.status?.toUpperCase()==="SHIPPED").length;t(c),v(d),x(e),z(a)}else console.error("Failed to fetch orders:",b.statusText),z([])}catch(a){console.error("Error fetching orders:",a),z([])}finally{C||B(!1),C&&D(!1)}},L=async()=>{try{H(!0);let a=localStorage.getItem("authToken");if(!a)return;let b=await fetch(`/api/admin/proofs?date=${l}&status=APPROVED&limit=10&page=1`,{headers:{Authorization:`Bearer ${a}`}});if(b.ok){let a=await b.json();F(a.proofs||[])}else console.error("Failed to fetch proofs:",b.statusText),F([])}catch(a){console.error("Error fetching proofs:",a),F([])}finally{H(!1)}};return!f||i?null:(0,b.jsx)(e.default,{children:(0,b.jsxs)("div",{className:"py-6",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"Welcome back! Here's what's happening with your store today."})]}),(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)(h,{})}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(k,{salesData:n,selectedDate:l,onDateSelect:m}),(0,b.jsx)(p,{printingCount:r,printedCount:u,shippedCount:w,selectedDate:l,onRefresh:J,isRefreshing:C}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsx)(q,{proofs:E,isLoading:G}),(0,b.jsx)(s,{orders:y,isLoading:A,selectedDate:l})]})]})]})})}a.s(["default",()=>t],31050)}];

//# sourceMappingURL=client_pages_AdminDashboard_tsx_3dc6a66d._.js.map