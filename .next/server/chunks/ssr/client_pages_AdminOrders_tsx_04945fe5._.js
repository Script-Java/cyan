module.exports=[51997,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(65967),e=a.i(14001),f=a.i(51661),g=a.i(92e3),h=a.i(96221),i=a.i(83497),j=a.i(34075),k=a.i(40695);a.i(60613);var l=a.i(77687);function m({orderId:a,orderNumber:d,shippingAddress:e,onClose:f,onSuccess:m}){let{toast:n}=(0,l.useToast)(),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)("usps"),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)("16"),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(null),K=(0,c.useCallback)(async()=>{try{let a=localStorage.getItem("authToken");if(!a){console.warn("No auth token found, using default carriers"),r([{name:"USPS",code:"usps"},{name:"UPS",code:"ups"},{name:"FedEx",code:"fedex"}]),v("usps");return}let b=await fetch("/api/shipping/carriers",{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(!b.ok){let a=await b.json().catch(()=>({}));throw console.error("API error:",a),Error(a.error||"Failed to fetch carriers")}let c=await b.json(),d=Array.isArray(c)?c:c.carriers||[];if(0===d.length)throw Error("No carriers returned");r(d),v(d[0].code)}catch(a){console.error("Failed to fetch carriers:",a),r([{name:"USPS",code:"usps"},{name:"UPS",code:"ups"},{name:"FedEx",code:"fedex"},{name:"DHL Express",code:"dhl_express"},{name:"OnTrac",code:"ontrac"}]),v("usps")}},[]),L=(0,c.useCallback)(async a=>{try{let b=localStorage.getItem("authToken");if(!b){console.warn("No auth token found, using default services"),t([]);return}let c=await fetch(`/api/shipping/services?carrierCode=${a}`,{headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}});if(!c.ok){let a=await c.json().catch(()=>({}));throw console.error("API error:",a),Error(a.error||"Failed to fetch services")}let d=await c.json(),e=Array.isArray(d)?d:d.services||[];t(e),e.length>0&&x(e[0].code)}catch(b){console.error("Failed to fetch services:",b),t({usps:[{name:"USPS Priority Mail",code:"usps_priority_mail"},{name:"USPS Priority Mail Express",code:"usps_priority_mail_express"},{name:"USPS First Class Mail",code:"usps_first_class_mail"}],ups:[{name:"UPS Ground",code:"ups_ground"},{name:"UPS 2nd Day Air",code:"ups_2nd_day_air"},{name:"UPS Next Day Air",code:"ups_next_day_air"}],fedex:[{name:"FedEx Ground",code:"fedex_ground"},{name:"FedEx 2Day",code:"fedex_2day"},{name:"FedEx Overnight",code:"fedex_overnight"}]}[a]||[])}},[]);(0,c.useEffect)(()=>{K()},[K]),(0,c.useEffect)(()=>{u&&L(u)},[u,L]);let M=async b=>{if(b.preventDefault(),J(null),!w)return void J("Please select a shipping service");if(!y||0>=parseFloat(y))return void J("Please enter a valid weight");p(!0);try{let b=localStorage.getItem("authToken"),c={orderId:a,carrier:u,service:w,weight:parseFloat(y),...A&&C&&E&&{dimensions:{length:parseFloat(A),width:parseFloat(C),height:parseFloat(E)}},testLabel:G},d=await fetch("/api/shipping/label",{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify(c)}),e=await d.json();if(!d.ok)throw Error(e.error||"Failed to create shipping label");n.success("Shipping label created successfully!"),e.labelUrl&&window.open(e.labelUrl,"_blank"),m(),f()}catch(b){let a=b instanceof Error?b.message:"Failed to create shipping label";J(a),n.error(a)}finally{p(!1)}};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-gray-900 rounded-lg shadow-xl max-w-md w-full mx-4 border border-white/10",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(i.Package,{className:"w-5 h-5 text-green-400"}),(0,b.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Purchase Shipping Label"})]}),(0,b.jsx)("button",{onClick:f,disabled:o,className:"text-white/60 hover:text-white transition-colors disabled:opacity-50",children:(0,b.jsx)(j.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("form",{onSubmit:M,className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{className:"bg-white/5 rounded-lg p-3 border border-white/10",children:[(0,b.jsx)("p",{className:"text-sm text-white/60",children:"Order"}),(0,b.jsxs)("p",{className:"font-semibold text-white",children:["#",d]})]}),e&&(0,b.jsxs)("div",{className:"bg-white/5 rounded-lg p-3 border border-white/10",children:[(0,b.jsx)("p",{className:"text-sm text-white/60 mb-1",children:"Shipping To"}),(0,b.jsxs)("p",{className:"text-sm text-white",children:[e.first_name," ",e.last_name]}),(0,b.jsxs)("p",{className:"text-xs text-white/60",children:[e.street_1,", ",e.city,","," ",e.state_or_province," ",e.postal_code]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Carrier"}),(0,b.jsx)("select",{value:u,onChange:a=>v(a.target.value),disabled:o||0===q.length,className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-green-500/50 disabled:opacity-50",children:q.map(a=>(0,b.jsx)("option",{value:a.code,className:"bg-gray-900",children:a.name},a.code))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Service"}),(0,b.jsxs)("select",{value:w,onChange:a=>x(a.target.value),disabled:o||0===s.length,className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-green-500/50 disabled:opacity-50",children:[(0,b.jsx)("option",{value:"",className:"bg-gray-900",children:0===s.length?"Loading services...":"Select a service..."}),s.map(a=>(0,b.jsx)("option",{value:a.code,className:"bg-gray-900",children:a.name},a.code))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-white mb-2",children:"Weight (ounces) *"}),(0,b.jsx)("input",{type:"number",value:y,onChange:a=>z(a.target.value),disabled:o,min:"0.1",step:"0.1",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-green-500/50 disabled:opacity-50",placeholder:"Enter weight in ounces"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-white",children:"Dimensions (inches) - Optional"}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,b.jsx)("input",{type:"number",value:A,onChange:a=>B(a.target.value),disabled:o,min:"0",step:"0.1",className:"px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-green-500/50 disabled:opacity-50",placeholder:"Length"}),(0,b.jsx)("input",{type:"number",value:C,onChange:a=>D(a.target.value),disabled:o,min:"0",step:"0.1",className:"px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-green-500/50 disabled:opacity-50",placeholder:"Width"}),(0,b.jsx)("input",{type:"number",value:E,onChange:a=>F(a.target.value),disabled:o,min:"0",step:"0.1",className:"px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-green-500/50 disabled:opacity-50",placeholder:"Height"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"testLabel",checked:G,onChange:a=>H(a.target.checked),disabled:o,className:"w-4 h-4 rounded border-white/20 cursor-pointer disabled:opacity-50"}),(0,b.jsx)("label",{htmlFor:"testLabel",className:"text-sm text-white/70",children:"Test Label (won't be charged)"})]}),I&&(0,b.jsxs)("div",{className:"flex gap-2 p-3 bg-red-500/20 border border-red-500/30 rounded-lg",children:[(0,b.jsx)(g.AlertCircle,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),(0,b.jsx)("p",{className:"text-sm text-red-300",children:I})]}),(0,b.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,b.jsx)(k.Button,{type:"button",onClick:f,disabled:o,variant:"outline",className:"flex-1 border-white/10 text-white hover:bg-white/5",children:"Cancel"}),(0,b.jsx)(k.Button,{type:"submit",disabled:o,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:o?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating Label..."]}):"Create Label"})]})]})]})})}var n=a.i(56748),o=a.i(95694),p=a.i(87532),q=a.i(69012),r=a.i(38632),s=a.i(32860),t=a.i(24569),u=a.i(10227),v=a.i(84505),w=a.i(4720);function x(){let a=(0,d.useNavigate)(),[g,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)([]),[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)(!0),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)("all"),[F,G]=(0,c.useState)(!0),[H,I]=(0,c.useState)(null),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)(null),[N,O]=(0,c.useState)(null),[P,Q]=(0,c.useState)(null),[R,S]=(0,c.useState)(1),[T,U]=(0,c.useState)(!1),[V,W]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let b=localStorage.getItem("authToken"),c="true"===localStorage.getItem("isAdmin");b&&c?(j(!0),S(1),l([]),X(1,!0)):a("/login")},[a]);let X=async(a=1,b=!1,c=0)=>{try{let d=localStorage.getItem("authToken");if(!d){console.error("No authentication token found"),A(!1),W(!1);return}let e=new AbortController,f=setTimeout(()=>e.abort(),12e4),g=await fetch(`/api/admin/all-orders?page=${a}&limit=20`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},signal:e.signal});if(clearTimeout(f),!g.ok){let d=await g.text().catch(()=>"");if(console.error(`Failed to fetch orders: ${g.status} ${g.statusText}`,d),g.status>=500&&c<2){console.log(`Retrying orders fetch (attempt ${c+2})...`),setTimeout(()=>X(a,b,c+1),1e3*(c+1));return}A(!1),W(!1);return}let h=await g.json(),i=h.orders||[];b?(l(i),y(i)):(l(a=>[...a,...i]),y(a=>[...a,...i])),S(a),U(h.pagination?.hasMore||!1),console.log(`Loaded page ${a}, has more: ${h.pagination?.hasMore}`)}catch(d){if(d instanceof Error&&"AbortError"===d.name?console.error("Orders fetch timeout after 120 seconds"):console.error("Error fetching orders:",d instanceof Error?d.message:String(d)),c<2){console.log(`Retrying orders fetch (attempt ${c+2}) after network error...`),setTimeout(()=>X(a,b,c+1),1e3*(c+1));return}}finally{A(!1),W(!1)}};(0,c.useEffect)(()=>{let a=k;if(F){let b=new Date;b.setDate(b.getDate()-7),a=a.filter(a=>new Date(a.dateCreated)<b)}B&&(a=a.filter(a=>a.id.toString().includes(B)||a.customerName.toLowerCase().includes(B.toLowerCase())||a.customerEmail.toLowerCase().includes(B.toLowerCase()))),"all"!==D&&(a=a.filter(a=>a.status===D)),y(a)},[B,D,k,F]);let Y=a=>"pending_payment"===a?"Awaiting Payment":"paid"===a?"Payment Confirmed":null,Z=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),$=a=>{if(null==a)return"N/A";if("string"==typeof a)return a;if("number"==typeof a)return String(a);if("boolean"==typeof a)return a?"Yes":"No";if(Array.isArray(a))return a.join(", ");if("object"==typeof a)try{return JSON.stringify(a)}catch{return"Complex Object"}return String(a)};return g?(0,b.jsxs)(e.default,{children:[(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Orders"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"View and manage all orders across all statuses"})]}),z?(0,b.jsx)("div",{className:"flex justify-center items-center h-96",children:(0,b.jsx)("div",{className:"text-gray-600",children:"Loading orders..."})}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(p.Search,{className:"absolute left-3 top-3.5 w-4 h-4 text-gray-400"}),(0,b.jsx)("input",{type:"text",placeholder:"Search by order, customer, or email...",value:B,onChange:a=>C(a.target.value),className:"w-full pl-10 pr-4 py-2 bg-white border border-gray-200 rounded-lg text-gray-900 placeholder-gray-400 text-sm focus:outline-none focus:ring-2 focus:ring-green-500/50"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(q.Filter,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),(0,b.jsxs)("select",{value:D,onChange:a=>E(a.target.value),className:"px-3 py-2 bg-white border border-gray-200 rounded-lg text-gray-900 text-sm focus:outline-none focus:ring-2 focus:ring-green-500/50",children:[(0,b.jsx)("option",{value:"all",children:"All Statuses"}),(0,b.jsx)("option",{value:"pending_payment",children:"Pending Payment"}),(0,b.jsx)("option",{value:"paid",children:"Awaiting Fulfillment"}),(0,b.jsx)("option",{value:"pending",children:"Pending"}),(0,b.jsx)("option",{value:"processing",children:"Processing"}),(0,b.jsx)("option",{value:"printing",children:"Printing"}),(0,b.jsx)("option",{value:"preparing for shipping",children:"Preparing for Shipping"}),(0,b.jsx)("option",{value:"in transit",children:"In Transit"}),(0,b.jsx)("option",{value:"shipped",children:"Shipped"}),(0,b.jsx)("option",{value:"delivered",children:"Delivered"}),(0,b.jsx)("option",{value:"completed",children:"Completed"}),(0,b.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 px-3 py-2 bg-white border border-gray-200 rounded-lg w-fit",children:[(0,b.jsx)("input",{type:"checkbox",id:"hideRecentOrders",checked:F,onChange:a=>G(a.target.checked),className:"w-4 h-4 rounded border border-gray-300 bg-white cursor-pointer accent-green-500"}),(0,b.jsx)("label",{htmlFor:"hideRecentOrders",className:"text-sm text-gray-700 cursor-pointer font-medium",children:"Hide orders from past 7 days"})]})]}),x.length>0?(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[(0,b.jsx)("div",{className:"px-6 py-3 border-b border-gray-200 bg-gray-50",children:(0,b.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["Orders",(0,b.jsxs)("span",{className:"ml-3 text-sm font-normal text-gray-600",children:[x.length," ",1===x.length?"order":"orders"]})]})}),(0,b.jsx)("div",{className:"divide-y divide-gray-200",children:x.map(c=>{var d,e,f;return(0,b.jsxs)("div",{children:[(0,b.jsxs)("button",{onClick:()=>a(`/admin/orders/${c.id}`),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors text-left",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:(d=c.id,`SY-5${4001+d}`)}),(0,b.jsx)("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${(a=>{switch(a){case"pending_payment":return"text-amber-300 bg-amber-500/20 border border-amber-500/30";case"paid":return"text-emerald-300 bg-emerald-500/20 border border-emerald-500/30";case"pending":return"text-orange-300 bg-orange-500/20 border border-orange-500/30";case"processing":return"text-yellow-300 bg-yellow-500/20 border border-yellow-500/30";case"printing":return"text-purple-300 bg-purple-500/20 border border-purple-500/30";case"preparing for shipping":return"text-indigo-300 bg-indigo-500/20 border border-indigo-500/30";case"in transit":return"text-blue-300 bg-blue-500/20 border border-blue-500/30";case"shipped":return"text-green-300 bg-green-500/20 border border-green-500/30";case"delivered":return"text-cyan-300 bg-cyan-500/20 border border-cyan-500/30";case"cancelled":return"text-red-300 bg-red-500/20 border border-red-500/30";default:return"text-gray-600 bg-gray-100 border border-gray-200"}})(c.status)}`,children:{pending_payment:"Pending Payment",paid:"Awaiting Fulfillment",pending:"Pending",processing:"Processing",printing:"Printing","preparing for shipping":"Preparing for Shipping","in transit":"In Transit",shipped:"Shipped",delivered:"Delivered",completed:"Completed",cancelled:"Cancelled"}[e=c.status]||e.charAt(0).toUpperCase()+e.slice(1)}),Y(c.status)&&(0,b.jsx)("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${"pending_payment"===(f=c.status)?"text-orange-600 bg-orange-50 border border-orange-200":"paid"===f?"text-green-600 bg-green-50 border border-green-200":""}`,children:Y(c.status)})]}),(0,b.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:[c.customerName," •"," ",(0,b.jsx)("span",{className:"text-gray-500",children:c.customerEmail})]}),(0,b.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:Z(c.dateCreated)})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 flex-shrink-0 ml-4",children:[(0,b.jsxs)("span",{className:"font-semibold text-green-600 text-right",children:["$",c.total.toFixed(2)]}),(0,b.jsx)(s.ArrowRight,{className:"w-5 h-5 text-gray-600"})]})]}),H===c.id&&(0,b.jsxs)("div",{className:"px-6 py-4 bg-white border-t border-gray-200 space-y-4",children:[(0,b.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,b.jsxs)("button",{onClick:()=>K(c.id),className:"inline-flex items-center gap-2 px-4 py-2 bg-green-100 hover:bg-green-200 border border-green-300 rounded-lg text-green-700 hover:text-green-800 transition-colors text-sm font-medium",children:[(0,b.jsx)(t.Edit,{className:"w-4 h-4"}),"Edit Status & Tracking"]}),(0,b.jsxs)("button",{onClick:()=>M(c.id),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-100 hover:bg-blue-200 border border-blue-300 rounded-lg text-blue-700 hover:text-blue-800 transition-colors text-sm font-medium",children:[(0,b.jsx)(u.Truck,{className:"w-4 h-4"}),"Purchase Shipping Label"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Price Breakdown"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[(0,b.jsxs)("div",{className:"bg-gray-50 rounded border border-gray-200 p-3",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"Subtotal"}),(0,b.jsxs)("p",{className:"text-sm font-semibold text-gray-900",children:["$",(c.subtotal||.8*c.total).toFixed(2)]})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded border border-gray-200 p-3",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"Tax"}),(0,b.jsxs)("p",{className:"text-sm font-semibold text-gray-900",children:["$",(c.tax||.1*c.total).toFixed(2)]})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded border border-gray-200 p-3",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"Shipping"}),(0,b.jsxs)("p",{className:"text-sm font-semibold text-gray-900",children:["$",(c.shipping||0).toFixed(2)]})]}),(0,b.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded p-3",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"Total"}),(0,b.jsxs)("p",{className:"text-sm font-semibold text-green-700",children:["$",c.total.toFixed(2)]})]})]})]}),c.orderItems&&c.orderItems.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:["Order Items (",c.orderItems.length,")"]}),(0,b.jsx)("div",{className:"space-y-4",children:c.orderItems.map((a,d)=>(0,b.jsx)("div",{className:"bg-white rounded border border-gray-200 p-4",children:(0,b.jsxs)("div",{className:"flex gap-4 items-start",children:[a.design_file_url&&(0,b.jsxs)("div",{className:"flex-shrink-0 flex flex-col gap-2",children:[(0,b.jsxs)("div",{className:"w-24 h-24 bg-gray-100 border border-gray-300 rounded-lg overflow-hidden flex items-center justify-center relative group",children:[a.design_file_url.startsWith("data:")?(0,b.jsx)(b.Fragment,{children:a.design_file_url.match(/^data:image\/(jpg|jpeg|png|gif|webp)/i)?(0,b.jsx)("img",{src:a.design_file_url,alt:"Design Upload",className:"w-full h-full object-cover",onError:a=>{a.currentTarget.style.display="none"}}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-full",children:[(0,b.jsx)(w.FileText,{className:"w-6 h-6 text-gray-400 mb-1"}),(0,b.jsx)("span",{className:"text-xs text-gray-500 text-center px-1",children:"File"})]})}):(0,b.jsx)(b.Fragment,{children:a.design_file_url.match(/\.(jpg|jpeg|png|gif|webp)$/i)?(0,b.jsx)("img",{src:a.design_file_url,alt:"Design Upload",className:"w-full h-full object-cover",onError:a=>{a.currentTarget.style.display="none"}}):(0,b.jsx)(w.FileText,{className:"w-6 h-6 text-gray-400"})}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 flex items-center justify-center gap-1 transition-all opacity-0 group-hover:opacity-100",children:(0,b.jsx)("a",{href:a.design_file_url,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 bg-white rounded hover:bg-gray-100 transition-colors",title:"View full design",children:(0,b.jsx)(r.Image,{className:"w-4 h-4 text-gray-700"})})})]}),(0,b.jsxs)("button",{onClick:()=>{if(a.design_file_url.startsWith("data:")){let b=document.createElement("a");b.href=a.design_file_url,b.download=`design-${a.id||"file"}`,b.click()}else window.open(a.design_file_url,"_blank")},className:"inline-flex items-center justify-center gap-1 px-2 py-1 text-xs font-medium bg-blue-50 hover:bg-blue-100 text-blue-700 border border-blue-200 rounded transition-colors",title:"Download design file",children:[(0,b.jsx)(v.Download,{className:"w-3 h-3"}),"Download"]})]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h5",{className:"text-gray-900 font-semibold text-sm mb-2",children:a.product_name||"Product"}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"QUANTITY"}),(0,b.jsxs)("p",{className:"text-sm text-gray-900 font-medium",children:[a.quantity||1," ",1===a.quantity?"unit":"units"]})]}),a.options&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"SPECIFICATIONS"}),(0,b.jsxs)("button",{onClick:()=>{console.log("Edit costs clicked - Full context:",{orderId:c.id,orderIdType:typeof c.id,item:a,itemId:a.id??d,itemIdType:typeof(a.id??d)}),Q({orderId:c.id,itemId:a.id??d,productName:a.product_name||"Product",options:Array.isArray(a.options)?a.options:Object.entries(a.options).map(([a,b])=>({option_id:a,option_value:$(b),price:"object"==typeof b&&b.price||0}))})},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-green-100 hover:bg-green-200 text-green-700 border border-green-300 rounded transition-colors",children:[(0,b.jsx)(t.Edit,{className:"w-3 h-3"}),"Edit Costs"]})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:Array.isArray(a.options)?a.options.length>0?a.options.map((a,c)=>{let d=a.option_id||"",e=a.option_value||"",f=a.price||a.modifier_price||0;return d&&e?(0,b.jsxs)("span",{className:"inline-block bg-blue-50 text-blue-900 px-3 py-1 rounded-full text-xs font-medium border border-blue-200",children:[d,":"," ",e,f>0&&(0,b.jsxs)("span",{className:"ml-1 font-semibold",children:["(+$",f.toFixed(2),")"]})]},c):null}):null:Object.entries(a.options).map(([a,c])=>{let d=$(c),e=/^\d+$/.test(a)?d:`${a}: ${d}`,f="object"==typeof c&&c.price||0;return(0,b.jsxs)("span",{className:"inline-block bg-blue-50 text-blue-900 px-3 py-1 rounded-full text-xs font-medium border border-blue-200",children:[e,f>0&&(0,b.jsxs)("span",{className:"ml-1 font-semibold",children:["(+$",f.toFixed(2),")"]})]},a)})})]})]})]})},d))})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded border border-gray-200 p-3",children:[(0,b.jsx)("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Tracking Information"}),c.tracking_number?(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"Tracking Number"}),(0,b.jsx)("p",{className:"text-sm font-mono text-gray-900",children:c.tracking_number})]}),c.shipped_date&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"Shipped"}),(0,b.jsx)("p",{className:"text-sm text-gray-900",children:Z(c.shipped_date)})]})]}):(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"No tracking information yet"})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded border border-gray-200 p-3",children:[(0,b.jsx)("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Customer"}),(0,b.jsx)("p",{className:"text-sm text-gray-900",children:c.customerName}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:c.customerEmail})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded border border-gray-200 p-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("h4",{className:"text-sm font-semibold text-gray-900",children:"Shipping Address"}),(0,b.jsxs)("button",{onClick:()=>O(c.id),className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 hover:bg-blue-200 border border-blue-300 rounded text-blue-700 hover:text-blue-800 transition-colors text-xs font-medium",children:[(0,b.jsx)(t.Edit,{className:"w-3 h-3"}),c.shipping_addresses&&c.shipping_addresses.length>0?"Edit":"Add"]})]}),c.shipping_addresses&&c.shipping_addresses.length>0?c.shipping_addresses.map((a,c)=>(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsxs)("p",{className:"text-gray-900",children:[a.first_name," ",a.last_name]}),(0,b.jsx)("p",{className:"text-gray-600",children:a.street_1}),a.street_2&&(0,b.jsx)("p",{className:"text-gray-600",children:a.street_2}),(0,b.jsxs)("p",{className:"text-gray-600",children:[a.city,", ",a.state_or_province," ",a.postal_code]}),(0,b.jsx)("p",{className:"text-gray-600",children:a.country_iso2}),a.phone&&(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:a.phone})]},c)):(0,b.jsx)("p",{className:"text-sm text-gray-600",children:'No shipping address yet. Click "Add" to add one.'})]}),c.proofs&&c.proofs.length>0&&(0,b.jsxs)("div",{className:"bg-blue-50 rounded border border-blue-200 p-3",children:[(0,b.jsx)("h4",{className:"text-sm font-semibold text-blue-900 mb-3",children:"Artwork Proofs"}),(0,b.jsx)("div",{className:"space-y-3",children:c.proofs.map((a,c)=>(0,b.jsxs)("div",{className:"bg-white rounded border border-blue-100 p-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:["approved"===a.status&&(0,b.jsx)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs font-semibold rounded-full",children:"✓ Approved"}),"revisions_requested"===a.status&&(0,b.jsx)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-amber-100 text-amber-700 text-xs font-semibold rounded-full",children:"⟳ Revisions Requested"}),"pending"===a.status&&(0,b.jsx)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-gray-100 text-gray-700 text-xs font-semibold rounded-full",children:"⏳ Pending Review"})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:new Date(a.updatedAt||a.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),a.description&&(0,b.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:a.description})]},c))})]})]})]},c.id)})}),x.length>0&&T&&(0,b.jsx)("div",{className:"mt-6 flex justify-center",children:(0,b.jsx)("button",{onClick:()=>{W(!0),X(R+1)},disabled:V,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors",children:V?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Loader2,{className:"w-4 h-4 animate-spin"}),"Loading..."]}):"Load More Orders"})})]}):(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-8 sm:p-12 text-center",children:[(0,b.jsx)(i.Package,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"No Orders Found"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:B||"all"!==D||F?"No orders match your search or filter criteria.":"There are no orders at this time."})]}),x.length>0&&(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Total Orders"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x.length})]}),(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Total Revenue"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["$",x.reduce((a,b)=>a+b.total,0).toFixed(2)]})]}),(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Avg Order Value"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["$",(x.reduce((a,b)=>a+b.total,0)/x.length).toFixed(2)]})]})]})]})]}),null!==J&&(0,b.jsx)(f.default,{orderId:J,currentStatus:k.find(a=>a.id===J)?.status||"",currentTrackingNumber:k.find(a=>a.id===J)?.tracking_number,currentTrackingCarrier:k.find(a=>a.id===J)?.tracking_carrier,currentTrackingUrl:k.find(a=>a.id===J)?.tracking_url,onClose:()=>K(null),currentTrackingCarrier:void 0,currentTrackingUrl:void 0,onSuccess:()=>{K(null),X(R,!1)}}),null!==L&&(0,b.jsx)(m,{orderId:L,orderNumber:L.toString(),shippingAddress:k.find(a=>a.id===L)?.shipping_addresses?.[0],onClose:()=>M(null),onSuccess:()=>{M(null),X(R,!1)}}),null!==N&&(0,b.jsx)(n.default,{orderId:N,currentAddress:k.find(a=>a.id===N)?.shipping_addresses?.[0],onClose:()=>O(null),onSuccess:()=>{O(null),X(R,!1)}}),null!==P&&(0,b.jsx)(o.default,{orderId:P.orderId,itemId:P.itemId,productName:P.productName,options:P.options,onClose:()=>Q(null),onSuccess:()=>{Q(null),X(R,!1)}})]}):null}a.s(["default",()=>x],51997)}];

//# sourceMappingURL=client_pages_AdminOrders_tsx_04945fe5._.js.map