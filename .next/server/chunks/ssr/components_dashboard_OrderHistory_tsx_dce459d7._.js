module.exports=[70426,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(83497),f=a.i(10227),g=a.i(41675),h=a.i(90166),i=a.i(32860),j=a.i(92e3),k=a.i(5784),l=a.i(87532),m=a.i(34075),n=a.i(24987),o=a.i(46842),p=a.i(63519),q=a.i(92258),r=a.i(38632),s=a.i(40695),t=a.i(90297);function u(){let a=(0,d.useRouter)(),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)(!0),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)(1),[I,J]=(0,c.useState)(!1),K=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),L=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a),M=a=>"number"==typeof a?a.toFixed(2):"0.00",N=u.filter(a=>{if(!E.trim())return!0;let b=E.toLowerCase().trim();return!!(a.id.toString().includes(b)||K(a.dateCreated).toLowerCase().includes(b)||a.total.toFixed(2).includes(b)||L(a.total).replace("$","").toLowerCase().includes(b))}),O=async(a=1,b=!0)=>{try{let c=localStorage.getItem("authToken");b?x(!0):z(!0),B("");let d=await fetch(`/api/orders?page=${a}&limit=20`,{headers:{Authorization:`Bearer ${c}`}});if(!d.ok){let a=await d.json();throw Error(a.error||"Failed to fetch order history")}let e=await d.json();b?v(e.orders||[]):v(a=>[...a,...e.orders||[]]),H(a),J(e.pagination?.hasMore||!1)}catch(a){B(a instanceof Error?a.message:"Failed to load order history")}finally{x(!1),z(!1)}};return((0,c.useEffect)(()=>{localStorage.getItem("authToken")?(H(1),v([]),O(1,!0)):a.push("/login")},[a]),w)?(0,b.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,b.jsx)("div",{className:"text-gray-600 text-lg",children:"Loading your orders..."})}):(0,b.jsxs)("div",{className:"bg-white rounded-lg p-4 sm:p-6",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Order History"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"View all your orders and track shipments"})]}),A&&(0,b.jsxs)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex gap-3",children:[(0,b.jsx)(j.AlertCircle,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,b.jsx)("p",{className:"text-sm text-red-800",children:A})]}),u.length>0&&(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(l.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),(0,b.jsx)("input",{type:"text",placeholder:"Search orders by number, date (Dec 1), or amount ($50)...",value:E,onChange:a=>F(a.target.value),className:"w-full pl-10 pr-10 py-2 sm:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),E&&(0,b.jsx)("button",{onClick:()=>F(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",title:"Clear search",children:(0,b.jsx)(m.X,{className:"w-5 h-5"})})]}),E&&(0,b.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Found ",N.length," order",1!==N.length?"s":""]})]}),0===u.length&&!A&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(e.Package,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Orders Yet"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:"You haven't placed any orders yet. Start shopping to see your order history here."}),(0,b.jsx)(s.Button,{onClick:()=>a.push("/ecwid-store"),className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Shop Now"})]}),u.length>0&&0===N.length&&E&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(l.Search,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Orders Found"}),(0,b.jsxs)("p",{className:"text-gray-600 mb-6",children:['No orders match "',E,'". Try searching by order number, date, or amount.']}),(0,b.jsx)(s.Button,{onClick:()=>F(""),className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Clear Search"})]}),N.length>0&&(0,b.jsx)("div",{className:"space-y-4",children:N.map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[(0,b.jsxs)("button",{onClick:()=>D(C===a.id?null:a.id),className:"w-full px-4 sm:px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4 flex-1 text-left",children:[(0,b.jsx)("div",{className:"bg-gray-100 p-2 sm:p-3 rounded-lg flex-shrink-0",children:(0,b.jsx)(e.Package,{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-600"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 flex-wrap",children:[(0,b.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:(0,t.formatOrderNumber)(a.id)}),(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${(a=>{switch("pending_payment"===a.toLowerCase()?"processing":a.toLowerCase()){case"pending":return"text-orange-600 bg-orange-50";case"processing":return"text-yellow-600 bg-yellow-50";case"printing":return"text-purple-600 bg-purple-50";case"preparing for shipping":return"text-indigo-600 bg-indigo-50";case"in transit":return"text-blue-600 bg-blue-50";case"shipped":return"text-emerald-600 bg-emerald-50";case"delivered":return"text-cyan-600 bg-cyan-50";case"completed":return"text-green-600 bg-green-50";case"cancelled":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}})(a.status)}`,children:("pending_payment"===a.status?"processing":a.status).charAt(0).toUpperCase()+("pending_payment"===a.status?"processing":a.status).slice(1)})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 sm:gap-6 text-xs sm:text-sm text-gray-600 flex-wrap",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(g.Calendar,{className:"w-3 h-3 sm:w-4 sm:h-4"}),K(a.dateCreated)]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(e.Package,{className:"w-3 h-3 sm:w-4 sm:h-4"}),a.itemCount," item",1!==a.itemCount?"s":""]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(h.DollarSign,{className:"w-3 h-3 sm:w-4 sm:h-4"}),L(a.total)]}),a.estimated_delivery_date&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-blue-600 font-medium",children:[(0,b.jsx)(g.Calendar,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Delivery:"})," ",K(a.estimated_delivery_date)]}),a.tracking_number&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-green-600 font-medium",children:[(0,b.jsx)(f.Truck,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Tracking:"})," ",a.tracking_number]})]})]})]}),(0,b.jsx)(k.ChevronDown,{className:`w-5 h-5 text-gray-400 flex-shrink-0 transition-transform ${C===a.id?"rotate-180":""}`})]}),C===a.id&&(0,b.jsxs)("div",{className:"bg-gray-50 border-t-2 border-gray-200 p-3 sm:p-5 space-y-3 sm:space-y-4",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg border-2 border-blue-200 p-3 sm:p-4 shadow-sm",children:[(0,b.jsxs)("h3",{className:"font-bold text-xs sm:text-sm text-gray-900 mb-2 sm:mb-3 flex items-center gap-2",children:[(0,b.jsx)(o.User,{className:"w-3 h-3 sm:w-4 sm:h-4 text-blue-600"}),"Customer & Shipping Information"]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[a.customerName&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Full Name"}),(0,b.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-900",children:a.customerName})]}),a.customerEmail&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-xs text-gray-600 mb-1 flex items-center gap-1",children:[(0,b.jsx)(q.Mail,{className:"w-3 h-3"}),"Email"]}),(0,b.jsx)("p",{className:"text-sm font-medium text-blue-600 break-all",children:a.customerEmail})]}),a.customerPhone&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-xs text-gray-600 mb-1 flex items-center gap-1",children:[(0,b.jsx)(p.Phone,{className:"w-3 h-3"}),"Phone"]}),(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:a.customerPhone})]}),a.estimated_delivery_date&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-xs text-gray-600 mb-1 flex items-center gap-1",children:[(0,b.jsx)(g.Calendar,{className:"w-3 h-3"}),"Est. Delivery"]}),(0,b.jsx)("p",{className:"text-sm font-medium text-blue-600",children:K(a.estimated_delivery_date)})]})]}),a.shippingAddress&&(0,b.jsxs)("div",{className:"mt-3 sm:mt-4 pt-3 sm:pt-4 border-t border-gray-200",children:[(0,b.jsxs)("p",{className:"text-xs text-gray-600 mb-2 flex items-center gap-1",children:[(0,b.jsx)(n.MapPin,{className:"w-3 h-3"}),"Shipping Address"]}),(0,b.jsxs)("div",{className:"text-xs sm:text-sm text-gray-900 space-y-1",children:[(0,b.jsx)("p",{children:a.shippingAddress.street}),(0,b.jsxs)("p",{children:[a.shippingAddress.city,","," ",a.shippingAddress.state," ",a.shippingAddress.postalCode]}),(0,b.jsx)("p",{children:a.shippingAddress.country})]})]})]}),a.digital_files&&a.digital_files.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"font-bold text-xs sm:text-sm text-gray-900 mb-2 sm:mb-3 flex items-center gap-2",children:[(0,b.jsx)(r.Image,{className:"w-3 h-3 sm:w-4 sm:h-4 text-blue-600"}),"Design Files"]}),(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:a.digital_files.map(a=>(0,b.jsxs)("a",{href:a.file_url,target:"_blank",rel:"noopener noreferrer",className:"relative group overflow-hidden rounded-lg border-2 border-gray-200 hover:border-blue-400 transition-colors h-24 sm:h-28",children:[a.file_type?.includes("image")?(0,b.jsx)("img",{src:a.file_url,alt:a.file_name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform"}):(0,b.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center",children:(0,b.jsx)(e.Package,{className:"w-6 h-6 sm:w-8 sm:h-8 text-gray-400"})}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all flex items-end justify-center opacity-0 group-hover:opacity-100",children:(0,b.jsx)("p",{className:"text-white text-xs font-medium mb-2 px-2 text-center truncate",children:a.file_name})})]},a.id))})]}),a.digital_files&&a.digital_files.length>0&&(0,b.jsxs)("div",{className:"bg-white rounded-lg border-2 border-blue-200 p-3 sm:p-4 shadow-sm",children:[(0,b.jsx)("h4",{className:"text-xs sm:text-sm font-semibold text-gray-900 mb-2 sm:mb-3",children:"ðŸ“ Digital Files"}),(0,b.jsx)("div",{className:"space-y-2",children:a.digital_files.map(a=>(0,b.jsxs)("a",{href:a.file_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between bg-gray-50 p-2 sm:p-3 rounded border border-blue-100 hover:border-blue-400 hover:bg-blue-50 transition-colors gap-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[(0,b.jsx)(e.Package,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 flex-shrink-0"}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"text-xs sm:text-sm font-medium text-blue-900 truncate",children:a.file_name}),a.file_size&&(0,b.jsxs)("p",{className:"text-xs text-gray-600",children:[(a.file_size/1024/1024).toFixed(2)," ","MB"]})]})]}),(0,b.jsx)(i.ArrowRight,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 flex-shrink-0"})]},a.id))})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border-2 border-gray-200 p-3 sm:p-4 shadow-sm",children:[(0,b.jsxs)("h3",{className:"font-bold text-xs sm:text-sm text-gray-900 mb-3 sm:mb-4 flex items-center gap-2",children:[(0,b.jsx)(h.DollarSign,{className:"w-4 h-4 text-gray-600"}),"Order Summary"]}),(0,b.jsxs)("div",{className:"mb-3 sm:mb-4 pb-3 sm:pb-4 border-b border-gray-200",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Items Breakdown:"}),a.items&&a.items.length>0?(0,b.jsx)("div",{className:"space-y-3",children:a.items.map(a=>{let c="number"==typeof a.price_inc_tax?a.price_inc_tax:"number"==typeof a.price_ex_tax?a.price_ex_tax:"number"==typeof a.price?a.price:0,d=c*a.quantity;return(0,b.jsxs)("div",{className:"bg-gray-50 p-2 rounded border border-gray-100 text-xs",children:[a.design_file_url&&(0,b.jsxs)("div",{className:"mb-2",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Artwork file that was uploaded"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[a.design_file_url.startsWith("data:")||a.design_file_url.match(/\.(jpg|jpeg|png|gif|webp)$/i)?(0,b.jsx)("a",{href:a.design_file_url,target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0",children:(0,b.jsx)("img",{src:a.design_file_url,alt:"Design Upload",className:"h-12 w-12 object-cover rounded border border-gray-300 hover:border-blue-400 transition-colors"})}):(0,b.jsx)("a",{href:a.design_file_url,target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 h-12 w-12 flex items-center justify-center rounded border border-gray-300 bg-gray-100",children:(0,b.jsx)(e.Package,{className:"w-4 h-4 text-gray-400"})}),(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:a.product_name})})]})]}),!a.design_file_url&&(0,b.jsx)("p",{className:"font-semibold text-gray-900 mb-1",children:a.product_name}),a.options&&(0,b.jsxs)("div",{className:"pt-2 border-t border-gray-300 space-y-1 mb-2",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-gray-700",children:"Options:"}),(0,b.jsx)("div",{className:"space-y-1",children:Array.isArray(a.options)?a.options.map((a,c)=>{let d=a.option_id||a.name||`Option ${c+1}`,e=a.option_value||a.value||"",f=a.price||a.modifier_price||0;return(0,b.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,b.jsxs)("span",{className:"text-gray-700",children:[d," ",e&&`(${e})`]}),f>0&&(0,b.jsxs)("span",{className:"text-blue-600 font-medium",children:["+$",M(f)]})]},c)}):Object.entries(a.options).map(([a,c])=>{let d="object"==typeof c?c.price||c.modifier_price:0,e="object"==typeof c?c.value||c.name:c,f=a.split("_").map(a=>a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()).join(" ");return(0,b.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,b.jsxs)("span",{className:"text-gray-700",children:[f," ",e&&`(${"string"==typeof e?e:"number"==typeof e?String(e):"boolean"==typeof e?e?"Yes":"No":""})`]}),d>0&&(0,b.jsxs)("span",{className:"text-blue-600 font-medium",children:["+$",M(d)]})]},a)})})]}),(0,b.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("p",{className:"text-gray-600",children:"Per Sticker:"}),(0,b.jsxs)("span",{className:"text-gray-900 font-medium",children:["$",M(c)]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("p",{className:"text-gray-600",children:"Quantity:"}),(0,b.jsx)("span",{className:"text-gray-900 font-medium",children:a.quantity})]}),(0,b.jsxs)("div",{className:"flex justify-between border-t border-gray-200 pt-1 mt-1",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-700",children:"Subtotal:"}),(0,b.jsxs)("span",{className:"font-bold text-gray-900",children:["$",M(d)]})]})]})]},a.id)})}):(0,b.jsx)("p",{className:"text-sm text-gray-500 italic",children:"No items details available"})]}),(0,b.jsxs)("div",{className:"space-y-2 text-xs sm:text-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,b.jsx)("span",{children:"Items Count:"}),(0,b.jsx)("span",{children:a.itemCount})]}),(0,b.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,b.jsx)("span",{children:"Subtotal:"}),(0,b.jsx)("span",{children:L(a.subtotal||a.total)})]}),a.shipping&&(0,b.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,b.jsx)("span",{children:"Shipping:"}),(0,b.jsx)("span",{children:L(a.shipping)})]}),a.tax&&(0,b.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,b.jsx)("span",{children:"Tax:"}),(0,b.jsx)("span",{children:L(a.tax)})]}),(0,b.jsxs)("div",{className:"flex justify-between font-bold text-base sm:text-lg text-gray-900 border-t pt-2 mt-2",children:[(0,b.jsx)("span",{children:"Total:"}),(0,b.jsx)("span",{children:L(a.total)})]})]})]})]})]},a.id))}),I&&(0,b.jsx)("div",{className:"mt-6 text-center",children:(0,b.jsx)(s.Button,{onClick:()=>O(G+1,!1),disabled:y,variant:"outline",className:"px-8",children:y?"Loading...":"Load More Orders"})})]})}a.s(["default",()=>u])}];

//# sourceMappingURL=components_dashboard_OrderHistory_tsx_dce459d7._.js.map