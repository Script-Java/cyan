module.exports=[82761,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(65967),e=a.i(60246),f=a.i(87532),g=a.i(69012),h=a.i(5784),i=a.i(92258),j=a.i(63519),k=a.i(90166),l=a.i(40784),m=a.i(41675),n=a.i(24669);let o=(0,a.i(70106).default)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);var p=a.i(14001),q=a.i(40695);function r(){let a=(0,d.useNavigate)(),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(!0),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)("all"),[F,G]=(0,c.useState)("date"),[H,I]=(0,c.useState)("desc");(0,c.useEffect)(()=>{let b=localStorage.getItem("authToken"),c="true"===localStorage.getItem("isAdmin");b&&c?J():a("/login")},[a]);let J=async()=>{try{y(!0),A("");let a=localStorage.getItem("authToken"),b=await fetch("/api/admin/customers",{headers:{Authorization:`Bearer ${a}`}});if(!b.ok)throw Error("Failed to fetch customers");let c=await b.json();s(c.customers||[])}catch(a){console.error("Error fetching customers:",a),A(a instanceof Error?a.message:"Failed to fetch customers")}finally{y(!1)}},K=async a=>{try{let b=localStorage.getItem("authToken"),c=await fetch(`/api/admin/customers/${a}`,{headers:{Authorization:`Bearer ${b}`}});if(!c.ok)throw Error("Failed to fetch customer details");let d=await c.json();w(d.customer),u(a)}catch(a){console.error("Error fetching customer details:",a),A(a instanceof Error?a.message:"Failed to fetch details")}},L=(0,c.useMemo)(()=>r.filter(a=>{let b=a.email.toLowerCase().includes(B.toLowerCase())||a.firstName.toLowerCase().includes(B.toLowerCase())||a.lastName.toLowerCase().includes(B.toLowerCase())||(a.company?.toLowerCase()||"").includes(B.toLowerCase()),c="all"===D||"with-orders"===D&&a.orderCount>0||"no-orders"===D&&0===a.orderCount;return b&&c}),[r,B,D]),M=(0,c.useMemo)(()=>{let a=[...L],b="asc"===H?1:-1;switch(F){case"name":a.sort((a,c)=>`${a.firstName} ${a.lastName}`.localeCompare(`${c.firstName} ${c.lastName}`)*b);break;case"email":a.sort((a,c)=>a.email.localeCompare(c.email)*b);break;case"orders":a.sort((a,c)=>(a.orderCount-c.orderCount)*b);break;case"spent":a.sort((a,c)=>(a.totalSpent-c.totalSpent)*b);break;case"date":a.sort((a,c)=>(new Date(c.createdAt).getTime()-new Date(a.createdAt).getTime())*b)}return a},[L,F,H]),N={totalCustomers:r.length,customersWithOrders:r.filter(a=>a.orderCount>0).length,totalRevenue:r.reduce((a,b)=>a+b.totalSpent,0),avgOrderValue:r.length>0?r.reduce((a,b)=>a+b.totalSpent,0)/r.filter(a=>a.orderCount>0).length:0},O=({label:a,column:c})=>(0,b.jsxs)("button",{onClick:()=>{F===c?I("asc"===H?"desc":"asc"):(G(c),I("desc"))},className:"flex items-center gap-2 hover:text-blue-600 transition-colors",children:[a,(0,b.jsx)(o,{className:`w-4 h-4 transition-all ${F===c?"text-blue-600":"text-gray-400"}`})]});return(0,b.jsx)(p.default,{children:(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsx)("div",{className:"border-b border-gray-200 bg-white",children:(0,b.jsx)("div",{className:"px-4 sm:px-10 py-8",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,b.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold mb-2 text-gray-900",children:"Customers"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Manage and analyze all customer information"})]})})}),(0,b.jsx)("main",{className:"min-h-screen text-gray-900 px-4 sm:px-10 py-12",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,b.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-600 text-xs font-medium mb-1",children:"Total Customers"}),(0,b.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:N.totalCustomers})]}),(0,b.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,b.jsx)(e.Users,{className:"w-5 h-5 text-blue-600"})})]})}),(0,b.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-600 text-xs font-medium mb-1",children:"Active Customers"}),(0,b.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:N.customersWithOrders})]}),(0,b.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,b.jsx)(l.ShoppingBag,{className:"w-5 h-5 text-purple-600"})})]})}),(0,b.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-600 text-xs font-medium mb-1",children:"Total Revenue"}),(0,b.jsxs)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:["$",N.totalRevenue.toFixed(0)]})]}),(0,b.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,b.jsx)(k.DollarSign,{className:"w-5 h-5 text-green-600"})})]})}),(0,b.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-600 text-xs font-medium mb-1",children:"Avg Order Value"}),(0,b.jsxs)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:["$",N.avgOrderValue.toFixed(0)]})]}),(0,b.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,b.jsx)(n.TrendingUp,{className:"w-5 h-5 text-orange-600"})})]})})]}),(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 mb-8",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(f.Search,{className:"absolute left-3 top-3.5 w-5 h-5 text-gray-400"}),(0,b.jsx)("input",{type:"text",placeholder:"Search by name, email, or company...",value:B,onChange:a=>C(a.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 placeholder-gray-500"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Filter,{className:"w-5 h-5 text-gray-600"}),(0,b.jsxs)("select",{value:D,onChange:a=>E(a.target.value),className:"px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900",children:[(0,b.jsx)("option",{value:"all",children:"All Customers"}),(0,b.jsx)("option",{value:"with-orders",children:"With Orders"}),(0,b.jsx)("option",{value:"no-orders",children:"No Orders"})]})]})]}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Showing"," ",(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:M.length})," ","of"," ",(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:r.length})," ","customers"]})]}),x?(0,b.jsx)("div",{className:"flex justify-center items-center h-96",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(e.Users,{className:"w-12 h-12 text-gray-400 mx-auto mb-3 animate-pulse"}),(0,b.jsx)("p",{className:"text-gray-600 font-medium",children:"Loading customers..."})]})}):z?(0,b.jsx)("div",{className:"flex justify-center items-center h-96",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-red-600 font-medium",children:z}),(0,b.jsx)(q.Button,{onClick:J,className:"mt-4",children:"Retry"})]})}):0===M.length?(0,b.jsx)("div",{className:"flex justify-center items-center h-96",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(e.Users,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-gray-600 font-medium",children:"No customers found"}),(0,b.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:B?"Try adjusting your search":"Customers will appear here"})]})}):(0,b.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg shadow overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-gray-200 bg-gray-50",children:[(0,b.jsx)("th",{className:"px-4 sm:px-6 py-4 text-left w-8"}),(0,b.jsx)("th",{className:"px-4 sm:px-6 py-4 text-left text-sm font-semibold text-gray-900",children:(0,b.jsx)(O,{label:"Name",column:"name"})}),(0,b.jsx)("th",{className:"px-4 sm:px-6 py-4 text-left text-sm font-semibold text-gray-900 hidden sm:table-cell",children:(0,b.jsx)(O,{label:"Email",column:"email"})}),(0,b.jsx)("th",{className:"px-4 sm:px-6 py-4 text-left text-sm font-semibold text-gray-900 hidden md:table-cell",children:"Contact"}),(0,b.jsx)("th",{className:"px-4 sm:px-6 py-4 text-left text-sm font-semibold text-gray-900",children:(0,b.jsx)(O,{label:"Orders",column:"orders"})}),(0,b.jsx)("th",{className:"px-4 sm:px-6 py-4 text-left text-sm font-semibold text-gray-900 hidden sm:table-cell",children:(0,b.jsx)(O,{label:"Spent",column:"spent"})}),(0,b.jsx)("th",{className:"px-4 sm:px-6 py-4 text-left text-sm font-semibold text-gray-900 hidden lg:table-cell",children:(0,b.jsx)(O,{label:"Date",column:"date"})})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200",children:M.map((a,d)=>(0,b.jsxs)(c.default.Fragment,{children:[(0,b.jsxs)("tr",{onClick:()=>{var b;t===(b=a.id)?(u(null),w(null)):K(b)},className:"hover:bg-gray-50 transition-colors duration-200 cursor-pointer",children:[(0,b.jsx)("td",{className:"px-4 sm:px-6 py-4",children:(0,b.jsx)(h.ChevronDown,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${t===a.id?"rotate-180 text-blue-600":""}`})}),(0,b.jsx)("td",{className:"px-4 sm:px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center flex-shrink-0",children:(0,b.jsxs)("span",{className:"text-white font-bold text-sm",children:[a.firstName.charAt(0),a.lastName.charAt(0)]})}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsxs)("p",{className:"font-semibold text-gray-900 text-sm truncate",children:[a.firstName," ",a.lastName]}),a.company&&(0,b.jsx)("p",{className:"text-xs text-gray-600 truncate",children:a.company})]})]})}),(0,b.jsx)("td",{className:"px-4 sm:px-6 py-4 hidden sm:table-cell",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-700 text-sm truncate",children:[(0,b.jsx)(i.Mail,{className:"w-4 h-4 text-gray-400 flex-shrink-0 hidden sm:inline"}),(0,b.jsx)("span",{className:"truncate",children:a.email})]})}),(0,b.jsx)("td",{className:"px-4 sm:px-6 py-4 hidden md:table-cell",children:a.phone?(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-700 text-sm",children:[(0,b.jsx)(j.Phone,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),a.phone]}):(0,b.jsx)("span",{className:"text-sm text-gray-400",children:"â€”"})}),(0,b.jsx)("td",{className:"px-4 sm:px-6 py-4",children:(0,b.jsx)("div",{className:"inline-flex items-center justify-center w-10 h-10 rounded-lg bg-blue-100",children:(0,b.jsx)("span",{className:"font-bold text-blue-600 text-sm",children:a.orderCount})})}),(0,b.jsx)("td",{className:"px-4 sm:px-6 py-4 hidden sm:table-cell",children:(0,b.jsxs)("div",{className:"font-semibold text-gray-900 text-sm",children:["$",a.totalSpent.toFixed(2)]})}),(0,b.jsx)("td",{className:"px-4 sm:px-6 py-4 hidden lg:table-cell",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-700 text-sm",children:[(0,b.jsx)(m.Calendar,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),(0,b.jsx)("span",{children:new Date(a.createdAt).toLocaleDateString()})]})})]}),t===a.id&&v&&(0,b.jsx)("tr",{className:"border-b-2 border-blue-200",children:(0,b.jsx)("td",{colSpan:8,className:"p-0",children:(0,b.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8 py-8 space-y-6 bg-gray-50 border-t border-gray-200",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-gray-900 mb-4 text-lg",children:"Personal Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 font-medium mb-2 uppercase tracking-wide",children:"Email"}),(0,b.jsx)("p",{className:"text-gray-900 text-sm break-all",children:v.email})]}),v.phone&&(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 font-medium mb-2 uppercase tracking-wide",children:"Phone"}),(0,b.jsx)("p",{className:"text-gray-900 text-sm",children:v.phone})]}),v.company&&(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 font-medium mb-2 uppercase tracking-wide",children:"Company"}),(0,b.jsx)("p",{className:"text-gray-900 text-sm",children:v.company})]}),(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 font-medium mb-2 uppercase tracking-wide",children:"Signup Date"}),(0,b.jsx)("p",{className:"text-gray-900 text-sm",children:new Date(v.createdAt).toLocaleDateString()})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-gray-900 mb-4 text-lg",children:"Customer Statistics"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,b.jsx)("p",{className:"text-gray-600 text-xs font-medium mb-2 uppercase tracking-wide",children:"Total Orders"}),(0,b.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-blue-600",children:v.orderCount})]}),(0,b.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[(0,b.jsx)("p",{className:"text-gray-600 text-xs font-medium mb-2 uppercase tracking-wide",children:"Total Spent"}),(0,b.jsxs)("p",{className:"text-2xl sm:text-3xl font-bold text-purple-600",children:["$",v.totalSpent.toFixed(2)]})]}),v.storeCredit>0&&(0,b.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,b.jsx)("p",{className:"text-gray-600 text-xs font-medium mb-2 uppercase tracking-wide",children:"Store Credit"}),(0,b.jsxs)("p",{className:"text-2xl sm:text-3xl font-bold text-green-600",children:["$",v.storeCredit.toFixed(2)]})]}),v.orderCount>0&&(0,b.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[(0,b.jsx)("p",{className:"text-gray-600 text-xs font-medium mb-2 uppercase tracking-wide",children:"Avg Order Value"}),(0,b.jsxs)("p",{className:"text-2xl sm:text-3xl font-bold text-orange-600",children:["$",(v.totalSpent/v.orderCount).toFixed(2)]})]})]})]}),v.orders&&v.orders.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"font-bold text-gray-900 mb-4 text-lg",children:["Order History (",v.orders.length,")"]}),(0,b.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:v.orders.map(a=>(0,b.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("p",{className:"font-semibold text-gray-900 text-sm",children:["Order #",a.id]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mt-2 text-xs sm:text-sm text-gray-600",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(m.Calendar,{className:"w-3 h-3 sm:w-4 sm:h-4"}),new Date(a.createdAt).toLocaleDateString()]}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(l.ShoppingBag,{className:"w-3 h-3 sm:w-4 sm:h-4"}),a.itemCount," item",1!==a.itemCount?"s":""]})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"font-bold text-gray-900 text-sm",children:["$",a.total.toFixed(2)]}),(0,b.jsx)("span",{className:`text-xs font-medium inline-block mt-2 px-3 py-1 rounded-full ${"pending"===a.status?"bg-yellow-100 text-yellow-800":"completed"===a.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:a.status})]})]})},a.id))})]}),(!v.orders||0===v.orders.length)&&(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-8 text-center",children:[(0,b.jsx)(l.ShoppingBag,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-gray-700 font-medium",children:"No orders yet"}),(0,b.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:"This customer hasn't placed any orders"})]})]})})})]},`customer-${a.id}`))})]})})})]})})]})})}a.s(["default",()=>r],82761)}];

//# sourceMappingURL=client_pages_Customers_tsx_a3962ef7._.js.map