module.exports=[92e3,a=>{"use strict";let b=(0,a.i(70106).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],92e3)},67453,a=>{"use strict";let b=(0,a.i(70106).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],67453)},92759,a=>{"use strict";let b=(0,a.i(70106).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);a.s(["Send",()=>b],92759)},28193,a=>{"use strict";let b=(0,a.i(70106).default)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);a.s(["Loader",()=>b],28193)},77709,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(57999),e=a.i(65967),f=a.i(67453),g=a.i(92e3),h=a.i(28193),i=a.i(92759),j=a.i(783),k=a.i(23292);function l(){let[a]=(0,d.useSearchParams)(),l=(0,e.useNavigate)(),m=a.get("token"),n=a.get("action"),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(null);(0,c.useEffect)(()=>{m?n&&("approve"===n||"revise"===n)?"approve"===n&&y():x("Invalid action specified in the proof link."):x("Invalid proof link. Token is missing.")},[m,n]);let y=async()=>{if(!m)return void x("Invalid token");try{p(!0),x(null);let a=await fetch(`/api/proofs/public/token/approve?token=${m}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!a.ok){let b=await a.json();throw Error(b.error||"Failed to approve proof")}v("approve"),k.toast.success("Thank you! Your design has been approved."),setTimeout(()=>{l("/")},3e3)}catch(b){let a=b.message||"Failed to approve proof. Please try again or contact support.";x(a),k.toast.error(a),console.error(b)}finally{p(!1)}},z=async()=>{if(!m)return void x("Invalid token");if(!s.trim())return void k.toast.error("Please describe the changes you'd like");try{r(!0),x(null);let a=await fetch(`/api/proofs/public/token/deny?token=${m}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({revision_notes:s})});if(!a.ok){let b=await a.json();throw Error(b.error||"Failed to submit revision request")}v("revise"),k.toast.success("Your feedback has been sent. We'll make those changes!"),setTimeout(()=>{l("/")},3e3)}catch(b){let a=b.message||"Failed to submit feedback. Please try again or contact support.";x(a),k.toast.error(a),console.error(b)}finally{r(!1)}};return o?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("main",{className:"flex-1 flex items-center justify-center min-h-screen bg-gradient-to-b from-slate-50 to-white",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(h.Loader,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Processing your approval..."})]})}),(0,b.jsx)(j.default,{})]}):w?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("main",{className:"flex-1 flex items-center justify-center min-h-screen bg-gradient-to-b from-slate-50 to-white",children:(0,b.jsxs)("div",{className:"text-center max-w-md mx-auto px-4",children:[(0,b.jsx)(g.AlertCircle,{className:"w-12 h-12 text-red-600 mx-auto mb-4"}),(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:w.includes("expired")||w.includes("invalid")?"Link Expired or Invalid":"Something Went Wrong"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:w}),(0,b.jsx)("button",{onClick:()=>l("/"),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Go Home"})]})}),(0,b.jsx)(j.default,{})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("main",{className:"flex-1 min-h-screen bg-gradient-to-b from-slate-50 to-white py-12",children:(0,b.jsxs)("div",{className:"max-w-2xl mx-auto px-4",children:[(0,b.jsxs)("div",{className:"text-center mb-12",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"approve"===u?"Design Approved! ✓":"revise"===u?"Feedback Submitted ✓":"approve"===n?"Approving Your Design...":"Request Design Changes"}),(0,b.jsx)("p",{className:"text-lg text-gray-600",children:"approve"===u?"Thank you for approving your design. We'll move forward with production.":"revise"===u?"Thank you for your feedback. Our design team will make those changes.":"revise"===n?"Please describe the changes you'd like us to make to your design.":"Please wait while we process your approval..."})]}),"approve"===u&&(0,b.jsx)("div",{className:"bg-green-50 border border-green-300 rounded-xl p-6 mb-8",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(f.CheckCircle2,{className:"w-6 h-6 text-green-600 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-green-900 mb-1",children:"Design Approved"}),(0,b.jsx)("p",{className:"text-sm text-green-800",children:"Your design has been approved. Production will begin soon."})]})]})}),"revise"===u&&(0,b.jsx)("div",{className:"bg-orange-50 border border-orange-300 rounded-xl p-6 mb-8",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(f.CheckCircle2,{className:"w-6 h-6 text-orange-600 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-orange-900 mb-1",children:"Feedback Received"}),(0,b.jsx)("p",{className:"text-sm text-orange-800",children:"We've received your feedback and will make those changes. We'll send you an updated proof soon."})]})]})}),!u&&"revise"===n&&(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)("div",{className:"bg-white border border-gray-300 rounded-xl p-6",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"What would you like us to change?"}),(0,b.jsx)("textarea",{value:s,onChange:a=>t(a.target.value),placeholder:"Tell us what you'd like us to change (e.g., different colors, adjust size, move text, etc.)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50 mb-4",rows:6,autoFocus:!0}),(0,b.jsx)("button",{onClick:z,disabled:q||!s.trim(),className:"w-full px-6 py-3 bg-orange-600 hover:bg-orange-700 disabled:bg-orange-600/50 text-white font-semibold rounded-lg transition-colors flex items-center justify-center gap-2",children:q?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Loader,{className:"w-5 h-5 animate-spin"}),"Submitting..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Send,{className:"w-5 h-5"}),"Send Feedback"]})})]})}),u&&(0,b.jsx)("div",{className:"text-center mt-8",children:(0,b.jsx)("p",{className:"text-gray-600",children:"Redirecting you to the home page in a few seconds..."})})]})}),(0,b.jsx)(j.default,{})]})}a.s(["default",()=>l])}];

//# sourceMappingURL=_fe21fa4b._.js.map