module.exports=[4261,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(65967),e=a.i(83497),f=a.i(10227),g=a.i(41675),h=a.i(90166),i=a.i(32860),j=a.i(92e3),k=a.i(5784),l=a.i(87532),m=a.i(34075),n=a.i(24987),o=a.i(46842),p=a.i(63519),q=a.i(92258),r=a.i(63588),s=a.i(38632),t=a.i(40695),u=a.i(90297);function v(){let a=(0,d.useNavigate)(),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)(!0),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(1),[J,K]=(0,c.useState)(!1),L=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),M=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a),N=a=>"number"==typeof a?a.toFixed(2):"0.00",O=v.filter(a=>{if(!F.trim())return!0;let b=F.toLowerCase().trim();return!!(a.id.toString().includes(b)||L(a.dateCreated).toLowerCase().includes(b)||a.total.toFixed(2).includes(b)||M(a.total).replace("$","").toLowerCase().includes(b))}),P=async(a=1,b=!0)=>{try{let c=localStorage.getItem("authToken");b?y(!0):A(!0),C("");let d=await fetch(`/api/orders?page=${a}&limit=20`,{headers:{Authorization:`Bearer ${c}`}});if(!d.ok){let a=await d.json();throw Error(a.error||"Failed to fetch order history")}let e=await d.json();b?w(e.orders||[]):w(a=>[...a,...e.orders||[]]),I(a),K(e.pagination?.hasMore||!1)}catch(a){C(a instanceof Error?a.message:"Failed to load order history")}finally{y(!1),A(!1)}};return((0,c.useEffect)(()=>{localStorage.getItem("authToken")?(I(1),w([]),P(1,!0)):a("/login")},[a]),x)?(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("main",{className:"min-h-screen bg-gray-50 py-8",children:(0,b.jsx)("div",{className:"max-w-6xl mx-auto px-4",children:(0,b.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,b.jsx)("div",{className:"text-gray-600 text-lg",children:"Loading your orders..."})})})})}):(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("main",{className:"min-h-screen bg-gray-50 py-6 sm:py-8",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto px-3 sm:px-4",children:[(0,b.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,b.jsxs)("button",{onClick:()=>a("/dashboard"),className:"flex items-center gap-2 text-sm font-medium text-blue-600 hover:text-blue-700 mb-4",children:[(0,b.jsx)(i.ArrowRight,{className:"w-4 h-4 rotate-180"}),"Back to Dashboard"]}),(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Order History"}),(0,b.jsx)("p",{className:"text-gray-600 mt-2",children:"View all your orders and track shipments"})]}),B&&(0,b.jsxs)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex gap-3",children:[(0,b.jsx)(j.AlertCircle,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,b.jsx)("p",{className:"text-sm text-red-800",children:B})]}),v.length>0&&(0,b.jsxs)("div",{className:"mb-6 bg-white rounded-lg border border-gray-200 p-4 sm:p-6",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(l.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),(0,b.jsx)("input",{type:"text",placeholder:"Search orders by number, date (Dec 1), or amount ($50)...",value:F,onChange:a=>G(a.target.value),className:"w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),F&&(0,b.jsx)("button",{onClick:()=>G(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",title:"Clear search",children:(0,b.jsx)(m.X,{className:"w-5 h-5"})})]}),F&&(0,b.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Found ",O.length," order",1!==O.length?"s":""]})]}),0===v.length&&!B&&(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 sm:p-12 text-center",children:[(0,b.jsx)(e.Package,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Orders Yet"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:"You haven't placed any orders yet. Start shopping to see your order history here."}),(0,b.jsx)(t.Button,{onClick:()=>a("/products"),className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Shop Now"})]}),v.length>0&&0===O.length&&F&&(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 sm:p-12 text-center",children:[(0,b.jsx)(l.Search,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Orders Found"}),(0,b.jsxs)("p",{className:"text-gray-600 mb-6",children:['No orders match "',F,'". Try searching by order number, date, or amount.']}),(0,b.jsx)(t.Button,{onClick:()=>G(""),className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Clear Search"})]}),O.length>0&&(0,b.jsxs)("div",{className:"space-y-4",children:[O.map(c=>(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow",children:[(0,b.jsxs)("button",{onClick:()=>E(D===c.id?null:c.id),className:"w-full px-4 sm:px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4 flex-1 text-left",children:[(0,b.jsx)("div",{className:"bg-gray-100 p-2 sm:p-3 rounded-lg flex-shrink-0",children:(0,b.jsx)(e.Package,{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-600"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 flex-wrap",children:[(0,b.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:(0,u.formatOrderNumber)(c.id)}),(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${(a=>{switch("pending_payment"===a.toLowerCase()?"processing":a.toLowerCase()){case"pending":return"text-orange-600 bg-orange-50";case"processing":return"text-yellow-600 bg-yellow-50";case"printing":return"text-purple-600 bg-purple-50";case"preparing for shipping":return"text-indigo-600 bg-indigo-50";case"in transit":return"text-blue-600 bg-blue-50";case"shipped":return"text-emerald-600 bg-emerald-50";case"delivered":return"text-cyan-600 bg-cyan-50";case"completed":return"text-green-600 bg-green-50";case"cancelled":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}})(c.status)}`,children:("pending_payment"===c.status?"processing":c.status).charAt(0).toUpperCase()+("pending_payment"===c.status?"processing":c.status).slice(1)})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 sm:gap-6 text-xs sm:text-sm text-gray-600 flex-wrap",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(g.Calendar,{className:"w-3 h-3 sm:w-4 sm:h-4"}),L(c.dateCreated)]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(e.Package,{className:"w-3 h-3 sm:w-4 sm:h-4"}),c.itemCount," item",1!==c.itemCount?"s":""]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(h.DollarSign,{className:"w-3 h-3 sm:w-4 sm:h-4"}),M(c.total)]}),c.estimated_delivery_date&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-blue-600 font-medium",children:[(0,b.jsx)(g.Calendar,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Delivery:"})," ",L(c.estimated_delivery_date)]}),c.tracking_number&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-green-600 font-medium",children:[(0,b.jsx)(f.Truck,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Tracking:"})," ",c.tracking_number]})]})]})]}),(0,b.jsx)(k.ChevronDown,{className:`w-5 h-5 text-gray-400 flex-shrink-0 transition-transform ${D===c.id?"rotate-180":""}`})]}),D===c.id&&(0,b.jsxs)("div",{className:"bg-gray-50 border-t-2 border-gray-200 p-3 sm:p-5 space-y-3 sm:space-y-4",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg border-2 border-blue-200 p-3 sm:p-4 shadow-sm",children:[(0,b.jsxs)("h3",{className:"font-bold text-xs sm:text-sm text-gray-900 mb-2 sm:mb-3 flex items-center gap-2",children:[(0,b.jsx)(o.User,{className:"w-3 h-3 sm:w-4 sm:h-4 text-blue-600"}),"Customer & Shipping Information"]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[c.customerName&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Full Name"}),(0,b.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-900",children:c.customerName})]}),c.customerEmail&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-xs text-gray-600 mb-1 flex items-center gap-1",children:[(0,b.jsx)(q.Mail,{className:"w-3 h-3"}),"Email"]}),(0,b.jsx)("p",{className:"text-sm font-medium text-blue-600 break-all",children:c.customerEmail})]}),c.customerPhone&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-xs text-gray-600 mb-1 flex items-center gap-1",children:[(0,b.jsx)(p.Phone,{className:"w-3 h-3"}),"Phone"]}),(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:c.customerPhone})]}),c.estimated_delivery_date&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-xs text-gray-600 mb-1 flex items-center gap-1",children:[(0,b.jsx)(g.Calendar,{className:"w-3 h-3"}),"Est. Delivery"]}),(0,b.jsx)("p",{className:"text-sm font-medium text-blue-600",children:L(c.estimated_delivery_date)})]})]}),c.shippingAddress&&(0,b.jsxs)("div",{className:"mt-3 sm:mt-4 pt-3 sm:pt-4 border-t border-gray-200",children:[(0,b.jsxs)("p",{className:"text-xs text-gray-600 mb-2 flex items-center gap-1",children:[(0,b.jsx)(n.MapPin,{className:"w-3 h-3"}),"Shipping Address"]}),(0,b.jsxs)("div",{className:"text-xs sm:text-sm text-gray-900 space-y-1",children:[(0,b.jsx)("p",{children:c.shippingAddress.street}),(0,b.jsxs)("p",{children:[c.shippingAddress.city,","," ",c.shippingAddress.state," ",c.shippingAddress.postalCode]}),(0,b.jsx)("p",{children:c.shippingAddress.country})]})]})]}),c.digital_files&&c.digital_files.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"font-bold text-xs sm:text-sm text-gray-900 mb-2 sm:mb-3 flex items-center gap-2",children:[(0,b.jsx)(s.Image,{className:"w-3 h-3 sm:w-4 sm:h-4 text-blue-600"}),"Design Files"]}),(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:c.digital_files.map(a=>(0,b.jsxs)("a",{href:a.file_url,target:"_blank",rel:"noopener noreferrer",className:"relative group overflow-hidden rounded-lg border-2 border-gray-200 hover:border-blue-400 transition-colors h-24 sm:h-28",children:[a.file_type?.includes("image")?(0,b.jsx)("img",{src:a.file_url,alt:a.file_name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform"}):(0,b.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center",children:(0,b.jsx)(e.Package,{className:"w-6 h-6 sm:w-8 sm:h-8 text-gray-400"})}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all flex items-end justify-center opacity-0 group-hover:opacity-100",children:(0,b.jsx)("p",{className:"text-white text-xs font-medium mb-2 px-2 text-center truncate",children:a.file_name})})]},a.id))})]}),c.digital_files&&c.digital_files.length>0&&(0,b.jsxs)("div",{className:"bg-white rounded-lg border-2 border-blue-200 p-3 sm:p-4 shadow-sm",children:[(0,b.jsx)("h4",{className:"text-xs sm:text-sm font-semibold text-gray-900 mb-2 sm:mb-3",children:"ðŸ“ Digital Files"}),(0,b.jsx)("div",{className:"space-y-2",children:c.digital_files.map(a=>(0,b.jsxs)("a",{href:a.file_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between bg-gray-50 p-2 sm:p-3 rounded border border-blue-100 hover:border-blue-400 hover:bg-blue-50 transition-colors gap-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[(0,b.jsx)(e.Package,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 flex-shrink-0"}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"text-xs sm:text-sm font-medium text-blue-900 truncate",children:a.file_name}),a.file_size&&(0,b.jsxs)("p",{className:"text-xs text-gray-600",children:[(a.file_size/1024/1024).toFixed(2)," ","MB"]})]})]}),(0,b.jsx)(i.ArrowRight,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 flex-shrink-0"})]},a.id))})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border-2 border-gray-200 p-3 sm:p-4 shadow-sm",children:[(0,b.jsxs)("h3",{className:"font-bold text-xs sm:text-sm text-gray-900 mb-3 sm:mb-4 flex items-center gap-2",children:[(0,b.jsx)(h.DollarSign,{className:"w-4 h-4 text-gray-600"}),"Order Summary"]}),(0,b.jsxs)("div",{className:"mb-3 sm:mb-4 pb-3 sm:pb-4 border-b border-gray-200",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Items Breakdown:"}),c.items&&c.items.length>0?(0,b.jsx)("div",{className:"space-y-3",children:c.items.map(a=>{let c="number"==typeof a.price_inc_tax?a.price_inc_tax:"number"==typeof a.price_ex_tax?a.price_ex_tax:"number"==typeof a.price?a.price:0,d=c*a.quantity;return(0,b.jsxs)("div",{className:"bg-gray-50 p-2 rounded border border-gray-100 text-xs",children:[a.design_file_url&&(0,b.jsxs)("div",{className:"mb-2",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Artwork file that was uploaded"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[a.design_file_url.startsWith("data:")||a.design_file_url.match(/\.(jpg|jpeg|png|gif|webp)$/i)?(0,b.jsx)("a",{href:a.design_file_url,target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0",children:(0,b.jsx)("img",{src:a.design_file_url,alt:"Design Upload",className:"h-12 w-12 object-cover rounded border border-gray-300 hover:border-blue-400 transition-colors"})}):(0,b.jsx)("a",{href:a.design_file_url,target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 h-12 w-12 flex items-center justify-center rounded border border-gray-300 bg-gray-100",children:(0,b.jsx)(e.Package,{className:"w-4 h-4 text-gray-400"})}),(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("p",{className:"font-semibold text-gray-900",children:a.product_name})})]})]}),!a.design_file_url&&(0,b.jsx)("p",{className:"font-semibold text-gray-900 mb-1",children:a.product_name}),a.options&&(0,b.jsxs)("div",{className:"pt-2 border-t border-gray-300 space-y-1 mb-2",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-gray-700",children:"Options:"}),(0,b.jsx)("div",{className:"space-y-1",children:Array.isArray(a.options)?a.options.map((a,c)=>{let d=a.option_id||a.name||`Option ${c+1}`,e=a.option_value||a.value||"",f=a.price||a.modifier_price||0;return(0,b.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,b.jsxs)("span",{className:"text-gray-700",children:[d," ",e&&`(${e})`]}),f>0&&(0,b.jsxs)("span",{className:"text-blue-600 font-medium",children:["+$",N(f)]})]},c)}):Object.entries(a.options).map(([a,c])=>{let d="object"==typeof c?c.price||c.modifier_price:0,e="object"==typeof c?c.value||c.name:c,f=a.split("_").map(a=>a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()).join(" ");return(0,b.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,b.jsxs)("span",{className:"text-gray-700",children:[f," ",e&&`(${"string"==typeof e?e:"number"==typeof e?String(e):"boolean"==typeof e?e?"Yes":"No":""})`]}),d>0&&(0,b.jsxs)("span",{className:"text-blue-600 font-medium",children:["+$",N(d)]})]},a)})})]}),(0,b.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("p",{className:"text-gray-600",children:"Per Sticker:"}),(0,b.jsxs)("span",{className:"text-gray-900 font-medium",children:["$",N(c)]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Quantity:"}),(0,b.jsxs)("span",{className:"text-gray-900 font-medium",children:["Ã— ",a.quantity]})]}),(0,b.jsxs)("div",{className:"pt-2 border-t border-gray-300 flex justify-between font-semibold",children:[(0,b.jsx)("span",{className:"text-gray-900",children:"Item Total:"}),(0,b.jsxs)("span",{className:"text-emerald-600",children:["$",N(d)]})]})]})]},a.id)})}):(0,b.jsxs)("p",{className:"text-xs text-gray-600",children:[c.itemCount," item",1!==c.itemCount?"s":""]})]}),(0,b.jsxs)("div",{className:"space-y-2 text-xs sm:text-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Subtotal:"}),(0,b.jsx)("span",{className:"font-medium text-gray-900",children:M(c.subtotal||0)})]}),void 0!==c.tax&&c.tax>0&&(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Tax:"}),(0,b.jsx)("span",{className:"font-medium text-gray-900",children:M(c.tax)})]}),void 0!==c.shipping&&c.shipping>0&&(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Shipping:"}),(0,b.jsx)("span",{className:"font-medium text-gray-900",children:M(c.shipping)})]}),(0,b.jsxs)("div",{className:"pt-2 border-t-2 border-gray-300 flex justify-between",children:[(0,b.jsx)("span",{className:"font-bold text-gray-900",children:"Order Total:"}),(0,b.jsx)("span",{className:"font-bold text-lg text-emerald-600",children:M(c.total)})]})]}),(0,b.jsxs)("div",{className:"mt-3 sm:mt-4 pt-3 sm:pt-4 border-t border-gray-200 grid grid-cols-2 gap-2",children:[(0,b.jsxs)("div",{className:"bg-gray-50 p-2 rounded text-center",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"Items"}),(0,b.jsx)("p",{className:"text-sm font-bold text-gray-900",children:c.itemCount})]}),(0,b.jsxs)("div",{className:"bg-emerald-50 p-2 rounded text-center",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"Order Date"}),(0,b.jsx)("p",{className:"text-xs font-medium text-emerald-700",children:new Date(c.dateCreated).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]})]}),c.shipments&&c.shipments.length>0?(0,b.jsxs)("div",{className:"bg-white rounded-lg border-2 border-blue-200 p-3 sm:p-4 shadow-sm",children:[(0,b.jsxs)("h3",{className:"font-bold text-xs sm:text-sm text-gray-900 mb-2 sm:mb-3 flex items-center gap-2",children:[(0,b.jsx)(f.Truck,{className:"w-3 h-3 sm:w-4 sm:h-4 text-blue-600"}),"Shipping & Tracking"]}),(0,b.jsx)("div",{className:"space-y-3",children:c.shipments.map(a=>(0,b.jsxs)("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2 gap-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(a=>{switch(a.toLowerCase()){case"shipped":case"in_transit":return(0,b.jsx)(f.Truck,{className:"w-4 h-4"});default:return(0,b.jsx)(e.Package,{className:"w-4 h-4"})}})(a.status),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsxs)("p",{className:"text-xs sm:text-sm font-semibold text-gray-900 truncate",children:[a.shippingProvider||"Shipment"," ","-"," ",a.shippingMethod||"Standard"]}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:L(a.dateCreated)})]})]}),(0,b.jsx)("span",{className:"px-2 sm:px-3 py-1 rounded-full text-xs font-medium bg-blue-50 text-blue-700 flex-shrink-0",children:a.status.replace(/_/g," ").charAt(0).toUpperCase()+a.status.replace(/_/g," ").slice(1)})]}),a.trackingNumber&&(0,b.jsx)("div",{className:"mb-2 text-xs sm:text-sm",children:(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Tracking Number:"}),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,b.jsx)("span",{className:"font-mono font-semibold text-gray-900 text-xs sm:text-sm break-all",children:a.trackingNumber}),a.shippingProvider&&(0,b.jsx)("span",{className:"text-xs text-gray-500",children:a.shippingProvider})]})]})}),a.comments&&(0,b.jsx)("div",{className:"mt-2 p-2 sm:p-3 bg-gray-100 rounded text-xs sm:text-sm text-gray-700",children:a.comments})]},a.id))})]}):(0,b.jsx)("div",{className:"bg-white rounded-lg border-2 border-blue-200 p-3 sm:p-4 shadow-sm",children:(0,b.jsx)("p",{className:"text-xs sm:text-sm text-gray-700",children:"ðŸ“¦ Your order has not been shipped yet. We'll send you a tracking number as soon as it's on its way!"})}),(0,b.jsxs)("div",{className:"mt-3 sm:mt-4 pt-3 sm:pt-4 border-t border-gray-200",children:[(0,b.jsxs)("button",{onClick:()=>{let b={orderId:c.id,orderAmount:c.total,orderDate:L(c.dateCreated),orderStatus:c.status,productTypes:c.items?.map(a=>a.product_name).join(", "),trackingNumber:c.tracking_number,estimatedDelivery:c.estimated_delivery_date?L(c.estimated_delivery_date):"Not available"};localStorage.setItem("prefillOrderData",JSON.stringify(b)),a("/support")},className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 shadow-sm hover:shadow-md text-xs sm:text-sm",children:[(0,b.jsx)(r.MessageSquare,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Create Support Ticket"]}),(0,b.jsx)("p",{className:"text-xs text-gray-600 mt-2 text-center",children:"Need help with this order? Click above to open a support ticket and we'll pre-fill your order details."})]})]})]},c.id)),O.length>0&&J&&!F&&(0,b.jsx)("div",{className:"flex justify-center pt-6",children:(0,b.jsx)("button",{onClick:()=>{A(!0),P(H+1,!1)},disabled:z,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors",children:z?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Loading..."]}):"Load More Orders"})})]}),O.length>0&&(0,b.jsx)("div",{className:"mt-8 bg-white rounded-lg border border-gray-200 p-4 sm:p-6",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:F?"Matching Orders":"Total Orders"}),(0,b.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:O.length})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:F?"Matching Total Spent":"Total Spent"}),(0,b.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:M(O.reduce((a,b)=>a+b.total,0))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:F?"Matching Total Items":"Total Items"}),(0,b.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:O.reduce((a,b)=>a+b.itemCount,0)})]})]})})]})})})}a.s(["default",()=>v])}];

//# sourceMappingURL=client_pages_OrderHistory_tsx_1c34b17e._.js.map