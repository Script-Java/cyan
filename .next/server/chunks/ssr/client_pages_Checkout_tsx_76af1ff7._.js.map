{"version":3,"sources":["../../../../client/pages/Checkout.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { ArrowRight, Loader2, AlertCircle } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\r\n\r\ninterface CartItem {\r\n  product_id: number;\r\n  product_name?: string;\r\n  quantity: number;\r\n  price?: number;\r\n}\r\n\r\ninterface ShippingInfo {\r\n  firstName: string;\r\n  lastName: string;\r\n  email: string;\r\n  phone: string;\r\n  street: string;\r\n  street2: string;\r\n  city: string;\r\n  state: string;\r\n  postalCode: string;\r\n  country: string;\r\n}\r\n\r\ninterface BillingInfo {\r\n  same_as_shipping: boolean;\r\n  firstName: string;\r\n  lastName: string;\r\n  street: string;\r\n  street2: string;\r\n  city: string;\r\n  state: string;\r\n  postalCode: string;\r\n  country: string;\r\n}\r\n\r\ninterface PaymentInfo {\r\n  cardholderName: string;\r\n  cardNumber: string;\r\n  expiryMonth: string;\r\n  expiryYear: string;\r\n  cvv: string;\r\n}\r\n\r\nconst COUNTRIES = [\r\n  { code: \"US\", name: \"United States\" },\r\n  { code: \"CA\", name: \"Canada\" },\r\n  { code: \"GB\", name: \"United Kingdom\" },\r\n  { code: \"AU\", name: \"Australia\" },\r\n  { code: \"DE\", name: \"Germany\" },\r\n  { code: \"FR\", name: \"France\" },\r\n  { code: \"JP\", name: \"Japan\" },\r\n  { code: \"CN\", name: \"China\" },\r\n];\r\n\r\nconst US_STATES = [\r\n  \"AL\",\r\n  \"AK\",\r\n  \"AZ\",\r\n  \"AR\",\r\n  \"CA\",\r\n  \"CO\",\r\n  \"CT\",\r\n  \"DE\",\r\n  \"FL\",\r\n  \"GA\",\r\n  \"HI\",\r\n  \"ID\",\r\n  \"IL\",\r\n  \"IN\",\r\n  \"IA\",\r\n  \"KS\",\r\n  \"KY\",\r\n  \"LA\",\r\n  \"ME\",\r\n  \"MD\",\r\n  \"MA\",\r\n  \"MI\",\r\n  \"MN\",\r\n  \"MS\",\r\n  \"MO\",\r\n  \"MT\",\r\n  \"NE\",\r\n  \"NV\",\r\n  \"NH\",\r\n  \"NJ\",\r\n  \"NM\",\r\n  \"NY\",\r\n  \"NC\",\r\n  \"ND\",\r\n  \"OH\",\r\n  \"OK\",\r\n  \"OR\",\r\n  \"PA\",\r\n  \"RI\",\r\n  \"SC\",\r\n  \"SD\",\r\n  \"TN\",\r\n  \"TX\",\r\n  \"UT\",\r\n  \"VT\",\r\n  \"VA\",\r\n  \"WA\",\r\n  \"WV\",\r\n  \"WI\",\r\n  \"WY\",\r\n];\r\n\r\nexport default function Checkout() {\r\n  const navigate = useNavigate();\r\n  const [searchParams] = useSearchParams();\r\n  const urlCartId = searchParams.get(\"cartId\");\r\n  const localCartId = localStorage.getItem(\"cart_id\");\r\n  const cartId = urlCartId || localCartId;\r\n\r\n  const [cartItems, setCartItems] = useState<CartItem[]>([]);\r\n  const [subtotal, setSubtotal] = useState(0);\r\n  const [taxRate] = useState(0.08);\r\n  const [shippingCost] = useState(9.99);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [authToken, setAuthToken] = useState<string | null>(null);\r\n  const [customerId, setCustomerId] = useState<number | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const [shippingInfo, setShippingInfo] = useState<ShippingInfo>({\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    email: \"\",\r\n    phone: \"\",\r\n    street: \"\",\r\n    street2: \"\",\r\n    city: \"\",\r\n    state: \"CA\",\r\n    postalCode: \"\",\r\n    country: \"US\",\r\n  });\r\n\r\n  const [billingInfo, setBillingInfo] = useState<BillingInfo>({\r\n    same_as_shipping: true,\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    street: \"\",\r\n    street2: \"\",\r\n    city: \"\",\r\n    state: \"CA\",\r\n    postalCode: \"\",\r\n    country: \"US\",\r\n  });\r\n\r\n  const [paymentInfo, setPaymentInfo] = useState<PaymentInfo>({\r\n    cardholderName: \"\",\r\n    cardNumber: \"\",\r\n    expiryMonth: \"\",\r\n    expiryYear: \"\",\r\n    cvv: \"\",\r\n  });\r\n\r\n  const [squareApplicationId, setSquareApplicationId] = useState<string>(\"\");\r\n\r\n  // Load auth from localStorage (optional for guest checkout)\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"auth_token\");\r\n    const custId = localStorage.getItem(\"customer_id\");\r\n    setAuthToken(token);\r\n    setCustomerId(custId ? parseInt(custId) : null);\r\n    // Allow guest checkout - no redirect required\r\n  }, [navigate]);\r\n\r\n  // Load Square Application ID\r\n  useEffect(() => {\r\n    const loadSquareConfig = async () => {\r\n      try {\r\n        const response = await fetch(\"/api/square/config\");\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          if (data.applicationId) {\r\n            setSquareApplicationId(data.applicationId);\r\n          }\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Failed to load Square config:\", err);\r\n      }\r\n    };\r\n\r\n    loadSquareConfig();\r\n  }, []);\r\n\r\n  // Load cart data with timeout\r\n  useEffect(() => {\r\n    const loadCart = async () => {\r\n      try {\r\n        if (!cartId) {\r\n          console.log(\"No cart ID provided, allowing checkout to proceed\");\r\n          // Allow checkout to proceed with sample items\r\n          setIsLoading(false);\r\n          return;\r\n        }\r\n\r\n        const controller = new AbortController();\r\n        const timeoutId = setTimeout(() => controller.abort(), 5000);\r\n\r\n        const response = await fetch(`/api/cart/${cartId}`, {\r\n          signal: controller.signal,\r\n        });\r\n        clearTimeout(timeoutId);\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`Failed to load cart (Status: ${response.status})`);\r\n        }\r\n\r\n        const responseText = await response.text();\r\n        let data: any;\r\n        try {\r\n          data = responseText ? JSON.parse(responseText) : {};\r\n        } catch {\r\n          throw new Error(\"Invalid cart response format\");\r\n        }\r\n\r\n        setCartItems(data.data?.line_items || []);\r\n        setSubtotal(data.data?.subtotal || 0);\r\n      } catch (err) {\r\n        const errorMsg =\r\n          err instanceof Error ? err.message : \"Failed to load cart\";\r\n        console.error(\"Cart loading error:\", errorMsg);\r\n        // Continue checkout anyway with sample items\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    // Load cart if available, otherwise allow checkout\r\n    if (cartId) {\r\n      loadCart();\r\n    } else {\r\n      setIsLoading(false);\r\n    }\r\n  }, [cartId]);\r\n\r\n  const handleShippingChange = (\r\n    field: keyof ShippingInfo,\r\n    value: string | number,\r\n  ) => {\r\n    const updated = { ...shippingInfo, [field]: value };\r\n    setShippingInfo(updated);\r\n\r\n    // Auto-update billing if same as shipping\r\n    if (billingInfo.same_as_shipping) {\r\n      setBillingInfo((prev) => ({\r\n        ...prev,\r\n        firstName: updated.firstName,\r\n        lastName: updated.lastName,\r\n        street: updated.street,\r\n        street2: updated.street2,\r\n        city: updated.city,\r\n        state: updated.state,\r\n        postalCode: updated.postalCode,\r\n        country: updated.country,\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleBillingChange = (\r\n    field: keyof BillingInfo,\r\n    value: string | boolean,\r\n  ) => {\r\n    if (field === \"same_as_shipping\") {\r\n      setBillingInfo((prev) => ({\r\n        ...prev,\r\n        same_as_shipping: value as boolean,\r\n      }));\r\n\r\n      if (value) {\r\n        setBillingInfo((prev) => ({\r\n          ...prev,\r\n          firstName: shippingInfo.firstName,\r\n          lastName: shippingInfo.lastName,\r\n          street: shippingInfo.street,\r\n          street2: shippingInfo.street2,\r\n          city: shippingInfo.city,\r\n          state: shippingInfo.state,\r\n          postalCode: shippingInfo.postalCode,\r\n          country: shippingInfo.country,\r\n        }));\r\n      }\r\n    } else {\r\n      setBillingInfo((prev) => ({ ...prev, [field]: value }));\r\n    }\r\n  };\r\n\r\n  const validateForm = (): boolean => {\r\n    if (\r\n      !shippingInfo.firstName ||\r\n      !shippingInfo.lastName ||\r\n      !shippingInfo.email ||\r\n      !shippingInfo.phone ||\r\n      !shippingInfo.street ||\r\n      !shippingInfo.city ||\r\n      !shippingInfo.state ||\r\n      !shippingInfo.postalCode\r\n    ) {\r\n      setError(\"Please fill in all required shipping fields\");\r\n      return false;\r\n    }\r\n\r\n    if (\r\n      !billingInfo.same_as_shipping &&\r\n      (!billingInfo.firstName ||\r\n        !billingInfo.lastName ||\r\n        !billingInfo.street ||\r\n        !billingInfo.city ||\r\n        !billingInfo.state ||\r\n        !billingInfo.postalCode)\r\n    ) {\r\n      setError(\"Please fill in all required billing fields\");\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const handleSubmitOrder = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError(null);\r\n\r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      const orderTotal = subtotal + subtotal * taxRate + shippingCost;\r\n\r\n      console.log(\"Creating Square Checkout session, total:\", orderTotal);\r\n\r\n      // Create a checkout session with Square\r\n      const checkoutPayload = {\r\n        amount: orderTotal,\r\n        currency: \"USD\",\r\n        items: cartItems,\r\n        shippingAddress: {\r\n          firstName: shippingInfo.firstName,\r\n          lastName: shippingInfo.lastName,\r\n          street: shippingInfo.street,\r\n          street2: shippingInfo.street2,\r\n          city: shippingInfo.city,\r\n          state: shippingInfo.state,\r\n          postalCode: shippingInfo.postalCode,\r\n          country: shippingInfo.country,\r\n        },\r\n        billingAddress: billingInfo.same_as_shipping\r\n          ? {\r\n              firstName: shippingInfo.firstName,\r\n              lastName: shippingInfo.lastName,\r\n              street: shippingInfo.street,\r\n              street2: shippingInfo.street2,\r\n              city: shippingInfo.city,\r\n              state: shippingInfo.state,\r\n              postalCode: shippingInfo.postalCode,\r\n              country: shippingInfo.country,\r\n            }\r\n          : {\r\n              firstName: billingInfo.firstName,\r\n              lastName: billingInfo.lastName,\r\n              street: billingInfo.street,\r\n              street2: billingInfo.street2,\r\n              city: billingInfo.city,\r\n              state: billingInfo.state,\r\n              postalCode: billingInfo.postalCode,\r\n              country: billingInfo.country,\r\n            },\r\n        subtotal,\r\n        tax: subtotal * taxRate,\r\n        shipping: shippingCost,\r\n        total: orderTotal,\r\n        customerId: customerId || undefined,\r\n        customerEmail: shippingInfo.email,\r\n        customerName: `${shippingInfo.firstName} ${shippingInfo.lastName}`,\r\n      };\r\n\r\n      const response = await fetch(\"/api/square/checkout\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(checkoutPayload),\r\n      });\r\n\r\n      let result: any;\r\n\r\n      console.log(\"Checkout response status:\", response.status);\r\n\r\n      try {\r\n        result = await response.json();\r\n      } catch (parseError) {\r\n        console.error(\"Failed to parse checkout response:\", {\r\n          error: parseError,\r\n          status: response.status,\r\n        });\r\n        throw new Error(\r\n          `Checkout response parsing failed. Status: ${response.status}.`,\r\n        );\r\n      }\r\n\r\n      if (!response.ok) {\r\n        const errorMessage =\r\n          result?.error ||\r\n          result?.message ||\r\n          `Checkout failed (${response.status})`;\r\n        console.error(\"Checkout failed:\", {\r\n          status: response.status,\r\n          error: result,\r\n        });\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      // Redirect to Square's hosted checkout\r\n      if (result.checkoutUrl) {\r\n        console.log(\"Redirecting to Square Checkout:\", result.checkoutUrl);\r\n        window.location.href = result.checkoutUrl;\r\n      } else {\r\n        throw new Error(\"No checkout URL returned from server\");\r\n      }\r\n    } catch (err) {\r\n      const errorMessage =\r\n        err instanceof Error ? err.message : \"Failed to create checkout\";\r\n      setError(errorMessage);\r\n      toast.error(errorMessage);\r\n      console.error(\"Checkout creation error:\", err);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const tax = subtotal * taxRate;\r\n  const total = subtotal + tax + shippingCost;\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <>\n        <main className=\"pt-20 min-h-screen bg-gray-50 flex items-center justify-center\">\n          <Loader2 className=\"w-8 h-8 animate-spin text-[#FFD713]\" />\n        </main>\n      </>\n    );\n  }\n\n  return (\n    <>\r\n      <main className=\"pt-20 min-h-screen bg-gray-50 py-12\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n          <div className=\"mb-8\">\r\n            <h1 className=\"text-4xl font-bold text-[#030140] mb-2\">Checkout</h1>\r\n            <p className=\"text-gray-600\">Complete your purchase</p>\r\n          </div>\r\n\r\n          {error && (\r\n            <Alert variant=\"destructive\" className=\"mb-6\">\r\n              <AlertCircle className=\"h-4 w-4\" />\r\n              <AlertDescription>{error}</AlertDescription>\r\n            </Alert>\r\n          )}\r\n\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n            {/* Main Checkout Form */}\r\n            <div className=\"lg:col-span-2\">\r\n              <form onSubmit={handleSubmitOrder} className=\"space-y-8\">\r\n                {/* Shipping Information */}\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle>Shipping Address</CardTitle>\r\n                    <CardDescription>\r\n                      Where should we deliver your order?\r\n                    </CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent className=\"space-y-4\">\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                      <div>\r\n                        <Label htmlFor=\"firstName\">First Name *</Label>\r\n                        <Input\r\n                          id=\"firstName\"\r\n                          value={shippingInfo.firstName}\r\n                          onChange={(e) =>\r\n                            handleShippingChange(\"firstName\", e.target.value)\r\n                          }\r\n                          required\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <Label htmlFor=\"lastName\">Last Name *</Label>\r\n                        <Input\r\n                          id=\"lastName\"\r\n                          value={shippingInfo.lastName}\r\n                          onChange={(e) =>\r\n                            handleShippingChange(\"lastName\", e.target.value)\r\n                          }\r\n                          required\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <Label htmlFor=\"email\">Email Address *</Label>\r\n                      <Input\r\n                        id=\"email\"\r\n                        type=\"email\"\r\n                        value={shippingInfo.email}\r\n                        onChange={(e) =>\r\n                          handleShippingChange(\"email\", e.target.value)\r\n                        }\r\n                        required\r\n                      />\r\n                    </div>\r\n\r\n                    <div>\r\n                      <Label htmlFor=\"phone\">Phone Number *</Label>\r\n                      <Input\r\n                        id=\"phone\"\r\n                        type=\"tel\"\r\n                        value={shippingInfo.phone}\r\n                        onChange={(e) =>\r\n                          handleShippingChange(\"phone\", e.target.value)\r\n                        }\r\n                        required\r\n                      />\r\n                    </div>\r\n\r\n                    <div>\r\n                      <Label htmlFor=\"street\">Street Address *</Label>\r\n                      <Input\r\n                        id=\"street\"\r\n                        value={shippingInfo.street}\r\n                        onChange={(e) =>\r\n                          handleShippingChange(\"street\", e.target.value)\r\n                        }\r\n                        placeholder=\"123 Main St\"\r\n                        required\r\n                      />\r\n                    </div>\r\n\r\n                    <div>\r\n                      <Label htmlFor=\"street2\">\r\n                        Apt, Suite, etc. (optional)\r\n                      </Label>\r\n                      <Input\r\n                        id=\"street2\"\r\n                        value={shippingInfo.street2}\r\n                        onChange={(e) =>\r\n                          handleShippingChange(\"street2\", e.target.value)\r\n                        }\r\n                        placeholder=\"Apt 4B\"\r\n                      />\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                      <div>\r\n                        <Label htmlFor=\"city\">City *</Label>\r\n                        <Input\r\n                          id=\"city\"\r\n                          value={shippingInfo.city}\r\n                          onChange={(e) =>\r\n                            handleShippingChange(\"city\", e.target.value)\r\n                          }\r\n                          required\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <Label htmlFor=\"postalCode\">Postal Code *</Label>\r\n                        <Input\r\n                          id=\"postalCode\"\r\n                          value={shippingInfo.postalCode}\r\n                          onChange={(e) =>\r\n                            handleShippingChange(\"postalCode\", e.target.value)\r\n                          }\r\n                          required\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                      <div>\r\n                        <Label htmlFor=\"country\">Country *</Label>\r\n                        <Select\r\n                          value={shippingInfo.country}\r\n                          onValueChange={(value) =>\r\n                            handleShippingChange(\"country\", value)\r\n                          }\r\n                        >\r\n                          <SelectTrigger>\r\n                            <SelectValue />\r\n                          </SelectTrigger>\r\n                          <SelectContent>\r\n                            {COUNTRIES.map((country) => (\r\n                              <SelectItem\r\n                                key={country.code}\r\n                                value={country.code}\r\n                              >\r\n                                {country.name}\r\n                              </SelectItem>\r\n                            ))}\r\n                          </SelectContent>\r\n                        </Select>\r\n                      </div>\r\n                      <div>\r\n                        <Label htmlFor=\"state\">State/Province *</Label>\r\n                        {shippingInfo.country === \"US\" ? (\r\n                          <Select\r\n                            value={shippingInfo.state}\r\n                            onValueChange={(value) =>\r\n                              handleShippingChange(\"state\", value)\r\n                            }\r\n                          >\r\n                            <SelectTrigger>\r\n                              <SelectValue />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                              {US_STATES.map((state) => (\r\n                                <SelectItem key={state} value={state}>\r\n                                  {state}\r\n                                </SelectItem>\r\n                              ))}\r\n                            </SelectContent>\r\n                          </Select>\r\n                        ) : (\r\n                          <Input\r\n                            value={shippingInfo.state}\r\n                            onChange={(e) =>\r\n                              handleShippingChange(\"state\", e.target.value)\r\n                            }\r\n                            placeholder=\"State/Province\"\r\n                            required\r\n                          />\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n\r\n                {/* Billing Information */}\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle>Billing Address</CardTitle>\r\n                  </CardHeader>\r\n                  <CardContent className=\"space-y-4\">\r\n                    <div className=\"flex items-center space-x-2 mb-4\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        id=\"sameAsShipping\"\r\n                        checked={billingInfo.same_as_shipping}\r\n                        onChange={(e) =>\r\n                          handleBillingChange(\r\n                            \"same_as_shipping\",\r\n                            e.target.checked,\r\n                          )\r\n                        }\r\n                        className=\"w-4 h-4\"\r\n                      />\r\n                      <Label\r\n                        htmlFor=\"sameAsShipping\"\r\n                        className=\"cursor-pointer font-normal\"\r\n                      >\r\n                        Same as shipping address\r\n                      </Label>\r\n                    </div>\r\n\r\n                    {!billingInfo.same_as_shipping && (\r\n                      <>\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                          <div>\r\n                            <Label htmlFor=\"billFirstName\">First Name *</Label>\r\n                            <Input\r\n                              id=\"billFirstName\"\r\n                              value={billingInfo.firstName}\r\n                              onChange={(e) =>\r\n                                handleBillingChange(\"firstName\", e.target.value)\r\n                              }\r\n                              required\r\n                            />\r\n                          </div>\r\n                          <div>\r\n                            <Label htmlFor=\"billLastName\">Last Name *</Label>\r\n                            <Input\r\n                              id=\"billLastName\"\r\n                              value={billingInfo.lastName}\r\n                              onChange={(e) =>\r\n                                handleBillingChange(\"lastName\", e.target.value)\r\n                              }\r\n                              required\r\n                            />\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                          <Label htmlFor=\"billStreet\">Street Address *</Label>\r\n                          <Input\r\n                            id=\"billStreet\"\r\n                            value={billingInfo.street}\r\n                            onChange={(e) =>\r\n                              handleBillingChange(\"street\", e.target.value)\r\n                            }\r\n                            placeholder=\"123 Main St\"\r\n                            required\r\n                          />\r\n                        </div>\r\n\r\n                        <div>\r\n                          <Label htmlFor=\"billStreet2\">\r\n                            Apt, Suite, etc. (optional)\r\n                          </Label>\r\n                          <Input\r\n                            id=\"billStreet2\"\r\n                            value={billingInfo.street2}\r\n                            onChange={(e) =>\r\n                              handleBillingChange(\"street2\", e.target.value)\r\n                            }\r\n                            placeholder=\"Apt 4B\"\r\n                          />\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                          <div>\r\n                            <Label htmlFor=\"billCity\">City *</Label>\r\n                            <Input\r\n                              id=\"billCity\"\r\n                              value={billingInfo.city}\r\n                              onChange={(e) =>\r\n                                handleBillingChange(\"city\", e.target.value)\r\n                              }\r\n                              required\r\n                            />\r\n                          </div>\r\n                          <div>\r\n                            <Label htmlFor=\"billPostalCode\">\r\n                              Postal Code *\r\n                            </Label>\r\n                            <Input\r\n                              id=\"billPostalCode\"\r\n                              value={billingInfo.postalCode}\r\n                              onChange={(e) =>\r\n                                handleBillingChange(\r\n                                  \"postalCode\",\r\n                                  e.target.value,\r\n                                )\r\n                              }\r\n                              required\r\n                            />\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                          <div>\r\n                            <Label htmlFor=\"billCountry\">Country *</Label>\r\n                            <Select\r\n                              value={billingInfo.country}\r\n                              onValueChange={(value) =>\r\n                                handleBillingChange(\"country\", value)\r\n                              }\r\n                            >\r\n                              <SelectTrigger>\r\n                                <SelectValue />\r\n                              </SelectTrigger>\r\n                              <SelectContent>\r\n                                {COUNTRIES.map((country) => (\r\n                                  <SelectItem\r\n                                    key={country.code}\r\n                                    value={country.code}\r\n                                  >\r\n                                    {country.name}\r\n                                  </SelectItem>\r\n                                ))}\r\n                              </SelectContent>\r\n                            </Select>\r\n                          </div>\r\n                          <div>\r\n                            <Label htmlFor=\"billState\">State/Province *</Label>\r\n                            {billingInfo.country === \"US\" ? (\r\n                              <Select\r\n                                value={billingInfo.state}\r\n                                onValueChange={(value) =>\r\n                                  handleBillingChange(\"state\", value)\r\n                                }\r\n                              >\r\n                                <SelectTrigger>\r\n                                  <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                  {US_STATES.map((state) => (\r\n                                    <SelectItem key={state} value={state}>\r\n                                      {state}\r\n                                    </SelectItem>\r\n                                  ))}\r\n                                </SelectContent>\r\n                              </Select>\r\n                            ) : (\r\n                              <Input\r\n                                value={billingInfo.state}\r\n                                onChange={(e) =>\r\n                                  handleBillingChange(\"state\", e.target.value)\r\n                                }\r\n                                placeholder=\"State/Province\"\r\n                                required\r\n                              />\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </>\r\n                    )}\r\n                  </CardContent>\r\n                </Card>\r\n\r\n                <Button\r\n                  type=\"submit\"\r\n                  className=\"w-full bg-[#FFD713] text-[#030140] hover:bg-[#FFD713]/90 py-6 text-lg font-bold disabled:opacity-50\"\r\n                  disabled={isSubmitting}\r\n                >\r\n                  {isSubmitting ? (\r\n                    <>\r\n                      <Loader2 className=\"w-5 h-5 mr-2 animate-spin\" />\r\n                      Processing...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      Complete Order\r\n                      <ArrowRight className=\"w-5 h-5 ml-2\" />\r\n                    </>\r\n                  )}\r\n                </Button>\r\n              </form>\r\n            </div>\r\n\r\n            {/* Order Summary */}\r\n            <div className=\"lg:col-span-1\">\r\n              <Card className=\"sticky top-24\">\r\n                <CardHeader>\r\n                  <CardTitle>Order Summary</CardTitle>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                  <div className=\"space-y-3 max-h-96 overflow-y-auto border-b pb-4\">\r\n                    {cartItems.length === 0 ? (\r\n                      <p className=\"text-gray-500 text-sm\">No items in cart</p>\r\n                    ) : (\r\n                      cartItems.map((item, idx) => (\r\n                        <div key={idx} className=\"flex justify-between text-sm\">\r\n                          <div>\r\n                            <p className=\"font-medium\">\r\n                              {item.product_name ||\r\n                                `Product #${item.product_id}`}\r\n                            </p>\r\n                            <p className=\"text-gray-600\">\r\n                              Qty: {item.quantity}\r\n                            </p>\r\n                          </div>\r\n                          <p className=\"font-medium\">\r\n                            ${((item.price || 0.25) * item.quantity).toFixed(2)}\r\n                          </p>\r\n                        </div>\r\n                      ))\r\n                    )}\r\n                  </div>\r\n\r\n                  <div className=\"space-y-2 text-sm\">\r\n                    <div className=\"flex justify-between\">\r\n                      <span>Subtotal</span>\r\n                      <span>${subtotal.toFixed(2)}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span>Tax</span>\r\n                      <span>${tax.toFixed(2)}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span>Shipping</span>\r\n                      <span>${shippingCost.toFixed(2)}</span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"border-t pt-4\">\r\n                    <div className=\"flex justify-between text-lg font-bold\">\r\n                      <span>Total</span>\r\n                      <span>${total.toFixed(2)}</span>\r\n                    </div>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}